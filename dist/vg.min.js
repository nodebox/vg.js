(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.vg = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function BigInteger(t,e,i){ClipperLib.biginteger_used=1,null!=t&&("number"==typeof t&&"undefined"==typeof e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function nbi(){return new BigInteger(null)}function am1(t,e,i,r,n,p){for(;--p>=0;){var o=e*this[t++]+i[r]+n;n=Math.floor(o/67108864),i[r++]=67108863&o}return n}function am2(t,e,i,r,n,p){for(var o=32767&e,l=e>>15;--p>=0;){var s=32767&this[t],u=this[t++]>>15,h=l*s+u*o;s=o*s+((32767&h)<<15)+i[r]+(1073741823&n),n=(s>>>30)+(h>>>15)+l*u+(n>>>30),i[r++]=1073741823&s}return n}function am3(t,e,i,r,n,p){for(var o=16383&e,l=e>>14;--p>=0;){var s=16383&this[t],u=this[t++]>>14,h=l*s+u*o;s=o*s+((16383&h)<<14)+i[r]+n,n=(s>>28)+(h>>14)+l*u,i[r++]=268435455&s}return n}function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var i=BI_RC[t.charCodeAt(e)];return null==i?-1:i}function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var r=t.length,n=!1,p=0;--r>=0;){var o=8==i?255&t[r]:intAt(t,r);0>o?"-"==t.charAt(r)&&(n=!0):(n=!1,0==p?this[this.t++]=o:p+i>this.DB?(this[this.t-1]|=(o&(1<<this.DB-p)-1)<<p,this[this.t++]=o>>this.DB-p):this[this.t-1]|=o<<p,p+=i,p>=this.DB&&(p-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,p>0&&(this[this.t-1]|=(1<<this.DB-p)-1<<p)),this.clamp(),n&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,n=!1,p="",o=this.t,l=this.DB-o*this.DB%e;if(o-->0)for(l<this.DB&&(i=this[o]>>l)>0&&(n=!0,p=int2char(i));o>=0;)e>l?(i=(this[o]&(1<<l)-1)<<e-l,i|=this[--o]>>(l+=this.DB-e)):(i=this[o]>>(l-=e)&r,0>=l&&(l+=this.DB,--o)),i>0&&(n=!0),n&&(p+=int2char(i));return n?p:"0"}function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(e=i-t.t,0!=e)return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function nbits(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var i,r=t%this.DB,n=this.DB-r,p=(1<<n)-1,o=Math.floor(t/this.DB),l=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+o+1]=this[i]>>n|l,l=(this[i]&p)<<r;for(i=o-1;i>=0;--i)e[i]=0;e[o]=l,e.t=this.t+o+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);var r=t%this.DB,n=this.DB-r,p=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&p)<<n,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&p)<<n),e.t=this.t-i,e.clamp()}function bnpSubTo(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);n>i;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=0>r?-1:0,-1>r?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()}function bnpMultiplyTo(t,e){var i=this.abs(),r=t.abs(),n=i.t;for(e.t=n+r.t;--n>=0;)e[n]=0;for(n=0;n<r.t;++n)e[n+i.t]=i.am(0,r[n],e,n,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,i){var r=t.abs();if(!(r.t<=0)){var n=this.abs();if(n.t<r.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=nbi());var p=nbi(),o=this.s,l=t.s,s=this.DB-nbits(r[r.t-1]);s>0?(r.lShiftTo(s,p),n.lShiftTo(s,i)):(r.copyTo(p),n.copyTo(i));var u=p.t,h=p[u-1];if(0!=h){var a=h*(1<<this.F1)+(u>1?p[u-2]>>this.F2:0),C=this.FV/a,f=(1<<this.F1)/a,d=1<<this.F2,L=i.t,P=L-u,b=null==e?nbi():e;for(p.dlShiftTo(P,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),BigInteger.ONE.dlShiftTo(u,b),b.subTo(p,p);p.t<u;)p[p.t++]=0;for(;--P>=0;){var m=i[--L]==h?this.DM:Math.floor(i[L]*C+(i[L-1]+d)*f);if((i[L]+=p.am(0,m,i,P,0,u))<m)for(p.dlShiftTo(P,b),i.subTo(b,i);i[L]<--m;)i.subTo(b,i)}null!=e&&(i.drShiftTo(u,e),o!=l&&BigInteger.ZERO.subTo(e,e)),i.t=u,i.clamp(),s>0&&i.rShiftTo(s,i),0>o&&BigInteger.ZERO.subTo(i,i)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger.ZERO)>0&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger.ZERO)>0&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(t,e){if(t>4294967295||1>t)return BigInteger.ONE;var i=nbi(),r=nbi(),n=e.convert(this),p=nbits(t)-1;for(n.copyTo(i);--p>=0;)if(e.sqrTo(i,r),(t&1<<p)>0)e.mulTo(r,n,i);else{var o=i;i=r,r=o}return e.revert(i)}function bnModPowInt(t,e){var i;return i=256>t||e.isEven()?new Classic(e):new Montgomery(e),this.exp(t,i)}function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=nbv(i),n=nbi(),p=nbi(),o="";for(this.divRemTo(r,n,p);n.signum()>0;)o=(i+p.intValue()).toString(t).substr(1)+o,n.divRemTo(r,n,p);return p.intValue().toString(t)+o}function bnpFromRadix(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),r=Math.pow(e,i),n=!1,p=0,o=0,l=0;l<t.length;++l){var s=intAt(t,l);0>s?"-"==t.charAt(l)&&0==this.signum()&&(n=!0):(o=e*o+s,++p>=i&&(this.dMultiply(r),this.dAddOffset(o,0),p=0,o=0))}p>0&&(this.dMultiply(Math.pow(e,p)),this.dAddOffset(o,0)),n&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(t,e,i){if("number"==typeof e)if(2>t)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger.ONE.shiftLeft(t-1),this);else{var r=new Array,n=7&t;r.length=(t>>3)+1,e.nextBytes(r),n>0?r[0]&=(1<<n)-1:r[0]=0,this.fromString(r,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-->0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)8>r?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,0>=r&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e}function bnEquals(t){return 0==this.compareTo(t)}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,e,i){var r,n,p=Math.min(t.t,this.t);for(r=0;p>r;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=p;r<this.t;++r)i[r]=e(this[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=p;r<t.t;++r)i[r]=e(n,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e}function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var e=nbi();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function bnShiftRight(t){var e=nbi();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function lbit(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+lbit(this[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function bnBitCount(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=cbit(this[i]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function bnpChangeBit(t,e){var i=BigInteger.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);n>i;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=0>r?-1:0,r>0?e[i++]=r:-1>r&&(e[i++]=this.DV+r),e.t=i,e.clamp()}function bnAdd(t){var e=nbi();return this.addTo(t,e),e}function bnSubtract(t){var e=nbi();return this.subTo(t,e),e}function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e}function bnSquare(){var t=nbi();return this.squareTo(t),t}function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e}function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e}function bnDivideAndRemainder(t){var e=nbi(),i=nbi();return this.divRemTo(t,e,i),new Array(e,i)}function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,i){t.multiplyTo(e,i)}function nSqrTo(t,e){t.squareTo(e)}function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,i){var r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;var n;for(n=i.t-this.t;n>r;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);n>r;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()}function bnpMultiplyUpperTo(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)}function barrettMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function bnModPow(t,e){var i,r,n=t.bitLength(),p=nbv(1);if(0>=n)return p;i=18>n?1:48>n?3:144>n?4:768>n?5:6,r=8>n?new Classic(e):e.isEven()?new Barrett(e):new Montgomery(e);var o=new Array,l=3,s=i-1,u=(1<<i)-1;if(o[1]=r.convert(this),i>1){var h=nbi();for(r.sqrTo(o[1],h);u>=l;)o[l]=nbi(),r.mulTo(h,o[l-2],o[l]),l+=2}var a,C,f=t.t-1,d=!0,L=nbi();for(n=nbits(t[f])-1;f>=0;){for(n>=s?a=t[f]>>n-s&u:(a=(t[f]&(1<<n+1)-1)<<s-n,f>0&&(a|=t[f-1]>>this.DB+n-s)),l=i;0==(1&a);)a>>=1,--l;if((n-=l)<0&&(n+=this.DB,--f),d)o[a].copyTo(p),d=!1;else{for(;l>1;)r.sqrTo(p,L),r.sqrTo(L,p),l-=2;l>0?r.sqrTo(p,L):(C=p,p=L,L=C),r.mulTo(L,o[a],p)}for(;f>=0&&0==(t[f]&1<<n);)r.sqrTo(p,L),C=p,p=L,L=C,--n<0&&(n=this.DB-1,--f)}return r.revert(p)}function bnGCD(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),p=i.getLowestSetBit();if(0>p)return e;for(p>n&&(p=n),p>0&&(e.rShiftTo(p,e),i.rShiftTo(p,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return p>0&&i.lShiftTo(p,i),i}function bnpModInt(t){if(0>=t)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return BigInteger.ZERO;for(var i=t.clone(),r=this.clone(),n=nbv(1),p=nbv(0),o=nbv(0),l=nbv(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(n.isEven()&&p.isEven()||(n.addTo(this,n),p.subTo(t,p)),n.rShiftTo(1,n)):p.isEven()||p.subTo(t,p),p.rShiftTo(1,p);for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&l.isEven()||(o.addTo(this,o),l.subTo(t,l)),o.rShiftTo(1,o)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);i.compareTo(r)>=0?(i.subTo(r,i),e&&n.subTo(o,n),p.subTo(l,p)):(r.subTo(i,r),e&&o.subTo(n,o),l.subTo(p,l))}return 0!=r.compareTo(BigInteger.ONE)?BigInteger.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l}function bnIsProbablePrime(t){var e,i=this.abs();if(1==i.t&&i[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(i[0]==lowprimes[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<lowprimes.length;){for(var r=lowprimes[e],n=e+1;n<lowprimes.length&&lplim>r;)r*=lowprimes[n++];for(r=i.modInt(r);n>e;)if(r%lowprimes[e++]==0)return!1}return i.millerRabin(t)}function bnpMillerRabin(t){var e=this.subtract(BigInteger.ONE),i=e.getLowestSetBit();if(0>=i)return!1;var r=e.shiftRight(i);t=t+1>>1,t>lowprimes.length&&(t=lowprimes.length);for(var n=nbi(),p=0;t>p;++p){n.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var o=n.modPow(r,this);if(0!=o.compareTo(BigInteger.ONE)&&0!=o.compareTo(e)){for(var l=1;l++<i&&0!=o.compareTo(e);)if(o=o.modPowInt(2,this),0==o.compareTo(BigInteger.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0}var use_int32=!1,use_xyz=!1,use_lines=!0,use_deprecated=!1,ClipperLib={},isNode=!1;"undefined"!=typeof module&&module.exports?(module.exports=ClipperLib,isNode=!0):"undefined"!=typeof document?window.ClipperLib=ClipperLib:self.ClipperLib=ClipperLib;var navigator_appName;if(isNode){var nav="chrome";navigator_appName="Netscape"}else{var nav=navigator.userAgent.toString().toLowerCase();navigator_appName=navigator.appName}var browser={};-1!=nav.indexOf("chrome")&&-1==nav.indexOf("chromium")?browser.chrome=1:browser.chrome=0,-1!=nav.indexOf("chromium")?browser.chromium=1:browser.chromium=0,-1!=nav.indexOf("safari")&&-1==nav.indexOf("chrome")&&-1==nav.indexOf("chromium")?browser.safari=1:browser.safari=0,-1!=nav.indexOf("firefox")?browser.firefox=1:browser.firefox=0,-1!=nav.indexOf("firefox/17")?browser.firefox17=1:browser.firefox17=0,-1!=nav.indexOf("firefox/15")?browser.firefox15=1:browser.firefox15=0,-1!=nav.indexOf("firefox/3")?browser.firefox3=1:browser.firefox3=0,-1!=nav.indexOf("opera")?browser.opera=1:browser.opera=0,-1!=nav.indexOf("msie 10")?browser.msie10=1:browser.msie10=0,-1!=nav.indexOf("msie 9")?browser.msie9=1:browser.msie9=0,-1!=nav.indexOf("msie 8")?browser.msie8=1:browser.msie8=0,-1!=nav.indexOf("msie 7")?browser.msie7=1:browser.msie7=0,-1!=nav.indexOf("msie ")?browser.msie=1:browser.msie=0,ClipperLib.biginteger_used=null;var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);j_lm&&"Microsoft Internet Explorer"==navigator_appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator_appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;9>=vv;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare;var Int128=BigInteger;if(Int128.prototype.IsNegative=function(){return-1==this.compareTo(Int128.ZERO)?!0:!1},Int128.op_Equality=function(t,e){return 0==t.compareTo(e)?!0:!1},Int128.op_Inequality=function(t,e){return 0!=t.compareTo(e)?!0:!1},Int128.op_GreaterThan=function(t,e){return t.compareTo(e)>0?!0:!1},Int128.op_LessThan=function(t,e){return t.compareTo(e)<0?!0:!1},Int128.op_Addition=function(t,e){return new Int128(t).add(new Int128(e))},Int128.op_Subtraction=function(t,e){return new Int128(t).subtract(new Int128(e))},Int128.Int128Mul=function(t,e){return new Int128(t).multiply(new Int128(e))},Int128.op_Division=function(t,e){return t.divide(e)},Int128.prototype.ToDouble=function(){return parseFloat(this.toString())},"undefined"==typeof Inherit)var Inherit=function(t,e){var i;if("undefined"==typeof Object.getOwnPropertyNames){for(i in e.prototype)("undefined"==typeof t.prototype[i]||t.prototype[i]==Object.prototype[i])&&(t.prototype[i]=e.prototype[i]);for(i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);t.$baseCtor=e}else{for(var r=Object.getOwnPropertyNames(e.prototype),n=0;n<r.length;n++)"undefined"==typeof Object.getOwnPropertyDescriptor(t.prototype,r[n])&&Object.defineProperty(t.prototype,r[n],Object.getOwnPropertyDescriptor(e.prototype,r[n]));for(i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);t.$baseCtor=e}};ClipperLib.Path=function(){return[]},ClipperLib.Paths=function(){return[]},ClipperLib.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},ClipperLib.DoublePoint0=function(){this.X=0,this.Y=0},ClipperLib.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},ClipperLib.DoublePoint2=function(t,e){this.X=t,this.Y=e},ClipperLib.PolyNode=function(){this.m_Parent=null,this.m_polygon=new ClipperLib.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},ClipperLib.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},ClipperLib.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},ClipperLib.PolyNode.prototype.Contour=function(){return this.m_polygon},ClipperLib.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},ClipperLib.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},ClipperLib.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},ClipperLib.PolyNode.prototype.Childs=function(){return this.m_Childs},ClipperLib.PolyNode.prototype.Parent=function(){return this.m_Parent},ClipperLib.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},ClipperLib.PolyTree=function(){this.m_AllPolys=[],ClipperLib.PolyNode.call(this)},ClipperLib.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;e>t;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},ClipperLib.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},ClipperLib.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},Inherit(ClipperLib.PolyTree,ClipperLib.PolyNode),ClipperLib.Math_Abs_Int64=ClipperLib.Math_Abs_Int32=ClipperLib.Math_Abs_Double=function(t){return Math.abs(t)},ClipperLib.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},browser.msie||browser.opera||browser.safari?ClipperLib.Cast_Int32=function(t){return 0|t}:ClipperLib.Cast_Int32=function(t){return~~t},browser.chrome?ClipperLib.Cast_Int64=function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):~~t}:browser.firefox&&"function"==typeof Number.toInteger?ClipperLib.Cast_Int64=function(t){return Number.toInteger(t)}:browser.msie7||browser.msie8?ClipperLib.Cast_Int64=function(t){return parseInt(t,10)}:browser.msie?ClipperLib.Cast_Int64=function(t){return-2147483648>t||t>2147483647?0>t?Math.ceil(t):Math.floor(t):0|t}:ClipperLib.Cast_Int64=function(t){return 0>t?Math.ceil(t):Math.floor(t)},ClipperLib.Clear=function(t){t.length=0},ClipperLib.PI=3.141592653589793,ClipperLib.PI2=6.283185307179586,ClipperLib.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,use_xyz)if(this.Z=0,3==e)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2==e)this.X=t[0],this.Y=t[1],this.Z=0;else if(1==e)if(t[0]instanceof ClipperLib.DoublePoint){var i=t[0];this.X=ClipperLib.Clipper.Round(i.X),this.Y=ClipperLib.Clipper.Round(i.Y),this.Z=0}else{var r=t[0];"undefined"==typeof r.Z&&(r.Z=0),this.X=r.X,this.Y=r.Y,this.Z=r.Z}else this.X=0,this.Y=0,this.Z=0;else if(2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof ClipperLib.DoublePoint){var i=t[0];this.X=ClipperLib.Clipper.Round(i.X),this.Y=ClipperLib.Clipper.Round(i.Y)}else{var r=t[0];this.X=r.X,this.Y=r.Y}else this.X=0,this.Y=0},ClipperLib.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},ClipperLib.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},use_xyz?(ClipperLib.IntPoint0=function(){this.X=0,this.Y=0,this.Z=0},ClipperLib.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,this.Z=t.Z},ClipperLib.IntPoint1dp=function(t){this.X=ClipperLib.Clipper.Round(t.X),this.Y=ClipperLib.Clipper.Round(t.Y),this.Z=0},ClipperLib.IntPoint2=function(t,e){this.X=t,this.Y=e,this.Z=0},ClipperLib.IntPoint3=function(t,e,i){this.X=t,this.Y=e,this.Z=i}):(ClipperLib.IntPoint0=function(){this.X=0,this.Y=0},ClipperLib.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},ClipperLib.IntPoint1dp=function(t){this.X=ClipperLib.Clipper.Round(t.X),this.Y=ClipperLib.Clipper.Round(t.Y)},ClipperLib.IntPoint2=function(t,e){this.X=t,this.Y=e}),ClipperLib.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},ClipperLib.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},ClipperLib.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},ClipperLib.IntRect4=function(t,e,i,r){this.left=t,this.top=e,this.right=i,this.bottom=r},ClipperLib.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},ClipperLib.PolyType={ptSubject:0,ptClip:1},ClipperLib.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},ClipperLib.JoinType={jtSquare:0,jtRound:1,jtMiter:2},ClipperLib.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},use_deprecated&&(ClipperLib.EndType_={etSquare:0,etRound:1,etButt:2,etClosed:3}),ClipperLib.EdgeSide={esLeft:0,esRight:1},ClipperLib.Direction={dRightToLeft:0,dLeftToRight:1},ClipperLib.TEdge=function(){this.Bot=new ClipperLib.IntPoint,this.Curr=new ClipperLib.IntPoint,this.Top=new ClipperLib.IntPoint,this.Delta=new ClipperLib.IntPoint,this.Dx=0,this.PolyTyp=ClipperLib.PolyType.ptSubject,this.Side=ClipperLib.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},ClipperLib.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new ClipperLib.IntPoint},ClipperLib.MyIntersectNodeSort=function(){},ClipperLib.MyIntersectNodeSort.Compare=function(t,e){return e.Pt.Y-t.Pt.Y},ClipperLib.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},ClipperLib.Scanbeam=function(){this.Y=0,this.Next=null},ClipperLib.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},ClipperLib.OutPt=function(){this.Idx=0,this.Pt=new ClipperLib.IntPoint,this.Next=null,this.Prev=null},ClipperLib.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new ClipperLib.IntPoint},ClipperLib.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},ClipperLib.ClipperBase.horizontal=-9007199254740992,ClipperLib.ClipperBase.Skip=-2,ClipperLib.ClipperBase.Unassigned=-1,ClipperLib.ClipperBase.tolerance=1e-20,use_int32?(ClipperLib.ClipperBase.loRange=46340,ClipperLib.ClipperBase.hiRange=46340):(ClipperLib.ClipperBase.loRange=47453132,ClipperLib.ClipperBase.hiRange=0xfffffffffffff),ClipperLib.ClipperBase.near_zero=function(t){return t>-ClipperLib.ClipperBase.tolerance&&t<ClipperLib.ClipperBase.tolerance},ClipperLib.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},ClipperLib.ClipperBase.prototype.PointIsVertex=function(t,e){var i=e;do{if(ClipperLib.IntPoint.op_Equality(i.Pt,t))return!0;i=i.Next}while(i!=e);return!1},ClipperLib.ClipperBase.prototype.PointOnLineSegment=function(t,e,i,r){return r?t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&Int128.op_Equality(Int128.Int128Mul(t.X-e.X,i.Y-e.Y),Int128.Int128Mul(i.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},ClipperLib.ClipperBase.prototype.PointOnPolygon=function(t,e,i){for(var r=e;;){if(this.PointOnLineSegment(t,r.Pt,r.Next.Pt,i))return!0;if(r=r.Next,
r==e)break}return!1},ClipperLib.ClipperBase.prototype.SlopesEqual=ClipperLib.ClipperBase.SlopesEqual=function(){var t,e,i,r,n,p,o,l=arguments,s=l.length;return 3==s?(t=l[0],e=l[1],o=l[2],o?Int128.op_Equality(Int128.Int128Mul(t.Delta.Y,e.Delta.X),Int128.Int128Mul(t.Delta.X,e.Delta.Y)):ClipperLib.Cast_Int64(t.Delta.Y*e.Delta.X)==ClipperLib.Cast_Int64(t.Delta.X*e.Delta.Y)):4==s?(i=l[0],r=l[1],n=l[2],o=l[3],o?Int128.op_Equality(Int128.Int128Mul(i.Y-r.Y,r.X-n.X),Int128.Int128Mul(i.X-r.X,r.Y-n.Y)):ClipperLib.Cast_Int64((i.Y-r.Y)*(r.X-n.X))-ClipperLib.Cast_Int64((i.X-r.X)*(r.Y-n.Y))===0):(i=l[0],r=l[1],n=l[2],p=l[3],o=l[4],o?Int128.op_Equality(Int128.Int128Mul(i.Y-r.Y,n.X-p.X),Int128.Int128Mul(i.X-r.X,n.Y-p.Y)):ClipperLib.Cast_Int64((i.Y-r.Y)*(n.X-p.X))-ClipperLib.Cast_Int64((i.X-r.X)*(n.Y-p.Y))===0)},ClipperLib.ClipperBase.SlopesEqual3=function(t,e,i){return i?Int128.op_Equality(Int128.Int128Mul(t.Delta.Y,e.Delta.X),Int128.Int128Mul(t.Delta.X,e.Delta.Y)):ClipperLib.Cast_Int64(t.Delta.Y*e.Delta.X)==ClipperLib.Cast_Int64(t.Delta.X*e.Delta.Y)},ClipperLib.ClipperBase.SlopesEqual4=function(t,e,i,r){return r?Int128.op_Equality(Int128.Int128Mul(t.Y-e.Y,e.X-i.X),Int128.Int128Mul(t.X-e.X,e.Y-i.Y)):ClipperLib.Cast_Int64((t.Y-e.Y)*(e.X-i.X))-ClipperLib.Cast_Int64((t.X-e.X)*(e.Y-i.Y))===0},ClipperLib.ClipperBase.SlopesEqual5=function(t,e,i,r,n){return n?Int128.op_Equality(Int128.Int128Mul(t.Y-e.Y,i.X-r.X),Int128.Int128Mul(t.X-e.X,i.Y-r.Y)):ClipperLib.Cast_Int64((t.Y-e.Y)*(i.X-r.X))-ClipperLib.Cast_Int64((t.X-e.X)*(i.Y-r.Y))===0},ClipperLib.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;e>t;++t){for(var i=0,r=this.m_edges[t].length;r>i;++i)this.m_edges[t][i]=null;ClipperLib.Clear(this.m_edges[t])}ClipperLib.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},ClipperLib.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},ClipperLib.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>ClipperLib.ClipperBase.hiRange||t.Y>ClipperLib.ClipperBase.hiRange||-t.X>ClipperLib.ClipperBase.hiRange||-t.Y>ClipperLib.ClipperBase.hiRange)&&ClipperLib.Error("Coordinate outside allowed range in RangeTest()."):(t.X>ClipperLib.ClipperBase.loRange||t.Y>ClipperLib.ClipperBase.loRange||-t.X>ClipperLib.ClipperBase.loRange||-t.Y>ClipperLib.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},ClipperLib.ClipperBase.prototype.InitEdge=function(t,e,i,r){t.Next=e,t.Prev=i,t.Curr.X=r.X,t.Curr.Y=r.Y,t.OutIdx=-1},ClipperLib.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},ClipperLib.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;ClipperLib.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||ClipperLib.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=ClipperLib.ClipperBase.horizontal&&t.Prev.Dx!=ClipperLib.ClipperBase.horizontal)break;for(;t.Prev.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},ClipperLib.ClipperBase.prototype.ProcessBound=function(t,e){var i,r,n=t,p=t;if(t.Dx==ClipperLib.ClipperBase.horizontal&&(r=e?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=r&&this.ReverseHorizontal(t)),p.OutIdx!=ClipperLib.ClipperBase.Skip)if(e){for(;p.Top.Y==p.Next.Bot.Y&&p.Next.OutIdx!=ClipperLib.ClipperBase.Skip;)p=p.Next;if(p.Dx==ClipperLib.ClipperBase.horizontal&&p.Next.OutIdx!=ClipperLib.ClipperBase.Skip){for(i=p;i.Prev.Dx==ClipperLib.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X==p.Next.Top.X?e||(p=i.Prev):i.Prev.Top.X>p.Next.Top.X&&(p=i.Prev)}for(;t!=p;)t.NextInLML=t.Next,t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),p=p.Next}else{for(;p.Top.Y==p.Prev.Bot.Y&&p.Prev.OutIdx!=ClipperLib.ClipperBase.Skip;)p=p.Prev;if(p.Dx==ClipperLib.ClipperBase.horizontal&&p.Prev.OutIdx!=ClipperLib.ClipperBase.Skip){for(i=p;i.Next.Dx==ClipperLib.ClipperBase.horizontal;)i=i.Next;i.Next.Top.X==p.Prev.Top.X?e||(p=i.Next):i.Next.Top.X>p.Prev.Top.X&&(p=i.Next)}for(;t!=p;)t.NextInLML=t.Prev,t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==ClipperLib.ClipperBase.horizontal&&t!=n&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),p=p.Prev}if(p.OutIdx==ClipperLib.ClipperBase.Skip){if(t=p,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=p&&t.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=p&&t.Dx==ClipperLib.ClipperBase.horizontal;)t=t.Next}if(t==p)p=e?t.Next:t.Prev;else{t=e?p.Next:p.Prev;var o=new ClipperLib.LocalMinima;o.Next=null,o.Y=t.Bot.Y,o.LeftBound=null,o.RightBound=t,o.RightBound.WindDelta=0,p=this.ProcessBound(o.RightBound,e),this.InsertLocalMinima(o)}}return p},ClipperLib.ClipperBase.prototype.AddPath=function(t,e,i){use_lines?i||e!=ClipperLib.PolyType.ptClip||ClipperLib.Error("AddPath: Open paths must be subject."):i||ClipperLib.Error("AddPath: Open paths have been disabled.");var r=t.length-1;if(i)for(;r>0&&ClipperLib.IntPoint.op_Equality(t[r],t[0]);)--r;for(;r>0&&ClipperLib.IntPoint.op_Equality(t[r],t[r-1]);)--r;if(i&&2>r||!i&&1>r)return!1;for(var n=new Array,p=0;r>=p;p++)n.push(new ClipperLib.TEdge);var o=!0;n[1].Curr.X=t[1].X,n[1].Curr.Y=t[1].Y;var l={Value:this.m_UseFullRange};this.RangeTest(t[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(t[r],l),this.m_UseFullRange=l.Value,this.InitEdge(n[0],n[1],n[r],t[0]),this.InitEdge(n[r],n[0],n[r-1],t[r]);for(var p=r-1;p>=1;--p)l.Value=this.m_UseFullRange,this.RangeTest(t[p],l),this.m_UseFullRange=l.Value,this.InitEdge(n[p],n[p+1],n[p-1],t[p]);for(var s=n[0],u=s,h=s;;)if(ClipperLib.IntPoint.op_Equality(u.Curr,u.Next.Curr)){if(u==u.Next)break;u==s&&(s=u.Next),u=this.RemoveEdge(u),h=u}else{if(u.Prev==u.Next)break;if(!i||!ClipperLib.ClipperBase.SlopesEqual(u.Prev.Curr,u.Curr,u.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(u.Prev.Curr,u.Curr,u.Next.Curr)){if(u=u.Next,u==h)break}else u==s&&(s=u.Next),u=this.RemoveEdge(u),u=u.Prev,h=u}if(!i&&u==u.Next||i&&u.Prev==u.Next)return!1;i||(this.m_HasOpenPaths=!0,s.Prev.OutIdx=ClipperLib.ClipperBase.Skip);u=s;do this.InitEdge2(u,e),u=u.Next,o&&u.Curr.Y!=s.Curr.Y&&(o=!1);while(u!=s);if(o){if(i)return!1;u.Prev.OutIdx=ClipperLib.ClipperBase.Skip,u.Prev.Bot.X<u.Prev.Top.X&&this.ReverseHorizontal(u.Prev);var a=new ClipperLib.LocalMinima;for(a.Next=null,a.Y=u.Bot.Y,a.LeftBound=null,a.RightBound=u,a.RightBound.Side=ClipperLib.EdgeSide.esRight,a.RightBound.WindDelta=0;u.Next.OutIdx!=ClipperLib.ClipperBase.Skip;)u.NextInLML=u.Next,u.Bot.X!=u.Prev.Top.X&&this.ReverseHorizontal(u),u=u.Next;return this.InsertLocalMinima(a),this.m_edges.push(n),!0}this.m_edges.push(n);for(var C,f=null;u=this.FindNextLocMin(u),u!=f;){null==f&&(f=u);var a=new ClipperLib.LocalMinima;a.Next=null,a.Y=u.Bot.Y,u.Dx<u.Prev.Dx?(a.LeftBound=u.Prev,a.RightBound=u,C=!1):(a.LeftBound=u,a.RightBound=u.Prev,C=!0),a.LeftBound.Side=ClipperLib.EdgeSide.esLeft,a.RightBound.Side=ClipperLib.EdgeSide.esRight,i?a.LeftBound.Next==a.RightBound?a.LeftBound.WindDelta=-1:a.LeftBound.WindDelta=1:a.LeftBound.WindDelta=0,a.RightBound.WindDelta=-a.LeftBound.WindDelta,u=this.ProcessBound(a.LeftBound,C);var d=this.ProcessBound(a.RightBound,!C);a.LeftBound.OutIdx==ClipperLib.ClipperBase.Skip?a.LeftBound=null:a.RightBound.OutIdx==ClipperLib.ClipperBase.Skip&&(a.RightBound=null),this.InsertLocalMinima(a),C||(u=d)}return!0},ClipperLib.ClipperBase.prototype.AddPaths=function(t,e,i){for(var r=!1,n=0,p=t.length;p>n;++n)this.AddPath(t[n],e,i)&&(r=!0);return r},ClipperLib.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,i){return ClipperLib.IntPoint.op_Equality(t,i)||ClipperLib.IntPoint.op_Equality(t,e)||ClipperLib.IntPoint.op_Equality(i,e)?!1:t.X!=i.X?e.X>t.X==e.X<i.X:e.Y>t.Y==e.Y<i.Y},ClipperLib.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},ClipperLib.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=ClipperLib.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},ClipperLib.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},ClipperLib.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},ClipperLib.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,use_xyz&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},ClipperLib.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=ClipperLib.EdgeSide.esLeft,e.OutIdx=ClipperLib.ClipperBase.Unassigned),e=t.RightBound,null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=ClipperLib.EdgeSide.esRight,e.OutIdx=ClipperLib.ClipperBase.Unassigned),t=t.Next}},ClipperLib.Clipper=function(t){"undefined"==typeof t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=ClipperLib.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=ClipperLib.PolyFillType.pftEvenOdd,this.m_SubjFillType=ClipperLib.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,ClipperLib.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=ClipperLib.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!==(1&t),this.StrictlySimple=0!==(2&t),this.PreserveCollinear=0!==(4&t),use_xyz&&(this.ZFillFunction=null)},ClipperLib.Clipper.ioReverseSolution=1,ClipperLib.Clipper.ioStrictlySimple=2,ClipperLib.Clipper.ioPreserveCollinear=4,ClipperLib.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),ClipperLib.ClipperBase.prototype.Clear.call(this))},ClipperLib.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},ClipperLib.Clipper.prototype.Reset=function(){ClipperLib.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},ClipperLib.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new ClipperLib.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new ClipperLib.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var i=this.m_Scanbeam;null!==i.Next&&t<=i.Next.Y;)i=i.Next;if(t==i.Y)return;var e=new ClipperLib.Scanbeam;e.Y=t,e.Next=i.Next,i.Next=e}},ClipperLib.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,i=t[1]instanceof ClipperLib.PolyTree;if(4==e&&!i){var r=t[0],n=t[1],p=t[2],o=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&ClipperLib.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,ClipperLib.Clear(n),this.m_SubjFillType=p,this.m_ClipFillType=o,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{var l=this.ExecuteInternal();l&&this.BuildResult(n)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}if(4==e&&i){var r=t[0],s=t[1],p=t[2],o=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=p,this.m_ClipFillType=o,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var l=this.ExecuteInternal();l&&this.BuildResult2(s)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}if(2==e&&!i){var r=t[0],n=t[1];return this.Execute(r,n,ClipperLib.PolyFillType.pftEvenOdd,ClipperLib.PolyFillType.pftEvenOdd)}if(2==e&&i){var r=t[0],s=t[1];return this.Execute(r,s,ClipperLib.PolyFillType.pftEvenOdd,ClipperLib.PolyFillType.pftEvenOdd)}},ClipperLib.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},ClipperLib.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),ClipperLib.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(t,e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var i=0,r=this.m_PolyOuts.length;r>i;i++){var n=this.m_PolyOuts[i];null===n.Pts||n.IsOpen||(n.IsHole^this.ReverseSolution)==this.Area(n)>0&&this.ReversePolyPtLinks(n.Pts)}this.JoinCommonEdges();for(var i=0,r=this.m_PolyOuts.length;r>i;i++){var n=this.m_PolyOuts[i];null===n.Pts||n.IsOpen||this.FixupOutPolygon(n)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{ClipperLib.Clear(this.m_Joins),ClipperLib.Clear(this.m_GhostJoins)}},ClipperLib.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y,e=this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.Next,e=null,t},ClipperLib.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;e>t;++t)this.DisposeOutRec(t);ClipperLib.Clear(this.m_PolyOuts)},ClipperLib.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!==e.Pts&&this.DisposeOutPts(e.Pts),e=null,this.m_PolyOuts[t]=null},ClipperLib.Clipper.prototype.DisposeOutPts=function(t){if(null!==t){var e=null;for(t.Prev.Next=null;null!==t;)e=t,t=t.Next,e=null}},ClipperLib.Clipper.prototype.AddJoin=function(t,e,i){var r=new ClipperLib.Join;r.OutPt1=t,r.OutPt2=e,r.OffPt.X=i.X,r.OffPt.Y=i.Y,this.m_Joins.push(r)},ClipperLib.Clipper.prototype.AddGhostJoin=function(t,e){var i=new ClipperLib.Join;i.OutPt1=t,i.OffPt.X=e.X,i.OffPt.Y=e.Y,this.m_GhostJoins.push(i)},use_xyz&&(ClipperLib.Clipper.prototype.SetZ=function(t,e){t.Z=0,null!==this.ZFillFunction&&(e.OutIdx<0?this.ZFillFunction(e.Bot,e.Top,t):this.ZFillFunction(e.Top,e.Bot,t))}),ClipperLib.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,i=this.m_CurrentLM.RightBound;this.PopLocalMinima();var r=null;if(null===e?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(r=this.AddOutPt(i,i.Bot))):null==i?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(r=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(i,e),this.SetWindingCount(e),i.WindCnt=e.WindCnt,i.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(r=this.AddLocalMinPoly(e,i,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!=i&&(ClipperLib.ClipperBase.IsHorizontal(i)?this.AddEdgeToSEL(i):this.InsertScanbeam(i.Top.Y)),null!=e&&null!=i){if(null!==r&&ClipperLib.ClipperBase.IsHorizontal(i)&&this.m_GhostJoins.length>0&&0!==i.WindDelta)for(var n=0,p=this.m_GhostJoins.length;p>n;n++){var o=this.m_GhostJoins[n];this.HorzSegmentsOverlap(o.OutPt1.Pt,o.OffPt,i.Bot,i.Top)&&this.AddJoin(o.OutPt1,r,o.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&ClipperLib.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var l=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(r,l,e.Top)}if(e.NextInAEL!=i){if(i.OutIdx>=0&&i.PrevInAEL.OutIdx>=0&&ClipperLib.ClipperBase.SlopesEqual(i.PrevInAEL,i,this.m_UseFullRange)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta){var l=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(r,l,i.Top)}var s=e.NextInAEL;if(null!==s)for(;s!=i;)this.IntersectEdges(i,s,e.Curr,!1),s=s.NextInAEL}}}},ClipperLib.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},ClipperLib.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<ClipperLib.Clipper.TopX(t,e.Top.Y):t.Top.X>ClipperLib.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},ClipperLib.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==ClipperLib.PolyType.ptSubject?this.m_SubjFillType==ClipperLib.PolyFillType.pftEvenOdd:this.m_ClipFillType==ClipperLib.PolyFillType.pftEvenOdd},ClipperLib.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==ClipperLib.PolyType.ptSubject?this.m_ClipFillType==ClipperLib.PolyFillType.pftEvenOdd:this.m_SubjFillType==ClipperLib.PolyFillType.pftEvenOdd},ClipperLib.Clipper.prototype.IsContributing=function(t){var e,i;switch(t.PolyTyp==ClipperLib.PolyType.ptSubject?(e=this.m_SubjFillType,i=this.m_ClipFillType):(e=this.m_ClipFillType,i=this.m_SubjFillType),e){case ClipperLib.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case ClipperLib.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case ClipperLib.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case ClipperLib.ClipType.ctIntersection:switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case ClipperLib.ClipType.ctUnion:switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0===t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case ClipperLib.ClipType.ctDifference:if(t.PolyTyp==ClipperLib.PolyType.ptSubject)switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0===t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case ClipperLib.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(i){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return 0===t.WindCnt2;case ClipperLib.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},ClipperLib.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=ClipperLib.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var i=!0,r=e.PrevInAEL;null!==r;)r.PolyTyp==e.PolyTyp&&0!==r.WindDelta&&(i=!i),r=r.PrevInAEL;t.WindCnt=i?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},ClipperLib.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},ClipperLib.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},ClipperLib.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e){var i=e.NextInAEL;null!==i&&(i.PrevInAEL=t);var r=t.PrevInAEL;null!==r&&(r.NextInAEL=e),e.PrevInAEL=r,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i}else if(e.NextInAEL==t){var i=t.NextInAEL;null!==i&&(i.PrevInAEL=e);var r=e.PrevInAEL;null!==r&&(r.NextInAEL=t),t.PrevInAEL=r,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i}else{var i=t.NextInAEL,r=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=i,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=r,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},ClipperLib.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e){var i=e.NextInSEL;null!==i&&(i.PrevInSEL=t);var r=t.PrevInSEL;null!==r&&(r.NextInSEL=e),e.PrevInSEL=r,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i}else if(e.NextInSEL==t){var i=t.NextInSEL;null!==i&&(i.PrevInSEL=e);var r=e.PrevInSEL;null!==r&&(r.NextInSEL=t),t.PrevInSEL=r,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else{var i=t.NextInSEL,r=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=r,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},ClipperLib.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0==e.WindDelta&&this.AddOutPt(e,i),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},ClipperLib.Clipper.prototype.AddLocalMinPoly=function(t,e,i){var r,n,p;if(ClipperLib.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(r=this.AddOutPt(t,i),e.OutIdx=t.OutIdx,t.Side=ClipperLib.EdgeSide.esLeft,e.Side=ClipperLib.EdgeSide.esRight,n=t,p=n.PrevInAEL==e?e.PrevInAEL:n.PrevInAEL):(r=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,t.Side=ClipperLib.EdgeSide.esRight,e.Side=ClipperLib.EdgeSide.esLeft,n=e,p=n.PrevInAEL==t?t.PrevInAEL:n.PrevInAEL),null!==p&&p.OutIdx>=0&&ClipperLib.Clipper.TopX(p,i.Y)==ClipperLib.Clipper.TopX(n,i.Y)&&ClipperLib.ClipperBase.SlopesEqual(n,p,this.m_UseFullRange)&&0!==n.WindDelta&&0!==p.WindDelta){var o=this.AddOutPt(p,i);this.AddJoin(r,o,n.Top)}return r},ClipperLib.Clipper.prototype.CreateOutRec=function(){var t=new ClipperLib.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},ClipperLib.Clipper.prototype.AddOutPt=function(t,e){var i=t.Side==ClipperLib.EdgeSide.esLeft;if(t.OutIdx<0){var r=this.CreateOutRec();r.IsOpen=0===t.WindDelta;var n=new ClipperLib.OutPt;return r.Pts=n,n.Idx=r.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,n.Next=n,n.Prev=n,r.IsOpen||this.SetHoleState(t,r),use_xyz&&(ClipperLib.IntPoint.op_Equality(e,t.Bot)?(n.Pt.X=t.Bot.X,n.Pt.Y=t.Bot.Y,n.Pt.Z=t.Bot.Z):ClipperLib.IntPoint.op_Equality(e,t.Top)?(n.Pt.X=t.Top.X,n.Pt.Y=t.Top.Y,n.Pt.Z=t.Top.Z):this.SetZ(n.Pt,t)),t.OutIdx=r.Idx,n}var r=this.m_PolyOuts[t.OutIdx],p=r.Pts;if(i&&ClipperLib.IntPoint.op_Equality(e,p.Pt))return p;if(!i&&ClipperLib.IntPoint.op_Equality(e,p.Prev.Pt))return p.Prev;var n=new ClipperLib.OutPt;return n.Idx=r.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,n.Next=p,n.Prev=p.Prev,n.Prev.Next=n,p.Prev=n,i&&(r.Pts=n),use_xyz&&(ClipperLib.IntPoint.op_Equality(e,t.Bot)?(n.Pt.X=t.Bot.X,n.Pt.Y=t.Bot.Y,n.Pt.Z=t.Bot.Z):ClipperLib.IntPoint.op_Equality(e,t.Top)?(n.Pt.X=t.Top.X,n.Pt.Y=t.Top.Y,n.Pt.Z=t.Top.Z):this.SetZ(n.Pt,t)),n},ClipperLib.Clipper.prototype.SwapPoints=function(t,e){var i=new ClipperLib.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=i.X,e.Value.Y=i.Y},ClipperLib.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,r){return t.X>i.X==t.X<r.X?!0:e.X>i.X==e.X<r.X?!0:i.X>t.X==i.X<e.X?!0:r.X>t.X==r.X<e.X?!0:t.X==i.X&&e.X==r.X?!0:t.X==r.X&&e.X==i.X?!0:!1},ClipperLib.Clipper.prototype.InsertPolyPtBetween=function(t,e,i){var r=new ClipperLib.OutPt;return r.Pt.X=i.X,r.Pt.Y=i.Y,e==t.Next?(t.Next=r,e.Prev=r,r.Next=e,r.Prev=t):(e.Next=r,t.Prev=r,r.Next=t,r.Prev=e),r},ClipperLib.Clipper.prototype.SetHoleState=function(t,e){for(var i=!1,r=t.PrevInAEL;null!==r;)r.OutIdx>=0&&0!=r.WindDelta&&(i=!i,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[r.OutIdx])),r=r.PrevInAEL;i&&(e.IsHole=!0)},ClipperLib.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?ClipperLib.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},ClipperLib.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var i=t.Prev;ClipperLib.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Prev;var r=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;ClipperLib.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Next;var n=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=e.Prev;ClipperLib.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Prev;var p=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;ClipperLib.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Next;var o=Math.abs(this.GetDx(e.Pt,i.Pt));return r>=p&&r>=o||n>=p&&n>=o},ClipperLib.Clipper.prototype.GetBottomPt=function(t){for(var e=null,i=t.Next;i!=t;)i.Pt.Y>t.Pt.Y?(t=i,e=null):i.Pt.Y==t.Pt.Y&&i.Pt.X<=t.Pt.X&&(i.Pt.X<t.Pt.X?(e=null,t=i):i.Next!=t&&i.Prev!=t&&(e=i)),i=i.Next;if(null!==e)for(;e!=i;)for(this.FirstIsBottomPt(i,e)||(t=e),e=e.Next;ClipperLib.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},ClipperLib.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,r=e.BottomPt;return i.Pt.Y>r.Pt.Y?t:i.Pt.Y<r.Pt.Y?e:i.Pt.X<r.Pt.X?t:i.Pt.X>r.Pt.X?e:i.Next==i?e:r.Next==r?t:this.FirstIsBottomPt(i,r)?t:e},ClipperLib.Clipper.prototype.Param1RightOfParam2=function(t,e){do if(t=t.FirstLeft,t==e)return!0;while(null!==t);return!1},ClipperLib.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},ClipperLib.Clipper.prototype.AppendPolygon=function(t,e){var i,r=this.m_PolyOuts[t.OutIdx],n=this.m_PolyOuts[e.OutIdx];i=this.Param1RightOfParam2(r,n)?n:this.Param1RightOfParam2(n,r)?r:this.GetLowermostRec(r,n);var p,o=r.Pts,l=o.Prev,s=n.Pts,u=s.Prev;t.Side==ClipperLib.EdgeSide.esLeft?(e.Side==ClipperLib.EdgeSide.esLeft?(this.ReversePolyPtLinks(s),s.Next=o,o.Prev=s,l.Next=u,u.Prev=l,r.Pts=u):(u.Next=o,o.Prev=u,s.Prev=l,l.Next=s,r.Pts=s),p=ClipperLib.EdgeSide.esLeft):(e.Side==ClipperLib.EdgeSide.esRight?(this.ReversePolyPtLinks(s),l.Next=u,u.Prev=l,s.Next=o,o.Prev=s):(l.Next=s,s.Prev=l,o.Prev=u,u.Next=o),p=ClipperLib.EdgeSide.esRight),r.BottomPt=null,i==n&&(n.FirstLeft!=r&&(r.FirstLeft=n.FirstLeft),r.IsHole=n.IsHole),n.Pts=null,n.BottomPt=null,n.FirstLeft=r;var h=t.OutIdx,a=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var C=this.m_ActiveEdges;null!==C;){if(C.OutIdx==a){C.OutIdx=h,C.Side=p;break}C=C.NextInAEL}n.Idx=r.Idx},ClipperLib.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,i;e=t;do i=e.Next,e.Next=e.Prev,e.Prev=i,e=i;while(e!=t)}},ClipperLib.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},ClipperLib.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},ClipperLib.Clipper.prototype.IntersectEdges=function(t,e,i,r){var n=!r&&null===t.NextInLML&&t.Top.X==i.X&&t.Top.Y==i.Y,p=!r&&null===e.NextInLML&&e.Top.X==i.X&&e.Top.Y==i.Y,o=t.OutIdx>=0,l=e.OutIdx>=0;if(use_lines&&(0===t.WindDelta||0===e.WindDelta))return 0===t.WindDelta&&0===e.WindDelta?(n||p)&&o&&l&&this.AddLocalMaxPoly(t,e,i):t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==ClipperLib.ClipType.ctUnion?0===t.WindDelta?l&&(this.AddOutPt(t,i),o&&(t.OutIdx=-1)):o&&(this.AddOutPt(e,i),l&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==ClipperLib.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==ClipperLib.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,i),l&&(e.OutIdx=-1)):(this.AddOutPt(t,i),o&&(t.OutIdx=-1))),n&&(t.OutIdx<0?this.DeleteFromAEL(t):ClipperLib.Error("Error intersecting polylines")),void(p&&(e.OutIdx<0?this.DeleteFromAEL(e):ClipperLib.Error("Error intersecting polylines")));if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var s=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=s}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;var u,h,a,C;t.PolyTyp==ClipperLib.PolyType.ptSubject?(u=this.m_SubjFillType,a=this.m_ClipFillType):(u=this.m_ClipFillType,a=this.m_SubjFillType),e.PolyTyp==ClipperLib.PolyType.ptSubject?(h=this.m_SubjFillType,C=this.m_ClipFillType):(h=this.m_ClipFillType,C=this.m_SubjFillType);var f,d;switch(u){case ClipperLib.PolyFillType.pftPositive:f=t.WindCnt;break;case ClipperLib.PolyFillType.pftNegative:f=-t.WindCnt;break;default:f=Math.abs(t.WindCnt)}switch(h){case ClipperLib.PolyFillType.pftPositive:d=e.WindCnt;break;case ClipperLib.PolyFillType.pftNegative:d=-e.WindCnt;break;default:d=Math.abs(e.WindCnt)}if(o&&l)n||p||0!==f&&1!=f||0!==d&&1!=d||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=ClipperLib.ClipType.ctXor?this.AddLocalMaxPoly(t,e,i):(this.AddOutPt(t,i),this.AddOutPt(e,i),ClipperLib.Clipper.SwapSides(t,e),ClipperLib.Clipper.SwapPolyIndexes(t,e));else if(o)(0===d||1==d)&&(this.AddOutPt(t,i),ClipperLib.Clipper.SwapSides(t,e),ClipperLib.Clipper.SwapPolyIndexes(t,e));else if(l)(0===f||1==f)&&(this.AddOutPt(e,i),ClipperLib.Clipper.SwapSides(t,e),ClipperLib.Clipper.SwapPolyIndexes(t,e));else if(!(0!==f&&1!=f||0!==d&&1!=d||n||p)){var L,P;switch(a){case ClipperLib.PolyFillType.pftPositive:L=t.WindCnt2;break;case ClipperLib.PolyFillType.pftNegative:L=-t.WindCnt2;break;default:L=Math.abs(t.WindCnt2)}switch(C){case ClipperLib.PolyFillType.pftPositive:P=e.WindCnt2;break;case ClipperLib.PolyFillType.pftNegative:P=-e.WindCnt2;break;default:P=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,i);else if(1==f&&1==d)switch(this.m_ClipType){case ClipperLib.ClipType.ctIntersection:L>0&&P>0&&this.AddLocalMinPoly(t,e,i);break;case ClipperLib.ClipType.ctUnion:0>=L&&0>=P&&this.AddLocalMinPoly(t,e,i);break;case ClipperLib.ClipType.ctDifference:(t.PolyTyp==ClipperLib.PolyType.ptClip&&L>0&&P>0||t.PolyTyp==ClipperLib.PolyType.ptSubject&&0>=L&&0>=P)&&this.AddLocalMinPoly(t,e,i);break;case ClipperLib.ClipType.ctXor:this.AddLocalMinPoly(t,e,i)}else ClipperLib.Clipper.SwapSides(t,e)}n!=p&&(n&&t.OutIdx>=0||p&&e.OutIdx>=0)&&(ClipperLib.Clipper.SwapSides(t,e),ClipperLib.Clipper.SwapPolyIndexes(t,e)),n&&this.DeleteFromAEL(t),
p&&this.DeleteFromAEL(e)},ClipperLib.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;(null!==e||null!==i||t==this.m_ActiveEdges)&&(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},ClipperLib.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;(null!==e||null!==i||t==this.m_SortedEdges)&&(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},ClipperLib.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&ClipperLib.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,i=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==i&&(i.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,t=t.NextInLML,t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=i,ClipperLib.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},ClipperLib.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},ClipperLib.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=ClipperLib.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=ClipperLib.Direction.dRightToLeft)},ClipperLib.Clipper.prototype.PrepareHorzJoins=function(t,e){var i=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=ClipperLib.EdgeSide.esLeft&&(i=i.Prev),e&&(ClipperLib.IntPoint.op_Equality(i.Pt,t.Top)?this.AddGhostJoin(i,t.Bot):this.AddGhostJoin(i,t.Top))},ClipperLib.Clipper.prototype.ProcessHorizontal=function(t,e){var i={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,i);for(var r=i.Dir,n=i.Left,p=i.Right,o=t,l=null;null!==o.NextInLML&&ClipperLib.ClipperBase.IsHorizontal(o.NextInLML);)o=o.NextInLML;for(null===o.NextInLML&&(l=this.GetMaximaPair(o));;){for(var s=t==o,u=this.GetNextInAEL(t,r);null!==u&&!(u.Curr.X==t.Top.X&&null!==t.NextInLML&&u.Dx<t.NextInLML.Dx);){var h=this.GetNextInAEL(u,r);if(r==ClipperLib.Direction.dLeftToRight&&u.Curr.X<=p||r==ClipperLib.Direction.dRightToLeft&&u.Curr.X>=n){if(t.OutIdx>=0&&0!=t.WindDelta&&this.PrepareHorzJoins(t,e),u==l&&s)return r==ClipperLib.Direction.dLeftToRight?this.IntersectEdges(t,u,u.Top,!1):this.IntersectEdges(u,t,u.Top,!1),void(l.OutIdx>=0&&ClipperLib.Error("ProcessHorizontal error"));if(r==ClipperLib.Direction.dLeftToRight){var a=new ClipperLib.IntPoint(u.Curr.X,t.Curr.Y);this.IntersectEdges(t,u,a,!0)}else{var a=new ClipperLib.IntPoint(u.Curr.X,t.Curr.Y);this.IntersectEdges(u,t,a,!0)}this.SwapPositionsInAEL(t,u)}else if(r==ClipperLib.Direction.dLeftToRight&&u.Curr.X>=p||r==ClipperLib.Direction.dRightToLeft&&u.Curr.X<=n)break;u=h}if(t.OutIdx>=0&&0!==t.WindDelta&&this.PrepareHorzJoins(t,e),null===t.NextInLML||!ClipperLib.ClipperBase.IsHorizontal(t.NextInLML))break;t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot);var i={Dir:r,Left:n,Right:p};this.GetHorzDirection(t,i),r=i.Dir,n=i.Left,p=i.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var C=this.AddOutPt(t,t.Top);if(t=this.UpdateEdgeIntoAEL(t),0===t.WindDelta)return;var f=t.PrevInAEL,h=t.NextInAEL;if(null!==f&&f.Curr.X==t.Bot.X&&f.Curr.Y==t.Bot.Y&&0!==f.WindDelta&&f.OutIdx>=0&&f.Curr.Y>f.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(t,f,this.m_UseFullRange)){var d=this.AddOutPt(f,t.Bot);this.AddJoin(C,d,t.Top)}else if(null!==h&&h.Curr.X==t.Bot.X&&h.Curr.Y==t.Bot.Y&&0!==h.WindDelta&&h.OutIdx>=0&&h.Curr.Y>h.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(t,h,this.m_UseFullRange)){var d=this.AddOutPt(h,t.Bot);this.AddJoin(C,d,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else null!==l?l.OutIdx>=0?(r==ClipperLib.Direction.dLeftToRight?this.IntersectEdges(t,l,t.Top,!1):this.IntersectEdges(l,t,t.Top,!1),l.OutIdx>=0&&ClipperLib.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(l)):(t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},ClipperLib.Clipper.prototype.GetNextInAEL=function(t,e){return e==ClipperLib.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},ClipperLib.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},ClipperLib.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},ClipperLib.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},ClipperLib.Clipper.prototype.GetMaximaPair=function(t){var e=null;return ClipperLib.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:ClipperLib.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||ClipperLib.ClipperBase.IsHorizontal(e))?e:null},ClipperLib.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(i){this.m_SortedEdges=null,this.m_IntersectList.length=0,ClipperLib.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},ClipperLib.Clipper.prototype.BuildIntersectList=function(t,e){if(null!==this.m_ActiveEdges){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;null!==i;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i.Curr.X=ClipperLib.Clipper.TopX(i,e),i=i.NextInAEL;for(var r=!0;r&&null!==this.m_SortedEdges;){for(r=!1,i=this.m_SortedEdges;null!==i.NextInSEL;){var n=i.NextInSEL,p=new ClipperLib.IntPoint;if(i.Curr.X>n.Curr.X){!this.IntersectPoint(i,n,p)&&i.Curr.X>n.Curr.X+1&&ClipperLib.Error("Intersection error"),p.Y>t&&(p.Y=t,Math.abs(i.Dx)>Math.abs(n.Dx)?p.X=ClipperLib.Clipper.TopX(n,t):p.X=ClipperLib.Clipper.TopX(i,t));var o=new ClipperLib.IntersectNode;o.Edge1=i,o.Edge2=n,o.Pt.X=p.X,o.Pt.Y=p.Y,this.m_IntersectList.push(o),this.SwapPositionsInSEL(i,n),r=!0}else i=n}if(null===i.PrevInSEL)break;i.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},ClipperLib.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},ClipperLib.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},ClipperLib.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;t>e;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;t>i&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i==t)return!1;var r=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=r}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},ClipperLib.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;e>t;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt,!0),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0};var R1=function(t){return 0>t?Math.ceil(t-.5):Math.round(t)},R2=function(t){return 0>t?Math.ceil(t-.5):Math.floor(t+.5)},R3=function(t){return 0>t?-Math.round(Math.abs(t)):Math.round(t)},R4=function(t){return 0>t?(t-=.5,-2147483648>t?Math.ceil(t):0|t):(t+=.5,t>2147483647?Math.floor(t):0|t)};browser.msie?ClipperLib.Clipper.Round=R1:browser.chromium?ClipperLib.Clipper.Round=R3:browser.safari?ClipperLib.Clipper.Round=R4:ClipperLib.Clipper.Round=R2,ClipperLib.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+ClipperLib.Clipper.Round(t.Dx*(e-t.Bot.Y))},ClipperLib.Clipper.prototype.IntersectPoint=function(t,e,i){i.X=0,i.Y=0;var r,n;if(ClipperLib.ClipperBase.SlopesEqual(t,e,this.m_UseFullRange)||t.Dx==e.Dx)return e.Bot.Y>t.Bot.Y?(i.X=e.Bot.X,i.Y=e.Bot.Y):(i.X=t.Bot.X,i.Y=t.Bot.Y),!1;if(0===t.Delta.X)i.X=t.Bot.X,ClipperLib.ClipperBase.IsHorizontal(e)?i.Y=e.Bot.Y:(n=e.Bot.Y-e.Bot.X/e.Dx,i.Y=ClipperLib.Clipper.Round(i.X/e.Dx+n));else if(0===e.Delta.X)i.X=e.Bot.X,ClipperLib.ClipperBase.IsHorizontal(t)?i.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,i.Y=ClipperLib.Clipper.Round(i.X/t.Dx+r));else{r=t.Bot.X-t.Bot.Y*t.Dx,n=e.Bot.X-e.Bot.Y*e.Dx;var p=(n-r)/(t.Dx-e.Dx);i.Y=ClipperLib.Clipper.Round(p),Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=ClipperLib.Clipper.Round(t.Dx*p+r):i.X=ClipperLib.Clipper.Round(e.Dx*p+n)}if(i.Y<t.Top.Y||i.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return i.Y=t.Top.Y,i.X=ClipperLib.Clipper.TopX(e,t.Top.Y),i.X<t.Top.X;i.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=ClipperLib.Clipper.TopX(t,i.Y):i.X=ClipperLib.Clipper.TopX(e,i.Y)}return!0},ClipperLib.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var i=this.IsMaxima(e,t);if(i){var r=this.GetMaximaPair(e);i=null===r||!ClipperLib.ClipperBase.IsHorizontal(r)}if(i){var n=e.PrevInAEL;this.DoMaxima(e),e=null===n?this.m_ActiveEdges:n.NextInAEL}else{if(this.IsIntermediate(e,t)&&ClipperLib.ClipperBase.IsHorizontal(e.NextInLML)?(e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=ClipperLib.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple){var n=e.PrevInAEL;if(e.OutIdx>=0&&0!==e.WindDelta&&null!==n&&n.OutIdx>=0&&n.Curr.X==e.Curr.X&&0!==n.WindDelta){var p=this.AddOutPt(n,e.Curr),o=this.AddOutPt(e,e.Curr);this.AddJoin(p,o,e.Curr)}}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){var p=null;e.OutIdx>=0&&(p=this.AddOutPt(e,e.Top)),e=this.UpdateEdgeIntoAEL(e);var n=e.PrevInAEL,l=e.NextInAEL;if(null!==n&&n.Curr.X==e.Bot.X&&n.Curr.Y==e.Bot.Y&&null!==p&&n.OutIdx>=0&&n.Curr.Y>n.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(e,n,this.m_UseFullRange)&&0!==e.WindDelta&&0!==n.WindDelta){var o=this.AddOutPt(n,e.Bot);this.AddJoin(p,o,e.Top)}else if(null!==l&&l.Curr.X==e.Bot.X&&l.Curr.Y==e.Bot.Y&&null!==p&&l.OutIdx>=0&&l.Curr.Y>l.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(e,l,this.m_UseFullRange)&&0!==e.WindDelta&&0!==l.WindDelta){var o=this.AddOutPt(l,e.Bot);this.AddJoin(p,o,e.Top)}}e=e.NextInAEL}},ClipperLib.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var i=t.NextInAEL,r=!0;null!==i&&i!=e;)this.IntersectEdges(t,i,t.Top,!0),this.SwapPositionsInAEL(t,i),i=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?this.IntersectEdges(t,e,t.Top,!1):r&&0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):ClipperLib.Error("DoMaxima error")},ClipperLib.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;i>e;e++)t[e].reverse()},ClipperLib.Clipper.Orientation=function(t){return ClipperLib.Clipper.Area(t)>=0},ClipperLib.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do e++,i=i.Next;while(i!=t);return e},ClipperLib.Clipper.prototype.BuildResult=function(t){ClipperLib.Clear(t);for(var e=0,i=this.m_PolyOuts.length;i>e;e++){var r=this.m_PolyOuts[e];if(null!==r.Pts){var n=r.Pts.Prev,p=this.PointCount(n);if(!(2>p)){for(var o=new Array(p),l=0;p>l;l++)o[l]=n.Pt,n=n.Prev;t.push(o)}}}},ClipperLib.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,i=this.m_PolyOuts.length;i>e;e++){var r=this.m_PolyOuts[e],n=this.PointCount(r.Pts);if(!(r.IsOpen&&2>n||!r.IsOpen&&3>n)){this.FixHoleLinkage(r);var p=new ClipperLib.PolyNode;t.m_AllPolys.push(p),r.PolyNode=p,p.m_polygon.length=n;for(var o=r.Pts.Prev,l=0;n>l;l++)p.m_polygon[l]=o.Pt,o=o.Prev}}for(var e=0,i=this.m_PolyOuts.length;i>e;e++){var r=this.m_PolyOuts[e];null!==r.PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,t.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!=r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):t.AddChild(r.PolyNode))}},ClipperLib.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var i=t.Pts;;){if(i.Prev==i||i.Prev==i.Next)return this.DisposeOutPts(i),void(t.Pts=null);if(ClipperLib.IntPoint.op_Equality(i.Pt,i.Next.Pt)||ClipperLib.IntPoint.op_Equality(i.Pt,i.Prev.Pt)||ClipperLib.ClipperBase.SlopesEqual(i.Prev.Pt,i.Pt,i.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt))){e=null;var r=i;i.Prev.Next=i.Next,i.Next.Prev=i.Prev,i=i.Prev,r=null}else{if(i==e)break;null===e&&(e=i),i=i.Next}}t.Pts=i},ClipperLib.Clipper.prototype.DupOutPt=function(t,e){var i=new ClipperLib.OutPt;return i.Pt.X=t.Pt.X,i.Pt.Y=t.Pt.Y,i.Idx=t.Idx,e?(i.Next=t.Next,i.Prev=t,t.Next.Prev=i,t.Next=i):(i.Prev=t.Prev,i.Next=t,t.Prev.Next=i,t.Prev=i),i},ClipperLib.Clipper.prototype.GetOverlap=function(t,e,i,r,n){return e>t?r>i?(n.Left=Math.max(t,i),n.Right=Math.min(e,r)):(n.Left=Math.max(t,r),n.Right=Math.min(e,i)):r>i?(n.Left=Math.max(e,i),n.Right=Math.min(t,r)):(n.Left=Math.max(e,r),n.Right=Math.min(t,i)),n.Left<n.Right},ClipperLib.Clipper.prototype.JoinHorz=function(t,e,i,r,n,p){var o=t.Pt.X>e.Pt.X?ClipperLib.Direction.dRightToLeft:ClipperLib.Direction.dLeftToRight,l=i.Pt.X>r.Pt.X?ClipperLib.Direction.dRightToLeft:ClipperLib.Direction.dLeftToRight;if(o==l)return!1;if(o==ClipperLib.Direction.dLeftToRight){for(;t.Next.Pt.X<=n.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==n.Y;)t=t.Next;p&&t.Pt.X!=n.X&&(t=t.Next),e=this.DupOutPt(t,!p),ClipperLib.IntPoint.op_Inequality(e.Pt,n)&&(t=e,t.Pt.X=n.X,t.Pt.Y=n.Y,e=this.DupOutPt(t,!p))}else{for(;t.Next.Pt.X>=n.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==n.Y;)t=t.Next;p||t.Pt.X==n.X||(t=t.Next),e=this.DupOutPt(t,p),ClipperLib.IntPoint.op_Inequality(e.Pt,n)&&(t=e,t.Pt.X=n.X,t.Pt.Y=n.Y,e=this.DupOutPt(t,p))}if(l==ClipperLib.Direction.dLeftToRight){for(;i.Next.Pt.X<=n.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y==n.Y;)i=i.Next;p&&i.Pt.X!=n.X&&(i=i.Next),r=this.DupOutPt(i,!p),ClipperLib.IntPoint.op_Inequality(r.Pt,n)&&(i=r,i.Pt.X=n.X,i.Pt.Y=n.Y,r=this.DupOutPt(i,!p))}else{for(;i.Next.Pt.X>=n.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y==n.Y;)i=i.Next;p||i.Pt.X==n.X||(i=i.Next),r=this.DupOutPt(i,p),ClipperLib.IntPoint.op_Inequality(r.Pt,n)&&(i=r,i.Pt.X=n.X,i.Pt.Y=n.Y,r=this.DupOutPt(i,p))}return o==ClipperLib.Direction.dLeftToRight==p?(t.Prev=i,i.Next=t,e.Next=r,r.Prev=e):(t.Next=i,i.Prev=t,e.Prev=r,r.Next=e),!0},ClipperLib.Clipper.prototype.JoinPoints=function(t,e,i){var r=t.OutPt1,n=new ClipperLib.OutPt,p=t.OutPt2,o=new ClipperLib.OutPt,l=t.OutPt1.Pt.Y==t.OffPt.Y;if(l&&ClipperLib.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&ClipperLib.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(n=t.OutPt1.Next;n!=r&&ClipperLib.IntPoint.op_Equality(n.Pt,t.OffPt);)n=n.Next;var s=n.Pt.Y>t.OffPt.Y;for(o=t.OutPt2.Next;o!=p&&ClipperLib.IntPoint.op_Equality(o.Pt,t.OffPt);)o=o.Next;var u=o.Pt.Y>t.OffPt.Y;return s==u?!1:s?(n=this.DupOutPt(r,!1),o=this.DupOutPt(p,!0),r.Prev=p,p.Next=r,n.Next=o,o.Prev=n,t.OutPt1=r,t.OutPt2=n,!0):(n=this.DupOutPt(r,!0),o=this.DupOutPt(p,!1),r.Next=p,p.Prev=r,n.Prev=o,o.Next=n,t.OutPt1=r,t.OutPt2=n,!0)}if(l){for(n=r;r.Prev.Pt.Y==r.Pt.Y&&r.Prev!=n&&r.Prev!=p;)r=r.Prev;for(;n.Next.Pt.Y==n.Pt.Y&&n.Next!=r&&n.Next!=p;)n=n.Next;if(n.Next==r||n.Next==p)return!1;for(o=p;p.Prev.Pt.Y==p.Pt.Y&&p.Prev!=o&&p.Prev!=n;)p=p.Prev;for(;o.Next.Pt.Y==o.Pt.Y&&o.Next!=p&&o.Next!=r;)o=o.Next;if(o.Next==p||o.Next==r)return!1;var h={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,n.Pt.X,p.Pt.X,o.Pt.X,h))return!1;var a,C=h.Left,f=h.Right,d=new ClipperLib.IntPoint;return r.Pt.X>=C&&r.Pt.X<=f?(d.X=r.Pt.X,d.Y=r.Pt.Y,a=r.Pt.X>n.Pt.X):p.Pt.X>=C&&p.Pt.X<=f?(d.X=p.Pt.X,d.Y=p.Pt.Y,a=p.Pt.X>o.Pt.X):n.Pt.X>=C&&n.Pt.X<=f?(d.X=n.Pt.X,d.Y=n.Pt.Y,a=n.Pt.X>r.Pt.X):(d.X=o.Pt.X,d.Y=o.Pt.Y,a=o.Pt.X>p.Pt.X),t.OutPt1=r,t.OutPt2=p,this.JoinHorz(r,n,p,o,d,a)}for(n=r.Next;ClipperLib.IntPoint.op_Equality(n.Pt,r.Pt)&&n!=r;)n=n.Next;var L=n.Pt.Y>r.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(r.Pt,n.Pt,t.OffPt,this.m_UseFullRange);if(L){for(n=r.Prev;ClipperLib.IntPoint.op_Equality(n.Pt,r.Pt)&&n!=r;)n=n.Prev;if(n.Pt.Y>r.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(r.Pt,n.Pt,t.OffPt,this.m_UseFullRange))return!1}for(o=p.Next;ClipperLib.IntPoint.op_Equality(o.Pt,p.Pt)&&o!=p;)o=o.Next;var P=o.Pt.Y>p.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(p.Pt,o.Pt,t.OffPt,this.m_UseFullRange);if(P){for(o=p.Prev;ClipperLib.IntPoint.op_Equality(o.Pt,p.Pt)&&o!=p;)o=o.Prev;if(o.Pt.Y>p.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(p.Pt,o.Pt,t.OffPt,this.m_UseFullRange))return!1}return n==r||o==p||n==o||e==i&&L==P?!1:L?(n=this.DupOutPt(r,!1),o=this.DupOutPt(p,!0),r.Prev=p,p.Next=r,n.Next=o,o.Prev=n,t.OutPt1=r,t.OutPt2=n,!0):(n=this.DupOutPt(r,!0),o=this.DupOutPt(p,!1),r.Next=p,p.Prev=r,n.Prev=o,o.Next=n,t.OutPt1=r,t.OutPt2=n,!0)},ClipperLib.Clipper.GetBounds=function(t){for(var e=0,i=t.length;i>e&&0==t[e].length;)e++;if(e==i)return new ClipperLib.IntRect(0,0,0,0);var r=new ClipperLib.IntRect;for(r.left=t[e][0].X,r.right=r.left,r.top=t[e][0].Y,r.bottom=r.top;i>e;e++)for(var n=0,p=t[e].length;p>n;n++)t[e][n].X<r.left?r.left=t[e][n].X:t[e][n].X>r.right&&(r.right=t[e][n].X),t[e][n].Y<r.top?r.top=t[e][n].Y:t[e][n].Y>r.bottom&&(r.bottom=t[e][n].Y);return r},ClipperLib.Clipper.prototype.GetBounds2=function(t){var e=t,i=new ClipperLib.IntRect;for(i.left=t.Pt.X,i.right=t.Pt.X,i.top=t.Pt.Y,i.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<i.left&&(i.left=t.Pt.X),t.Pt.X>i.right&&(i.right=t.Pt.X),t.Pt.Y<i.top&&(i.top=t.Pt.Y),t.Pt.Y>i.bottom&&(i.bottom=t.Pt.Y),t=t.Next;return i},ClipperLib.Clipper.PointInPolygon=function(t,e){var i=0,r=e.length;if(3>r)return 0;for(var n=e[0],p=1;r>=p;++p){var o=p==r?e[0]:e[p];if(o.Y==t.Y&&(o.X==t.X||n.Y==t.Y&&o.X>t.X==n.X<t.X))return-1;if(n.Y<t.Y!=o.Y<t.Y)if(n.X>=t.X)if(o.X>t.X)i=1-i;else{var l=(n.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(n.Y-t.Y);if(0==l)return-1;l>0==o.Y>n.Y&&(i=1-i)}else if(o.X>t.X){var l=(n.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(n.Y-t.Y);if(0==l)return-1;l>0==o.Y>n.Y&&(i=1-i)}n=o}return i},ClipperLib.Clipper.prototype.PointInPolygon=function(t,e){for(var i=0,r=e;;){var n=e.Pt.X,p=e.Pt.Y,o=e.Next.Pt.X,l=e.Next.Pt.Y;if(l==t.Y&&(o==t.X||p==t.Y&&o>t.X==n<t.X))return-1;if(p<t.Y!=l<t.Y)if(n>=t.X)if(o>t.X)i=1-i;else{var s=(n-t.X)*(l-t.Y)-(o-t.X)*(p-t.Y);if(0==s)return-1;s>0==l>p&&(i=1-i)}else if(o>t.X){var s=(n-t.X)*(l-t.Y)-(o-t.X)*(p-t.Y);if(0==s)return-1;s>0==l>p&&(i=1-i)}if(e=e.Next,r==e)break}return i},ClipperLib.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var r=this.PointInPolygon(i.Pt,e);if(r>=0)return 0!=r;i=i.Next}while(i!=t);return!0},ClipperLib.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i=0,r=this.m_PolyOuts.length;r>i;i++){var n=this.m_PolyOuts[i];null!==n.Pts&&n.FirstLeft==t&&this.Poly2ContainsPoly1(n.Pts,e.Pts)&&(n.FirstLeft=e)}},ClipperLib.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i=0,r=this.m_PolyOuts,n=r.length,p=r[i];n>i;i++,p=r[i])p.FirstLeft==t&&(p.FirstLeft=e)},ClipperLib.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},ClipperLib.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;e>t;t++){var i=this.m_Joins[t],r=this.GetOutRec(i.OutPt1.Idx),n=this.GetOutRec(i.OutPt2.Idx);if(null!=r.Pts&&null!=n.Pts){var p;if(p=r==n?r:this.Param1RightOfParam2(r,n)?n:this.Param1RightOfParam2(n,r)?r:this.GetLowermostRec(r,n),this.JoinPoints(i,r,n))if(r==n){if(r.Pts=i.OutPt1,r.BottomPt=null,n=this.CreateOutRec(),n.Pts=i.OutPt2,this.UpdateOutPtIdxs(n),this.m_UsingPolyTree)for(var o=0,l=this.m_PolyOuts.length;l-1>o;o++){var s=this.m_PolyOuts[o];null!=s.Pts&&ClipperLib.Clipper.ParseFirstLeft(s.FirstLeft)==r&&s.IsHole!=r.IsHole&&this.Poly2ContainsPoly1(s.Pts,i.OutPt2)&&(s.FirstLeft=n)}this.Poly2ContainsPoly1(n.Pts,r.Pts)?(n.IsHole=!r.IsHole,n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r),(n.IsHole^this.ReverseSolution)==this.Area(n)>0&&this.ReversePolyPtLinks(n.Pts)):this.Poly2ContainsPoly1(r.Pts,n.Pts)?(n.IsHole=r.IsHole,r.IsHole=!n.IsHole,n.FirstLeft=r.FirstLeft,r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n),(r.IsHole^this.ReverseSolution)==this.Area(r)>0&&this.ReversePolyPtLinks(r.Pts)):(n.IsHole=r.IsHole,n.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,n))}else n.Pts=null,n.BottomPt=null,n.Idx=r.Idx,r.IsHole=p.IsHole,p==n&&(r.FirstLeft=n.FirstLeft),n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r)}}},ClipperLib.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do e.Idx=t.Idx,e=e.Prev;while(e!=t.Pts)},ClipperLib.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],i=e.Pts;if(null!==i)do{for(var r=i.Next;r!=e.Pts;){if(ClipperLib.IntPoint.op_Equality(i.Pt,r.Pt)&&r.Next!=i&&r.Prev!=i){var n=i.Prev,p=r.Prev;i.Prev=p,p.Next=i,r.Prev=n,n.Next=r,e.Pts=i;var o=this.CreateOutRec();o.Pts=r,this.UpdateOutPtIdxs(o),this.Poly2ContainsPoly1(o.Pts,e.Pts)?(o.IsHole=!e.IsHole,o.FirstLeft=e):this.Poly2ContainsPoly1(e.Pts,o.Pts)?(o.IsHole=e.IsHole,e.IsHole=!o.IsHole,o.FirstLeft=e.FirstLeft,e.FirstLeft=o):(o.IsHole=e.IsHole,o.FirstLeft=e.FirstLeft),r=i}r=r.Next}i=i.Next}while(i!=e.Pts)}},ClipperLib.Clipper.Area=function(t){var e=t.length;if(3>e)return 0;for(var i=0,r=0,n=e-1;e>r;++r)i+=(t[n].X+t[r].X)*(t[n].Y-t[r].Y),n=r;return.5*-i},ClipperLib.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var i=0;do i+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!=t.Pts);return.5*i},use_deprecated&&(ClipperLib.Clipper.OffsetPaths=function(t,e,i,r,n){var p=new ClipperLib.Paths,o=new ClipperLib.ClipperOffset(n,n);return o.AddPaths(t,i,r),o.Execute(p,e),p}),ClipperLib.Clipper.SimplifyPolygon=function(t,e){var i=new Array,r=new ClipperLib.Clipper(0);return r.StrictlySimple=!0,r.AddPath(t,ClipperLib.PolyType.ptSubject,!0),r.Execute(ClipperLib.ClipType.ctUnion,i,e,e),i},ClipperLib.Clipper.SimplifyPolygons=function(t,e){"undefined"==typeof e&&(e=ClipperLib.PolyFillType.pftEvenOdd);var i=new Array,r=new ClipperLib.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(t,ClipperLib.PolyType.ptSubject,!0),r.Execute(ClipperLib.ClipType.ctUnion,i,e,e),i},ClipperLib.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,r=t.Y-e.Y;return i*i+r*r},ClipperLib.Clipper.DistanceFromLineSqrd=function(t,e,i){var r=e.Y-i.Y,n=i.X-e.X,p=r*e.X+n*e.Y;return p=r*t.X+n*t.Y-p,p*p/(r*r+n*n)},ClipperLib.Clipper.SlopesNearCollinear=function(t,e,i,r){return ClipperLib.Clipper.DistanceFromLineSqrd(e,t,i)<r},ClipperLib.Clipper.PointsAreClose=function(t,e,i){var r=t.X-e.X,n=t.Y-e.Y;return i>=r*r+n*n},ClipperLib.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},ClipperLib.Clipper.CleanPolygon=function(t,e){"undefined"==typeof e&&(e=1.415);var i=t.length;if(0==i)return new Array;for(var r=new Array(i),n=0;i>n;++n)r[n]=new ClipperLib.OutPt;for(var n=0;i>n;++n)r[n].Pt=t[n],r[n].Next=r[(n+1)%i],r[n].Next.Prev=r[n],r[n].Idx=0;for(var p=e*e,o=r[0];0==o.Idx&&o.Next!=o.Prev;)ClipperLib.Clipper.PointsAreClose(o.Pt,o.Prev.Pt,p)?(o=ClipperLib.Clipper.ExcludeOp(o),i--):ClipperLib.Clipper.PointsAreClose(o.Prev.Pt,o.Next.Pt,p)?(ClipperLib.Clipper.ExcludeOp(o.Next),o=ClipperLib.Clipper.ExcludeOp(o),i-=2):ClipperLib.Clipper.SlopesNearCollinear(o.Prev.Pt,o.Pt,o.Next.Pt,p)?(o=ClipperLib.Clipper.ExcludeOp(o),i--):(o.Idx=1,o=o.Next);3>i&&(i=0);for(var l=new Array(i),n=0;i>n;++n)l[n]=new ClipperLib.IntPoint(o.Pt),o=o.Next;return r=null,l},ClipperLib.Clipper.CleanPolygons=function(t,e){for(var i=new Array(t.length),r=0,n=t.length;n>r;r++)i[r]=ClipperLib.Clipper.CleanPolygon(t[r],e);return i},ClipperLib.Clipper.Minkowski=function(t,e,i,r){var n=r?1:0,p=t.length,o=e.length,l=new Array;if(i)for(var s=0;o>s;s++){for(var u=new Array(p),h=0,a=t.length,C=t[h];a>h;h++,C=t[h])u[h]=new ClipperLib.IntPoint(e[s].X+C.X,e[s].Y+C.Y);l.push(u)}else for(var s=0;o>s;s++){for(var u=new Array(p),h=0,a=t.length,C=t[h];a>h;h++,C=t[h])u[h]=new ClipperLib.IntPoint(e[s].X-C.X,e[s].Y-C.Y);l.push(u)}for(var f=new Array,s=0;o-1+n>s;s++)for(var h=0;p>h;h++){var d=new Array;d.push(l[s%o][h%p]),d.push(l[(s+1)%o][h%p]),d.push(l[(s+1)%o][(h+1)%p]),d.push(l[s%o][(h+1)%p]),ClipperLib.Clipper.Orientation(d)||d.reverse(),f.push(d)}var L=new ClipperLib.Clipper(0);return L.AddPaths(f,ClipperLib.PolyType.ptSubject,!0),L.Execute(ClipperLib.ClipType.ctUnion,l,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero),l},ClipperLib.Clipper.MinkowskiSum=function(){var t=arguments,e=t.length;if(3==e){var i=t[0],r=t[1],n=t[2];return ClipperLib.Clipper.Minkowski(i,r,!0,n)}if(4==e){for(var p,i=t[0],o=t[1],l=t[2],n=t[3],s=new ClipperLib.Clipper,u=0,h=o.length;h>u;++u){var p=ClipperLib.Clipper.Minkowski(i,o[u],!0,n);s.AddPaths(p,ClipperLib.PolyType.ptSubject,!0)}n&&s.AddPaths(o,ClipperLib.PolyType.ptClip,!0);var a=new ClipperLib.Paths;return s.Execute(ClipperLib.ClipType.ctUnion,a,l,l),a}},ClipperLib.Clipper.MinkowskiDiff=function(t,e,i){return ClipperLib.Clipper.Minkowski(t,e,!1,i)},ClipperLib.Clipper.PolyTreeToPaths=function(t){var e=new Array;return ClipperLib.Clipper.AddPolyNodeToPaths(t,ClipperLib.Clipper.NodeType.ntAny,e),e},ClipperLib.Clipper.AddPolyNodeToPaths=function(t,e,i){var r=!0;switch(e){case ClipperLib.Clipper.NodeType.ntOpen:return;case ClipperLib.Clipper.NodeType.ntClosed:r=!t.IsOpen}t.m_polygon.length>0&&r&&i.push(t.m_polygon);for(var n=0,p=t.Childs(),o=p.length,l=p[n];o>n;n++,l=p[n])ClipperLib.Clipper.AddPolyNodeToPaths(l,e,i)},ClipperLib.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new ClipperLib.Paths,i=0,r=t.ChildCount();r>i;i++)t.Childs()[i].IsOpen&&e.push(t.Childs()[i].m_polygon);return e},ClipperLib.Clipper.ClosedPathsFromPolyTree=function(t){var e=new ClipperLib.Paths;return ClipperLib.Clipper.AddPolyNodeToPaths(t,ClipperLib.Clipper.NodeType.ntClosed,e),e},Inherit(ClipperLib.Clipper,ClipperLib.ClipperBase),ClipperLib.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},ClipperLib.ClipperOffset=function(t,e){"undefined"==typeof t&&(t=2),"undefined"==typeof e&&(e=ClipperLib.ClipperOffset.def_arc_tolerance),this.m_destPolys=new ClipperLib.Paths,this.m_srcPoly=new ClipperLib.Path,this.m_destPoly=new ClipperLib.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new ClipperLib.IntPoint,this.m_polyNodes=new ClipperLib.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},ClipperLib.ClipperOffset.two_pi=6.28318530717959,ClipperLib.ClipperOffset.def_arc_tolerance=.25,ClipperLib.ClipperOffset.prototype.Clear=function(){ClipperLib.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},ClipperLib.ClipperOffset.Round=ClipperLib.Clipper.Round,ClipperLib.ClipperOffset.prototype.AddPath=function(t,e,i){var r=t.length-1;if(!(0>r)){var n=new ClipperLib.PolyNode;if(n.m_jointype=e,n.m_endtype=i,i==ClipperLib.EndType.etClosedLine||i==ClipperLib.EndType.etClosedPolygon)for(;r>0&&ClipperLib.IntPoint.op_Equality(t[0],t[r]);)r--;n.m_polygon.push(t[0]);for(var p=0,o=0,l=1;r>=l;l++)ClipperLib.IntPoint.op_Inequality(n.m_polygon[p],t[l])&&(p++,n.m_polygon.push(t[l]),(t[l].Y>n.m_polygon[o].Y||t[l].Y==n.m_polygon[o].Y&&t[l].X<n.m_polygon[o].X)&&(o=p));if(!(i==ClipperLib.EndType.etClosedPolygon&&2>p||i!=ClipperLib.EndType.etClosedPolygon&&0>p)&&(this.m_polyNodes.AddChild(n),i==ClipperLib.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new ClipperLib.IntPoint(0,o);else{var s=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(n.m_polygon[o].Y>s.Y||n.m_polygon[o].Y==s.Y&&n.m_polygon[o].X<s.X)&&(this.m_lowest=new ClipperLib.IntPoint(this.m_polyNodes.ChildCount()-1,o))}}},ClipperLib.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var r=0,n=t.length;n>r;r++)this.AddPath(t[r],e,i)},ClipperLib.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!ClipperLib.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];(e.m_endtype==ClipperLib.EndType.etClosedPolygon||e.m_endtype==ClipperLib.EndType.etClosedLine&&ClipperLib.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];e.m_endtype!=ClipperLib.EndType.etClosedLine||ClipperLib.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},ClipperLib.ClipperOffset.GetUnitNormal=function(t,e){var i=e.X-t.X,r=e.Y-t.Y;if(0==i&&0==r)return new ClipperLib.DoublePoint(0,0);var n=1/Math.sqrt(i*i+r*r);return i*=n,r*=n,new ClipperLib.DoublePoint(r,-i)},ClipperLib.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,ClipperLib.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var i=this.m_polyNodes.Childs()[e];i.m_endtype==ClipperLib.EndType.etClosedPolygon&&this.m_destPolys.push(i.m_polygon)}else{this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var r;r=this.ArcTolerance<=0?ClipperLib.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*ClipperLib.ClipperOffset.def_arc_tolerance?Math.abs(t)*ClipperLib.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var n=3.14159265358979/Math.acos(1-r/Math.abs(t));this.m_sin=Math.sin(ClipperLib.ClipperOffset.two_pi/n),this.m_cos=Math.cos(ClipperLib.ClipperOffset.two_pi/n),this.m_StepsPerRad=n/ClipperLib.ClipperOffset.two_pi,0>t&&(this.m_sin=-this.m_sin);for(var e=0;e<this.m_polyNodes.ChildCount();e++){var i=this.m_polyNodes.Childs()[e];this.m_srcPoly=i.m_polygon;var p=this.m_srcPoly.length;if(!(0==p||0>=t&&(3>p||i.m_endtype!=ClipperLib.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=p){this.m_normals.length=0;for(var o=0;p-1>o;o++)this.m_normals.push(ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[o],this.m_srcPoly[o+1]));if(i.m_endtype==ClipperLib.EndType.etClosedLine||i.m_endtype==ClipperLib.EndType.etClosedPolygon?this.m_normals.push(ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[p-1],this.m_srcPoly[0])):this.m_normals.push(new ClipperLib.DoublePoint(this.m_normals[p-2])),i.m_endtype==ClipperLib.EndType.etClosedPolygon){for(var l=p-1,o=0;p>o;o++)l=this.OffsetPoint(o,l,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(i.m_endtype==ClipperLib.EndType.etClosedLine){for(var l=p-1,o=0;p>o;o++)l=this.OffsetPoint(o,l,i.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var s=this.m_normals[p-1],o=p-1;o>0;o--)this.m_normals[o]=new ClipperLib.DoublePoint(-this.m_normals[o-1].X,-this.m_normals[o-1].Y);this.m_normals[0]=new ClipperLib.DoublePoint(-s.X,-s.Y),l=0;for(var o=p-1;o>=0;o--)l=this.OffsetPoint(o,l,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var l=0,o=1;p-1>o;++o)l=this.OffsetPoint(o,l,i.m_jointype);var u;if(i.m_endtype==ClipperLib.EndType.etOpenButt){var o=p-1;u=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[o].X+this.m_normals[o].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[o].Y+this.m_normals[o].Y*t)),this.m_destPoly.push(u),u=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[o].X-this.m_normals[o].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[o].Y-this.m_normals[o].Y*t)),this.m_destPoly.push(u)}else{var o=p-1;l=p-2,this.m_sinA=0,this.m_normals[o]=new ClipperLib.DoublePoint(-this.m_normals[o].X,-this.m_normals[o].Y),i.m_endtype==ClipperLib.EndType.etOpenSquare?this.DoSquare(o,l):this.DoRound(o,l)}for(var o=p-1;o>0;o--)this.m_normals[o]=new ClipperLib.DoublePoint(-this.m_normals[o-1].X,-this.m_normals[o-1].Y);this.m_normals[0]=new ClipperLib.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),l=p-1;for(var o=l-1;o>0;--o)l=this.OffsetPoint(o,l,i.m_jointype);i.m_endtype==ClipperLib.EndType.etOpenButt?(u=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(u),u=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),
this.m_destPoly.push(u)):(l=1,this.m_sinA=0,i.m_endtype==ClipperLib.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(i.m_jointype==ClipperLib.JoinType.jtRound)for(var h=1,a=0,o=1;n>=o;o++){this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+h*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+a*t)));var C=h;h=h*this.m_cos-this.m_sin*a,a=C*this.m_sin+a*this.m_cos}else for(var h=-1,a=-1,o=0;4>o;++o)this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+h*t),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+a*t))),0>h?h=1:0>a?a=1:h=-1;this.m_destPolys.push(this.m_destPoly)}}}},ClipperLib.ClipperOffset.prototype.Execute=function(){var t=arguments,e=t[0]instanceof ClipperLib.PolyTree;if(e){var i=t[0],r=t[1];i.Clear(),this.FixOrientations(),this.DoOffset(r);var n=new ClipperLib.Clipper(0);if(n.AddPaths(this.m_destPolys,ClipperLib.PolyType.ptSubject,!0),r>0)n.Execute(ClipperLib.ClipType.ctUnion,i,ClipperLib.PolyFillType.pftPositive,ClipperLib.PolyFillType.pftPositive);else{var p=ClipperLib.Clipper.GetBounds(this.m_destPolys),o=new ClipperLib.Path;if(o.push(new ClipperLib.IntPoint(p.left-10,p.bottom+10)),o.push(new ClipperLib.IntPoint(p.right+10,p.bottom+10)),o.push(new ClipperLib.IntPoint(p.right+10,p.top-10)),o.push(new ClipperLib.IntPoint(p.left-10,p.top-10)),n.AddPath(o,ClipperLib.PolyType.ptSubject,!0),n.ReverseSolution=!0,n.Execute(ClipperLib.ClipType.ctUnion,i,ClipperLib.PolyFillType.pftNegative,ClipperLib.PolyFillType.pftNegative),1==i.ChildCount()&&i.Childs()[0].ChildCount()>0){var l=i.Childs()[0];i.Childs()[0]=l.Childs()[0];for(var s=1;s<l.ChildCount();s++)i.AddChild(l.Childs()[s])}else i.Clear()}}else{var i=t[0],r=t[1];ClipperLib.Clear(i),this.FixOrientations(),this.DoOffset(r);var n=new ClipperLib.Clipper(0);if(n.AddPaths(this.m_destPolys,ClipperLib.PolyType.ptSubject,!0),r>0)n.Execute(ClipperLib.ClipType.ctUnion,i,ClipperLib.PolyFillType.pftPositive,ClipperLib.PolyFillType.pftPositive);else{var p=ClipperLib.Clipper.GetBounds(this.m_destPolys),o=new ClipperLib.Path;o.push(new ClipperLib.IntPoint(p.left-10,p.bottom+10)),o.push(new ClipperLib.IntPoint(p.right+10,p.bottom+10)),o.push(new ClipperLib.IntPoint(p.right+10,p.top-10)),o.push(new ClipperLib.IntPoint(p.left-10,p.top-10)),n.AddPath(o,ClipperLib.PolyType.ptSubject,!0),n.ReverseSolution=!0,n.Execute(ClipperLib.ClipType.ctUnion,i,ClipperLib.PolyFillType.pftNegative,ClipperLib.PolyFillType.pftNegative),i.length>0&&i.splice(0,1)}}},ClipperLib.ClipperOffset.prototype.OffsetPoint=function(t,e,i){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new ClipperLib.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(i){case ClipperLib.JoinType.jtMiter:var r=1+(this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y);r>=this.m_miterLim?this.DoMiter(t,e,r):this.DoSquare(t,e);break;case ClipperLib.JoinType.jtSquare:this.DoSquare(t,e);break;case ClipperLib.JoinType.jtRound:this.DoRound(t,e)}return e=t},ClipperLib.ClipperOffset.prototype.DoSquare=function(t,e){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*i)),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*i)))),this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*i)),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*i))))},ClipperLib.ClipperOffset.prototype.DoMiter=function(t,e,i){var r=this.m_delta/i;this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*r),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*r)))},ClipperLib.ClipperOffset.prototype.DoRound=function(t,e){for(var i,r=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),n=ClipperLib.Cast_Int32(ClipperLib.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(r))),p=this.m_normals[e].X,o=this.m_normals[e].Y,l=0;n>l;++l)this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+p*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+o*this.m_delta))),i=p,p=p*this.m_cos-this.m_sin*o,o=i*this.m_sin+o*this.m_cos;this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},ClipperLib.Error=function(t){try{throw new Error(t)}catch(e){alert(e.message)}},ClipperLib.JS={},ClipperLib.JS.AreaOfPolygon=function(t,e){return e||(e=1),ClipperLib.Clipper.Area(t)/(e*e)},ClipperLib.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var i=0,r=0;r<t.length;r++)i+=ClipperLib.Clipper.Area(t[r]);return i/(e*e)},ClipperLib.JS.BoundsOfPath=function(t,e){return ClipperLib.JS.BoundsOfPaths([t],e)},ClipperLib.JS.BoundsOfPaths=function(t,e){e||(e=1);var i=ClipperLib.Clipper.GetBounds(t);return i.left/=e,i.bottom/=e,i.right/=e,i.top/=e,i},ClipperLib.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var i=t[0]instanceof Array,t=ClipperLib.JS.Clone(t);if("number"!=typeof e||null===e)return ClipperLib.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||0>e)return t;i||(t=[t]);for(var r,n,p,o,l,s,u,h=t.length,a=[],C=0;h>C;C++)if(n=t[C],r=n.length,0!==r)if(3>r)p=n,a.push(p);else{for(p=n,o=e*e,l=n[0],s=1,u=1;r>u;u++)(n[u].X-l.X)*(n[u].X-l.X)+(n[u].Y-l.Y)*(n[u].Y-l.Y)<=o||(p[s]=n[u],l=n[u],s++);l=n[s-1],(n[0].X-l.X)*(n[0].X-l.X)+(n[0].Y-l.Y)*(n[0].Y-l.Y)<=o&&s--,r>s&&p.splice(s,r-s),p.length&&a.push(p)}return!i&&a.length?a=a[0]:i||0!==a.length?i&&0===a.length&&(a=[[]]):a=[],a},ClipperLib.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,r,n,p,o=t.length,l=new Array(o);for(r=0;o>r;r++){for(i=t[r].length,p=new Array(i),n=0;i>n;n++)p[n]={X:t[r][n].X,Y:t[r][n].Y};l[r]=p}return e||(l=l[0]),l},ClipperLib.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return ClipperLib.Error("Tolerance is not a number in Lighten()."),ClipperLib.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||0>e)return ClipperLib.JS.Clone(t);t[0]instanceof Array||(t=[t]);var i,r,n,p,o,l,s,u,h,a,C,f,d,L,P,b,m,y=t.length,c=e*e,v=[];for(i=0;y>i;i++)if(n=t[i],l=n.length,0!=l){for(p=0;1e6>p;p++){for(o=[],l=n.length,n[l-1].X!=n[0].X||n[l-1].Y!=n[0].Y?(f=1,n.push({X:n[0].X,Y:n[0].Y}),l=n.length):f=0,C=[],r=0;l-2>r;r++)s=n[r],h=n[r+1],u=n[r+2],b=s.X,m=s.Y,d=u.X-b,L=u.Y-m,(0!==d||0!==L)&&(P=((h.X-b)*d+(h.Y-m)*L)/(d*d+L*L),P>1?(b=u.X,m=u.Y):P>0&&(b+=d*P,m+=L*P)),d=h.X-b,L=h.Y-m,a=d*d+L*L,c>=a&&(C[r+1]=1,r++);for(o.push({X:n[0].X,Y:n[0].Y}),r=1;l-1>r;r++)C[r]||o.push({X:n[r].X,Y:n[r].Y});if(o.push({X:n[l-1].X,Y:n[l-1].Y}),f&&n.pop(),!C.length)break;n=o}l=o.length,o[l-1].X==o[0].X&&o[l-1].Y==o[0].Y&&o.pop(),o.length>2&&v.push(o)}return!t[0]instanceof Array&&(v=v[0]),"undefined"==typeof v&&(v=[[]]),v},ClipperLib.JS.PerimeterOfPath=function(t,e,i){if("undefined"==typeof t)return 0;var r,n,p=Math.sqrt,o=0,l=0,s=0,u=0,h=0,a=t.length;if(2>a)return 0;for(e&&(t[a]=t[0],a++);--a;)r=t[a],l=r.X,s=r.Y,n=t[a-1],u=n.X,h=n.Y,o+=p((l-u)*(l-u)+(s-h)*(s-h));return e&&t.pop(),o/i},ClipperLib.JS.PerimeterOfPaths=function(t,e,i){i||(i=1);for(var r=0,n=0;n<t.length;n++)r+=ClipperLib.JS.PerimeterOfPath(t[n],e,i);return r},ClipperLib.JS.ScaleDownPath=function(t,e){var i,r;for(e||(e=1),i=t.length;i--;)r=t[i],r.X=r.X/e,r.Y=r.Y/e},ClipperLib.JS.ScaleDownPaths=function(t,e){var i,r,n;Math.round;for(e||(e=1),i=t.length;i--;)for(r=t[i].length;r--;)n=t[i][r],n.X=n.X/e,n.Y=n.Y/e},ClipperLib.JS.ScaleUpPath=function(t,e){var i,r,n=Math.round;for(e||(e=1),i=t.length;i--;)r=t[i],r.X=n(r.X*e),r.Y=n(r.Y*e)},ClipperLib.JS.ScaleUpPaths=function(t,e){var i,r,n,p=Math.round;for(e||(e=1),i=t.length;i--;)for(r=t[i].length;r--;)n=t[i][r],n.X=p(n.X*e),n.Y=p(n.Y*e)},ClipperLib.ExPolygons=function(){return[]},ClipperLib.ExPolygon=function(){this.outer=null,this.holes=null},ClipperLib.JS.AddOuterPolyNodeToExPolygons=function(t,e){var i=new ClipperLib.ExPolygon;i.outer=t.Contour();var r=t.Childs(),n=r.length;i.holes=new Array(n);var p,o,l,s,u,h;for(l=0;n>l;l++)for(p=r[l],i.holes[l]=p.Contour(),s=0,u=p.Childs(),h=u.length;h>s;s++)o=u[s],ClipperLib.JS.AddOuterPolyNodeToExPolygons(o,e);e.push(i)},ClipperLib.JS.ExPolygonsToPaths=function(t){var e,i,r,n,p=new ClipperLib.Paths;for(e=0,r=t.length;r>e;e++)for(p.push(t[e].outer),i=0,n=t[e].holes.length;n>i;i++)p.push(t[e].holes[i]);return p},ClipperLib.JS.PolyTreeToExPolygons=function(t){var e,i,r,n,p=new ClipperLib.ExPolygons;for(i=0,r=t.Childs(),n=r.length;n>i;i++)e=r[i],ClipperLib.JS.AddOuterPolyNodeToExPolygons(e,p);return p},module.exports=ClipperLib;


},{}],2:[function(require,module,exports){
(function (global){
(function(){function n(n,t){if(n!==t){var r=null===n,e=n===b,u=n===n,i=null===t,o=t===b,a=t===t;if(n>t&&!i||!u||r&&!o&&a||e&&a)return 1;if(t>n&&!r||!a||i&&!e&&u||o&&u)return-1}return 0}function t(n,t,r){for(var e=n.length,u=r?e:-1;r?u--:++u<e;)if(t(n[u],u,n))return u;return-1}function r(n,t,r){if(t!==t)return p(n,r);for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function e(n){return"function"==typeof n||!1}function u(n){return"string"==typeof n?n:null==n?"":n+""}function i(n,t){for(var r=-1,e=n.length;++r<e&&t.indexOf(n.charAt(r))>-1;);return r}function o(n,t){for(var r=n.length;r--&&t.indexOf(n.charAt(r))>-1;);return r}function a(t,r){return n(t.criteria,r.criteria)||t.index-r.index}function f(t,r,e){for(var u=-1,i=t.criteria,o=r.criteria,a=i.length,f=e.length;++u<a;){var l=n(i[u],o[u]);if(l)return u>=f?l:l*(e[u]?1:-1)}return t.index-r.index}function l(n){return Dn[n]}function c(n){return Mn[n]}function s(n){return"\\"+Yn[n]}function p(n,t,r){for(var e=n.length,u=t+(r?0:-1);r?u--:++u<e;){var i=n[u];if(i!==i)return u}return-1}function h(n){return!!n&&"object"==typeof n}function v(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function _(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;)n[r]===t&&(n[r]=z,i[++u]=r);return i}function g(n,t){for(var r,e=-1,u=n.length,i=-1,o=[];++e<u;){var a=n[e],f=t?t(a,e,n):a;e&&r===f||(r=f,o[++i]=a)}return o}function y(n){for(var t=-1,r=n.length;++t<r&&v(n.charCodeAt(t)););return t}function d(n){for(var t=n.length;t--&&v(n.charCodeAt(t)););return t}function m(n){return Kn[n]}function w(v){function Y(n){if(h(n)&&!ka(n)&&!(n instanceof Dn)){if(n instanceof Q)return n;if(Gi.call(n,"__chain__")&&Gi.call(n,"__wrapped__"))return le(n)}return new Q(n)}function Z(){}function Q(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function Dn(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Oo,this.__views__=null}function Mn(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new Dn(this.__wrapped__);return e.__actions__=n?et(n):null,e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=t?et(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?et(r):null,e}function Kn(){if(this.__filtered__){var n=new Dn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Vn(){var n=this.__wrapped__.value();if(!ka(n))return rr(n,this.__actions__);var t=this.__dir__,r=0>t,e=qr(0,n.length,this.__views__),u=e.start,i=e.end,o=i-u,a=r?i:u-1,f=mo(o,this.__takeCount__),l=this.__iteratees__,c=l?l.length:0,s=0,p=[];n:for(;o--&&f>s;){a+=t;for(var h=-1,v=n[a];++h<c;){var _=l[h],g=_.iteratee,y=_.type;if(y==F){if(_.done&&(r?a>_.index:a<_.index)&&(_.count=0,_.done=!1),_.index=a,!_.done){var d=_.limit;if(!(_.done=d>-1?_.count++>=d:!g(v)))continue n}}else{var m=g(v);if(y==L)v=m;else if(!m){if(y==N)continue n;break n}}}p[s++]=v}return p}function Yn(){this.__data__={}}function Gn(n){return this.has(n)&&delete this.__data__[n]}function Jn(n){return"__proto__"==n?b:this.__data__[n]}function Xn(n){return"__proto__"!=n&&Gi.call(this.__data__,n)}function Zn(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this}function Hn(n){var t=n?n.length:0;for(this.data={hash:ho(null),set:new ao};t--;)this.push(n[t])}function Qn(n,t){var r=n.data,e="string"==typeof t||Iu(t)?r.set.has(t):r.hash[t];return e?0:-1}function rt(n){var t=this.data;"string"==typeof n||Iu(n)?t.set.add(n):t.hash[n]=!0}function et(n,t){var r=-1,e=n.length;for(t||(t=Ti(e));++r<e;)t[r]=n[r];return t}function ut(n,t){for(var r=-1,e=n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function it(n,t){for(var r=n.length;r--&&t(n[r],r,n)!==!1;);return n}function ot(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function at(n,t,r,e){for(var u=-1,i=n.length,o=e,a=o;++u<i;){var f=n[u],l=+t(f);r(l,o)&&(o=l,a=f)}return a}function ft(n,t){for(var r=-1,e=n.length,u=-1,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[++u]=o)}return i}function lt(n,t){for(var r=-1,e=n.length,u=Ti(e);++r<e;)u[r]=t(n[r],r,n);return u}function ct(n,t,r,e){var u=-1,i=n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);return r}function st(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function pt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function ht(n){for(var t=n.length,r=0;t--;)r+=+n[t]||0;return r}function vt(n,t){return n===b?t:n}function _t(n,t,r,e){return n!==b&&Gi.call(e,r)?n:t}function gt(n,t,r){for(var e=-1,u=Ba(t),i=u.length;++e<i;){var o=u[e],a=n[o],f=r(a,t[o],o,n,t);(f===f?f===a:a!==a)&&(a!==b||o in n)||(n[o]=f)}return n}function yt(n,t){return null==t?n:mt(t,Ba(t),n)}function dt(n,t){for(var r=-1,e=null==n,u=!e&&Yr(n),i=u?n.length:0,o=t.length,a=Ti(o);++r<o;){var f=t[r];u?a[r]=Gr(f,i)?n[f]:b:a[r]=e?b:n[f]}return a}function mt(n,t,r){r||(r={});for(var e=-1,u=t.length;++e<u;){var i=t[e];r[i]=n[i]}return r}function wt(n,t,r){var e=typeof n;return"function"==e?t===b?n:ir(n,t,r):null==n?wi:"object"==e?Bt(n):t===b?Ri(n):zt(n,t)}function bt(n,t,r,e,u,i,o){var a;if(r&&(a=u?r(n,e,u):r(n)),a!==b)return a;if(!Iu(n))return n;var f=ka(n);if(f){if(a=Dr(n),!t)return et(n,a)}else{var l=Xi.call(n),c=l==V;if(l!=J&&l!=P&&(!c||u))return Pn[l]?Kr(n,l,t):u?n:{};if(a=Mr(c?{}:n),!t)return yt(a,n)}i||(i=[]),o||(o=[]);for(var s=i.length;s--;)if(i[s]==n)return o[s];return i.push(n),o.push(a),(f?ut:Wt)(n,function(e,u){a[u]=bt(e,t,r,u,n,i,o)}),a}function xt(n,t,r){if("function"!=typeof n)throw new qi(B);return fo(function(){n.apply(b,r)},t)}function At(n,t){var e=n?n.length:0,u=[];if(!e)return u;var i=-1,o=Br(),a=o==r,f=a&&t.length>=200?zo(t):null,l=t.length;f&&(o=Qn,a=!1,t=f);n:for(;++i<e;){var c=n[i];if(a&&c===c){for(var s=l;s--;)if(t[s]===c)continue n;u.push(c)}else o(t,c,0)<0&&u.push(c)}return u}function jt(n,t){var r=!0;return $o(n,function(n,e,u){return r=!!t(n,e,u)}),r}function Ot(n,t,r,e){var u=e,i=u;return $o(n,function(n,o,a){var f=+t(n,o,a);(r(f,u)||f===e&&f===i)&&(u=f,i=n)}),i}function Rt(n,t,r,e){var u=n.length;for(r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=e===b||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;u>r;)n[r++]=t;return n}function kt(n,t){var r=[];return $o(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function It(n,t,r,e){var u;return r(n,function(n,r,i){return t(n,r,i)?(u=e?r:n,!1):void 0}),u}function Et(n,t,r){for(var e=-1,u=n.length,i=-1,o=[];++e<u;){var a=n[e];if(h(a)&&Yr(a)&&(r||ka(a)||bu(a))){t&&(a=Et(a,t,r));for(var f=-1,l=a.length;++f<l;)o[++i]=a[f]}else r||(o[++i]=a)}return o}function Ct(n,t){return No(n,t,Yu)}function Wt(n,t){return No(n,t,Ba)}function St(n,t){return Lo(n,t,Ba)}function Tt(n,t){for(var r=-1,e=t.length,u=-1,i=[];++r<e;){var o=t[r];Ea(n[o])&&(i[++u]=o)}return i}function Ut(n,t,r){if(null!=n){r!==b&&r in ae(n)&&(t=[r]);for(var e=0,u=t.length;null!=n&&u>e;)n=n[t[e++]];return e&&e==u?n:b}}function $t(n,t,r,e,u,i){return n===t?!0:null==n||null==t||!Iu(n)&&!h(t)?n!==n&&t!==t:Ft(n,t,$t,r,e,u,i)}function Ft(n,t,r,e,u,i,o){var a=ka(n),f=ka(t),l=q,c=q;a||(l=Xi.call(n),l==P?l=J:l!=J&&(a=Fu(n))),f||(c=Xi.call(t),c==P?c=J:c!=J&&(f=Fu(t)));var s=l==J,p=c==J,h=l==c;if(h&&!a&&!s)return $r(n,t,l);if(!u){var v=s&&Gi.call(n,"__wrapped__"),_=p&&Gi.call(t,"__wrapped__");if(v||_)return r(v?n.value():n,_?t.value():t,e,u,i,o)}if(!h)return!1;i||(i=[]),o||(o=[]);for(var g=i.length;g--;)if(i[g]==n)return o[g]==t;i.push(n),o.push(t);var y=(a?Ur:Fr)(n,t,r,e,u,i,o);return i.pop(),o.pop(),y}function Nt(n,t,r){var e=t.length,u=e,i=!r;if(null==n)return!u;for(n=ae(n);e--;){var o=t[e];if(i&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++e<u;){o=t[e];var a=o[0],f=n[a],l=o[1];if(i&&o[2]){if(f===b&&!(a in n))return!1}else{var c=r?r(f,l,a):b;if(!(c===b?$t(l,f,r,!0):c))return!1}}return!0}function Lt(n,t){var r=-1,e=Yr(n)?Ti(n.length):[];return $o(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function Bt(n){var t=zr(n);if(1==t.length&&t[0][2]){var r=t[0][0],e=t[0][1];return function(n){return null==n?!1:n[r]===e&&(e!==b||r in ae(n))}}return function(n){return Nt(n,t)}}function zt(n,t){var r=ka(n),e=Xr(n)&&Qr(t),u=n+"";return n=fe(n),function(i){if(null==i)return!1;var o=u;if(i=ae(i),!(!r&&e||o in i)){if(i=1==n.length?i:Ut(i,Gt(n,0,-1)),null==i)return!1;o=xe(n),i=ae(i)}return i[o]===t?t!==b||o in i:$t(t,i[o],b,!0)}}function Pt(n,t,r,e,u){if(!Iu(n))return n;var i=Yr(t)&&(ka(t)||Fu(t)),o=i?null:Ba(t);return ut(o||t,function(a,f){if(o&&(f=a,a=t[f]),h(a))e||(e=[]),u||(u=[]),qt(n,t,f,Pt,r,e,u);else{var l=n[f],c=r?r(l,a,f,n,t):b,s=c===b;s&&(c=a),c===b&&(!i||f in n)||!s&&(c===c?c===l:l!==l)||(n[f]=c)}}),n}function qt(n,t,r,e,u,i,o){for(var a=i.length,f=t[r];a--;)if(i[a]==f)return void(n[r]=o[a]);var l=n[r],c=u?u(l,f,r,n,t):b,s=c===b;s&&(c=f,Yr(f)&&(ka(f)||Fu(f))?c=ka(l)?l:Yr(l)?et(l):[]:Ca(f)||bu(f)?c=bu(l)?Pu(l):Ca(l)?l:{}:s=!1),i.push(f),o.push(c),s?n[r]=e(c,f,u,i,o):(c===c?c!==l:l===l)&&(n[r]=c)}function Dt(n){return function(t){return null==t?b:t[n]}}function Mt(n){var t=n+"";return n=fe(n),function(r){return Ut(r,n,t)}}function Kt(n,t){for(var r=n?t.length:0;r--;){var e=t[r];if(e!=u&&Gr(e)){var u=e;lo.call(n,e,1)}}return n}function Vt(n,t){return n+eo(Ao()*(t-n+1))}function Yt(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function Gt(n,t,r){var e=-1,u=n.length;t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=r===b||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=Ti(u);++e<u;)i[e]=n[e+t];return i}function Jt(n,t){var r;return $o(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Xt(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function Zt(n,t,r){var e=Nr(),u=-1;t=lt(t,function(n){return e(n)});var i=Lt(n,function(n){var r=lt(t,function(t){return t(n)});return{criteria:r,index:++u,value:n}});return Xt(i,function(n,t){return f(n,t,r)})}function Ht(n,t){var r=0;return $o(n,function(n,e,u){r+=+t(n,e,u)||0}),r}function Qt(n,t){var e=-1,u=Br(),i=n.length,o=u==r,a=o&&i>=200,f=a?zo():null,l=[];f?(u=Qn,o=!1):(a=!1,f=t?[]:l);n:for(;++e<i;){var c=n[e],s=t?t(c,e,n):c;if(o&&c===c){for(var p=f.length;p--;)if(f[p]===s)continue n;t&&f.push(s),l.push(c)}else u(f,s,0)<0&&((t||a)&&f.push(s),l.push(c))}return l}function nr(n,t){for(var r=-1,e=t.length,u=Ti(e);++r<e;)u[r]=n[t[r]];return u}function tr(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?Gt(n,e?0:i,e?i+1:u):Gt(n,e?i+1:0,e?u:i)}function rr(n,t){var r=n;r instanceof Dn&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var i=[r],o=t[e];oo.apply(i,o.args),r=o.func.apply(o.thisArg,i)}return r}function er(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&Io>=u){for(;u>e;){var i=e+u>>>1,o=n[i];(r?t>=o:t>o)&&null!==o?e=i+1:u=i}return u}return ur(n,t,wi,r)}function ur(n,t,r,e){t=r(t);for(var u=0,i=n?n.length:0,o=t!==t,a=null===t,f=t===b;i>u;){var l=eo((u+i)/2),c=r(n[l]),s=c!==b,p=c===c;if(o)var h=p||e;else h=a?p&&s&&(e||null!=c):f?p&&(e||s):null==c?!1:e?t>=c:t>c;h?u=l+1:i=l}return mo(i,ko)}function ir(n,t,r){if("function"!=typeof n)return wi;if(t===b)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)};case 5:return function(r,e,u,i,o){return n.call(t,r,e,u,i,o)}}return function(){return n.apply(t,arguments)}}function or(n){return no.call(n,0)}function ar(n,t,r){for(var e=r.length,u=-1,i=yo(n.length-e,0),o=-1,a=t.length,f=Ti(i+a);++o<a;)f[o]=t[o];for(;++u<e;)f[r[u]]=n[u];for(;i--;)f[o++]=n[u++];return f}function fr(n,t,r){for(var e=-1,u=r.length,i=-1,o=yo(n.length-u,0),a=-1,f=t.length,l=Ti(o+f);++i<o;)l[i]=n[i];for(var c=i;++a<f;)l[c+a]=t[a];for(;++e<u;)l[c+r[e]]=n[i++];return l}function lr(n,t){return function(r,e,u){var i=t?t():{};if(e=Nr(e,u,3),ka(r))for(var o=-1,a=r.length;++o<a;){var f=r[o];n(i,f,e(f,o,r),r)}else $o(r,function(t,r,u){n(i,t,e(t,r,u),u)});return i}}function cr(n){return hu(function(t,r){var e=-1,u=null==t?0:r.length,i=u>2?r[u-2]:b,o=u>2?r[2]:b,a=u>1?r[u-1]:b;for("function"==typeof i?(i=ir(i,a,5),u-=2):(i="function"==typeof a?a:b,u-=i?1:0),o&&Jr(r[0],r[1],o)&&(i=3>u?b:i,u=1);++e<u;){var f=r[e];f&&n(t,f,i)}return t})}function sr(n,t){return function(r,e){var u=r?qo(r):0;if(!Hr(u))return n(r,e);for(var i=t?u:-1,o=ae(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function pr(n){return function(t,r,e){for(var u=ae(t),i=e(t),o=i.length,a=n?o:-1;n?a--:++a<o;){var f=i[a];if(r(u[f],f,u)===!1)break}return t}}function hr(n,t){function r(){var u=this&&this!==nt&&this instanceof r?e:n;return u.apply(t,arguments)}var e=_r(n);return r}function vr(n){return function(t){for(var r=-1,e=yi(ei(t)),u=e.length,i="";++r<u;)i=n(i,e[r],r);return i}}function _r(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4])}var r=Uo(n.prototype),e=n.apply(r,t);return Iu(e)?e:r}}function gr(n){function t(r,e,u){u&&Jr(r,e,u)&&(e=null);var i=Tr(r,n,null,null,null,null,null,e);return i.placeholder=t.placeholder,i}return t}function yr(n,t){return function(r,e,u){if(u&&Jr(r,e,u)&&(e=null),e=Nr(e,u,3),1==e.length){r=oe(r);var i=at(r,e,n,t);if(!r.length||i!==t)return i}return Ot(r,e,n,t)}}function dr(n,r){return function(e,u,i){if(u=Nr(u,i,3),ka(e)){var o=t(e,u,r);return o>-1?e[o]:b}return It(e,u,n)}}function mr(n){return function(r,e,u){return r&&r.length?(e=Nr(e,u,3),t(r,e,n)):-1}}function wr(n){return function(t,r,e){return r=Nr(r,e,3),It(t,r,n,!0)}}function br(n){return function(){for(var t,r=arguments.length,e=n?r:-1,u=0,i=Ti(r);n?e--:++e<r;){var o=i[u++]=arguments[e];if("function"!=typeof o)throw new qi(B);!t&&Q.prototype.thru&&"wrapper"==Lr(o)&&(t=new Q([]))}for(e=t?-1:r;++e<r;){o=i[e];var a=Lr(o),f="wrapper"==a?Po(o):null;t=f&&Zr(f[0])&&f[1]==(C|R|I|W)&&!f[4].length&&1==f[9]?t[Lr(f[0])].apply(t,f[3]):1==o.length&&Zr(o)?t[a]():t.thru(o)}return function(){var n=arguments;if(t&&1==n.length&&ka(n[0]))return t.plant(n[0]).value();for(var e=0,u=r?i[e].apply(this,n):n[0];++e<r;)u=i[e].call(this,u);return u}}}function xr(n,t){return function(r,e,u){return"function"==typeof e&&u===b&&ka(r)?n(r,e):t(r,ir(e,u,3))}}function Ar(n){return function(t,r,e){return("function"!=typeof r||e!==b)&&(r=ir(r,e,3)),n(t,r,Yu)}}function jr(n){return function(t,r,e){return("function"!=typeof r||e!==b)&&(r=ir(r,e,3)),n(t,r)}}function Or(n){return function(t,r,e){var u={};return r=Nr(r,e,3),Wt(t,function(t,e,i){var o=r(t,e,i);e=n?o:e,t=n?t:o,u[e]=t}),u}}function Rr(n){return function(t,r,e){return t=u(t),(n?t:"")+Cr(t,r,e)+(n?"":t)}}function kr(n){var t=hu(function(r,e){var u=_(e,t.placeholder);return Tr(r,n,null,e,u)});return t}function Ir(n,t){return function(r,e,u,i){var o=arguments.length<3;return"function"==typeof e&&i===b&&ka(r)?n(r,e,u,o):Yt(r,Nr(e,i,4),u,o,t)}}function Er(n,t,r,e,u,i,o,a,f,l){function c(){for(var m=arguments.length,w=m,x=Ti(m);w--;)x[w]=arguments[w];if(e&&(x=ar(x,e,u)),i&&(x=fr(x,i,o)),v||y){var O=c.placeholder,R=_(x,O);if(m-=R.length,l>m){var k=a?et(a):null,C=yo(l-m,0),W=v?R:null,S=v?null:R,T=v?x:null,U=v?null:x;t|=v?I:E,t&=~(v?E:I),g||(t&=~(A|j));var $=[n,t,r,T,W,U,S,k,f,C],F=Er.apply(b,$);return Zr(n)&&Do(F,$),F.placeholder=O,F}}var N=p?r:this,L=h?N[n]:n;return a&&(x=ee(x,a)),s&&f<x.length&&(x.length=f),this&&this!==nt&&this instanceof c&&(L=d||_r(n)),L.apply(N,x)}var s=t&C,p=t&A,h=t&j,v=t&R,g=t&O,y=t&k,d=h?null:_r(n);return c}function Cr(n,t,r){var e=n.length;if(t=+t,e>=t||!_o(t))return"";var u=t-e;return r=null==r?" ":r+"",li(r,to(u/r.length)).slice(0,u)}function Wr(n,t,r,e){function u(){for(var t=-1,a=arguments.length,f=-1,l=e.length,c=Ti(a+l);++f<l;)c[f]=e[f];for(;a--;)c[f++]=arguments[++t];var s=this&&this!==nt&&this instanceof u?o:n;return s.apply(i?r:this,c)}var i=t&A,o=_r(n);return u}function Sr(n){return function(t,r,e,u){var i=Nr(e);return null==e&&i===wt?er(t,r,n):ur(t,r,i(e,u,1),n)}}function Tr(n,t,r,e,u,i,o,a){var f=t&j;if(!f&&"function"!=typeof n)throw new qi(B);var l=e?e.length:0;if(l||(t&=~(I|E),e=u=null),l-=u?u.length:0,t&E){var c=e,s=u;e=u=null}var p=f?null:Po(n),h=[n,t,r,e,u,c,s,i,o,a];if(p&&(ne(h,p),t=h[1],a=h[9]),h[9]=null==a?f?0:n.length:yo(a-l,0)||0,t==A)var v=hr(h[0],h[2]);else v=t!=I&&t!=(A|I)||h[4].length?Er.apply(b,h):Wr.apply(b,h);var _=p?Bo:Do;return _(v,h)}function Ur(n,t,r,e,u,i,o){var a=-1,f=n.length,l=t.length;if(f!=l&&!(u&&l>f))return!1;for(;++a<f;){var c=n[a],s=t[a],p=e?e(u?s:c,u?c:s,a):b;if(p!==b){if(p)continue;return!1}if(u){if(!pt(t,function(n){return c===n||r(c,n,e,u,i,o)}))return!1}else if(c!==s&&!r(c,s,e,u,i,o))return!1}return!0}function $r(n,t,r){switch(r){case D:case M:return+n==+t;case K:return n.name==t.name&&n.message==t.message;case G:return n!=+n?t!=+t:n==+t;case X:case H:return n==t+""}return!1}function Fr(n,t,r,e,u,i,o){var a=Ba(n),f=a.length,l=Ba(t),c=l.length;if(f!=c&&!u)return!1;for(var s=f;s--;){var p=a[s];if(!(u?p in t:Gi.call(t,p)))return!1}for(var h=u;++s<f;){p=a[s];var v=n[p],_=t[p],g=e?e(u?_:v,u?v:_,p):b;if(!(g===b?r(v,_,e,u,i,o):g))return!1;h||(h="constructor"==p)}if(!h){var y=n.constructor,d=t.constructor;if(y!=d&&"constructor"in n&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof d&&d instanceof d))return!1}return!0}function Nr(n,t,r){var e=Y.callback||di;return e=e===di?wt:e,r?e(n,t,r):e}function Lr(n){for(var t=n.name,r=So[t],e=r?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function Br(n,t,e){var u=Y.indexOf||we;return u=u===we?r:u,n?u(n,t,e):u}function zr(n){for(var t=Gu(n),r=t.length;r--;)t[r][2]=Qr(t[r][1]);return t}function Pr(n,t){var r=null==n?b:n[t];return Wu(r)?r:b}function qr(n,t,r){for(var e=-1,u=r?r.length:0;++e<u;){var i=r[e],o=i.size;switch(i.type){case"drop":n+=o;break;case"dropRight":t-=o;break;case"take":t=mo(t,n+o);break;case"takeRight":n=yo(n,t-o)}}return{start:n,end:t}}function Dr(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&Gi.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Mr(n){var t=n.constructor;return"function"==typeof t&&t instanceof t||(t=Bi),new t}function Kr(n,t,r){var e=n.constructor;switch(t){case nn:return or(n);case D:case M:return new e(+n);case tn:case rn:case en:case un:case on:case an:case fn:case ln:case cn:var u=n.buffer;return new e(r?or(u):u,n.byteOffset,n.length);case G:case H:return new e(n);case X:var i=new e(n.source,En.exec(n));i.lastIndex=n.lastIndex}return i}function Vr(n,t,r){null==n||Xr(t,n)||(t=fe(t),n=1==t.length?n:Ut(n,Gt(t,0,-1)),t=xe(t));var e=null==n?n:n[t];return null==e?b:e.apply(n,r)}function Yr(n){return null!=n&&Hr(qo(n))}function Gr(n,t){return n="number"==typeof n||Sn.test(n)?+n:-1,t=null==t?Co:t,n>-1&&n%1==0&&t>n}function Jr(n,t,r){if(!Iu(r))return!1;var e=typeof t;if("number"==e?Yr(r)&&Gr(t,r.length):"string"==e&&t in r){var u=r[t];return n===n?n===u:u!==u}return!1}function Xr(n,t){var r=typeof n;if("string"==r&&xn.test(n)||"number"==r)return!0;if(ka(n))return!1;var e=!bn.test(n);return e||null!=t&&n in ae(t)}function Zr(n){var t=Lr(n);if(!(t in Dn.prototype))return!1;var r=Y[t];if(n===r)return!0;var e=Po(r);return!!e&&n===e[0]}function Hr(n){return"number"==typeof n&&n>-1&&n%1==0&&Co>=n}function Qr(n){return n===n&&!Iu(n)}function ne(n,t){var r=n[1],e=t[1],u=r|e,i=C>u,o=e==C&&r==R||e==C&&r==W&&n[7].length<=t[8]||e==(C|W)&&r==R;if(!i&&!o)return n;e&A&&(n[2]=t[2],u|=r&A?0:O);var a=t[3];if(a){var f=n[3];n[3]=f?ar(f,a,t[4]):et(a),n[4]=f?_(n[3],z):et(t[4])}return a=t[5],a&&(f=n[5],n[5]=f?fr(f,a,t[6]):et(a),n[6]=f?_(n[5],z):et(t[6])),a=t[7],a&&(n[7]=et(a)),e&C&&(n[8]=null==n[8]?t[8]:mo(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function te(n,t){n=ae(n);for(var r=-1,e=t.length,u={};++r<e;){var i=t[r];i in n&&(u[i]=n[i])}return u}function re(n,t){var r={};return Ct(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function ee(n,t){for(var r=n.length,e=mo(t.length,r),u=et(n);e--;){var i=t[e];n[e]=Gr(i,r)?u[i]:b}return n}function ue(n){var t;Y.support;if(!h(n)||Xi.call(n)!=J||!Gi.call(n,"constructor")&&(t=n.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return Ct(n,function(n,t){r=t}),r===b||Gi.call(n,r)}function ie(n){for(var t=Yu(n),r=t.length,e=r&&n.length,u=!!e&&Hr(e)&&(ka(n)||bu(n)),i=-1,o=[];++i<r;){var a=t[i];(u&&Gr(a,e)||Gi.call(n,a))&&o.push(a)}return o}function oe(n){return null==n?[]:Yr(n)?Iu(n)?n:Bi(n):Hu(n)}function ae(n){return Iu(n)?n:Bi(n)}function fe(n){if(ka(n))return n;var t=[];return u(n).replace(An,function(n,r,e,u){t.push(e?u.replace(kn,"$1"):r||n)}),t}function le(n){return n instanceof Dn?n.clone():new Q(n.__wrapped__,n.__chain__,et(n.__actions__))}function ce(n,t,r){t=(r?Jr(n,t,r):null==t)?1:yo(+t||1,1);for(var e=0,u=n?n.length:0,i=-1,o=Ti(to(u/t));u>e;)o[++i]=Gt(n,e,e+=t);return o}function se(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var i=n[t];i&&(u[++e]=i)}return u}function pe(n,t,r){var e=n?n.length:0;return e?((r?Jr(n,t,r):null==t)&&(t=1),Gt(n,0>t?0:t)):[]}function he(n,t,r){var e=n?n.length:0;return e?((r?Jr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Gt(n,0,0>t?0:t)):[]}function ve(n,t,r){return n&&n.length?tr(n,Nr(t,r,3),!0,!0):[]}function _e(n,t,r){return n&&n.length?tr(n,Nr(t,r,3),!0):[]}function ge(n,t,r,e){var u=n?n.length:0;return u?(r&&"number"!=typeof r&&Jr(n,t,r)&&(r=0,e=u),Rt(n,t,r,e)):[]}function ye(n){return n?n[0]:b}function de(n,t,r){var e=n?n.length:0;return r&&Jr(n,t,r)&&(t=!1),e?Et(n,t):[]}function me(n){var t=n?n.length:0;return t?Et(n,!0):[]}function we(n,t,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=0>e?yo(u+e,0):e;else if(e){var i=er(n,t),o=n[i];return(t===t?t===o:o!==o)?i:-1}return r(n,t,e||0)}function be(n){return he(n,1)}function xe(n){var t=n?n.length:0;return t?n[t-1]:b}function Ae(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?yo(e+r,0):mo(r||0,e-1))+1;else if(r){u=er(n,t,!0)-1;var i=n[u];return(t===t?t===i:i!==i)?u:-1}if(t!==t)return p(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1}function je(){var n=arguments,t=n[0];if(!t||!t.length)return t;for(var r=0,e=Br(),u=n.length;++r<u;)for(var i=0,o=n[r];(i=e(t,o,i))>-1;)lo.call(t,i,1);return t}function Oe(n,t,r){var e=[];if(!n||!n.length)return e;var u=-1,i=[],o=n.length;for(t=Nr(t,r,3);++u<o;){var a=n[u];t(a,u,n)&&(e.push(a),i.push(u))}return Kt(n,i),e}function Re(n){return pe(n,1)}function ke(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&Jr(n,t,r)&&(t=0,r=e),Gt(n,t,r)):[]}function Ie(n,t,r){var e=n?n.length:0;return e?((r?Jr(n,t,r):null==t)&&(t=1),Gt(n,0,0>t?0:t)):[]}function Ee(n,t,r){var e=n?n.length:0;return e?((r?Jr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Gt(n,0>t?0:t)):[]}function Ce(n,t,r){return n&&n.length?tr(n,Nr(t,r,3),!1,!0):[]}function We(n,t,r){return n&&n.length?tr(n,Nr(t,r,3)):[]}function Se(n,t,e,u){var i=n?n.length:0;if(!i)return[];null!=t&&"boolean"!=typeof t&&(u=e,e=Jr(n,t,u)?null:t,t=!1);var o=Nr();return(null!=e||o!==wt)&&(e=o(e,u,3)),t&&Br()==r?g(n,e):Qt(n,e)}function Te(n){if(!n||!n.length)return[];var t=-1,r=0;n=ft(n,function(n){return Yr(n)?(r=yo(n.length,r),!0):void 0});for(var e=Ti(r);++t<r;)e[t]=lt(n,Dt(t));return e}function Ue(n,t,r){var e=n?n.length:0;if(!e)return[];var u=Te(n);return null==t?u:(t=ir(t,r,4),lt(u,function(n){return ct(n,t,b,!0)}))}function $e(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Yr(r))var e=e?At(e,r).concat(At(r,e)):r}return e?Qt(e):[]}function Fe(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||ka(n[0])||(t=[]);++r<e;){var i=n[r];t?u[i]=t[r]:i&&(u[i[0]]=i[1])}return u}function Ne(n){var t=Y(n);return t.__chain__=!0,t}function Le(n,t,r){return t.call(r,n),n}function Be(n,t,r){return t.call(r,n)}function ze(){return Ne(this)}function Pe(){return new Q(this.value(),this.__chain__)}function qe(n){for(var t,r=this;r instanceof Z;){var e=le(r);t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function De(){var n=this.__wrapped__;return n instanceof Dn?(this.__actions__.length&&(n=new Dn(this)),new Q(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()})}function Me(){return this.value()+""}function Ke(){return rr(this.__wrapped__,this.__actions__)}function Ve(n,t,r){var e=ka(n)?ot:jt;return r&&Jr(n,t,r)&&(t=null),("function"!=typeof t||r!==b)&&(t=Nr(t,r,3)),e(n,t)}function Ye(n,t,r){var e=ka(n)?ft:kt;return t=Nr(t,r,3),e(n,t)}function Ge(n,t){return ea(n,Bt(t))}function Je(n,t,r,e){var u=n?qo(n):0;return Hr(u)||(n=Hu(n),u=n.length),u?(r="number"!=typeof r||e&&Jr(t,r,e)?0:0>r?yo(u+r,0):r||0,"string"==typeof n||!ka(n)&&$u(n)?u>r&&n.indexOf(t,r)>-1:Br(n,t,r)>-1):!1}function Xe(n,t,r){var e=ka(n)?lt:Lt;return t=Nr(t,r,3),e(n,t)}function Ze(n,t){return Xe(n,Ri(t))}function He(n,t,r){var e=ka(n)?ft:kt;return t=Nr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})}function Qe(n,t,r){if(r?Jr(n,t,r):null==t){n=oe(n);var e=n.length;return e>0?n[Vt(0,e-1)]:b}var u=-1,i=zu(n),e=i.length,o=e-1;for(t=mo(0>t?0:+t||0,e);++u<t;){var a=Vt(u,o),f=i[a];i[a]=i[u],i[u]=f}return i.length=t,i}function nu(n){return Qe(n,Oo)}function tu(n){var t=n?qo(n):0;return Hr(t)?t:Ba(n).length}function ru(n,t,r){var e=ka(n)?pt:Jt;return r&&Jr(n,t,r)&&(t=null),("function"!=typeof t||r!==b)&&(t=Nr(t,r,3)),e(n,t)}function eu(n,t,r){if(null==n)return[];r&&Jr(n,t,r)&&(t=null);var e=-1;t=Nr(t,r,3);var u=Lt(n,function(n,r,u){return{criteria:t(n,r,u),index:++e,value:n}});return Xt(u,a)}function uu(n,t,r,e){return null==n?[]:(e&&Jr(t,r,e)&&(r=null),ka(t)||(t=null==t?[]:[t]),ka(r)||(r=null==r?[]:[r]),Zt(n,t,r))}function iu(n,t){return Ye(n,Bt(t))}function ou(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new qi(B);var r=n;n=t,t=r}return n=_o(n=+n)?n:0,function(){return--n<1?t.apply(this,arguments):void 0}}function au(n,t,r){return r&&Jr(n,t,r)&&(t=null),t=n&&null==t?n.length:yo(+t||0,0),Tr(n,C,null,null,null,null,t)}function fu(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new qi(B);var e=n;n=t,t=e}return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}}function lu(n,t,r){function e(){p&&ro(p),f&&ro(f),f=p=h=b}function u(){var r=t-(va()-c);if(0>=r||r>t){f&&ro(f);var e=h;f=p=h=b,e&&(v=va(),l=n.apply(s,a),p||f||(a=s=null))}else p=fo(u,r)}function i(){p&&ro(p),f=p=h=b,(g||_!==t)&&(v=va(),l=n.apply(s,a),p||f||(a=s=null))}function o(){if(a=arguments,c=va(),s=this,h=g&&(p||!y),_===!1)var r=y&&!p;else{f||y||(v=c);var e=_-(c-v),o=0>=e||e>_;o?(f&&(f=ro(f)),v=c,l=n.apply(s,a)):f||(f=fo(i,e))}return o&&p?p=ro(p):p||t===_||(p=fo(u,t)),r&&(o=!0,l=n.apply(s,a)),!o||p||f||(a=s=null),l}var a,f,l,c,s,p,h,v=0,_=!1,g=!0;if("function"!=typeof n)throw new qi(B);if(t=0>t?0:+t||0,r===!0){var y=!0;g=!1}else Iu(r)&&(y=r.leading,_="maxWait"in r&&yo(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return o.cancel=e,o}function cu(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new qi(B);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o),o};return r.cache=new cu.Cache,r}function su(n){if("function"!=typeof n)throw new qi(B);return function(){return!n.apply(this,arguments)}}function pu(n){return fu(2,n)}function hu(n,t){if("function"!=typeof n)throw new qi(B);return t=yo(t===b?n.length-1:+t||0,0),function(){for(var r=arguments,e=-1,u=yo(r.length-t,0),i=Ti(u);++e<u;)i[e]=r[t+e];switch(t){case 0:return n.call(this,i);case 1:return n.call(this,r[0],i);case 2:return n.call(this,r[0],r[1],i)}var o=Ti(t+1);for(e=-1;++e<t;)o[e]=r[e];return o[t]=i,n.apply(this,o)}}function vu(n){if("function"!=typeof n)throw new qi(B);return function(t){return n.apply(this,t)}}function _u(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new qi(B);return r===!1?e=!1:Iu(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),qn.leading=e,qn.maxWait=+t,qn.trailing=u,lu(n,t,qn)}function gu(n,t){return t=null==t?wi:t,Tr(t,I,null,[n],[])}function yu(n,t,r,e){return t&&"boolean"!=typeof t&&Jr(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),"function"==typeof r?bt(n,t,ir(r,e,1)):bt(n,t)}function du(n,t,r){return"function"==typeof t?bt(n,!0,ir(t,r,1)):bt(n,!0)}function mu(n,t){return n>t}function wu(n,t){return n>=t}function bu(n){return h(n)&&Yr(n)&&Xi.call(n)==P}function xu(n){return n===!0||n===!1||h(n)&&Xi.call(n)==D}function Au(n){return h(n)&&Xi.call(n)==M}function ju(n){return!!n&&1===n.nodeType&&h(n)&&Xi.call(n).indexOf("Element")>-1}function Ou(n){return null==n?!0:Yr(n)&&(ka(n)||$u(n)||bu(n)||h(n)&&Ea(n.splice))?!n.length:!Ba(n).length}function Ru(n,t,r,e){r="function"==typeof r?ir(r,e,3):b;var u=r?r(n,t):b;return u===b?$t(n,t,r):!!u}function ku(n){return h(n)&&"string"==typeof n.message&&Xi.call(n)==K}function Iu(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function Eu(n,t,r,e){return r="function"==typeof r?ir(r,e,3):b,Nt(n,zr(t),r)}function Cu(n){return Tu(n)&&n!=+n}function Wu(n){return null==n?!1:Xi.call(n)==V?Hi.test(Yi.call(n)):h(n)&&Wn.test(n)}function Su(n){return null===n}function Tu(n){return"number"==typeof n||h(n)&&Xi.call(n)==G}function Uu(n){return h(n)&&Xi.call(n)==X}function $u(n){return"string"==typeof n||h(n)&&Xi.call(n)==H}function Fu(n){return h(n)&&Hr(n.length)&&!!zn[Xi.call(n)]}function Nu(n){return n===b}function Lu(n,t){return t>n}function Bu(n,t){return t>=n}function zu(n){var t=n?qo(n):0;return Hr(t)?t?et(n):[]:Hu(n)}function Pu(n){return mt(n,Yu(n))}function qu(n,t,r){var e=Uo(n);return r&&Jr(n,t,r)&&(t=null),t?yt(e,t):e}function Du(n){return Tt(n,Yu(n))}function Mu(n,t,r){var e=null==n?b:Ut(n,fe(t),t+"");return e===b?r:e}function Ku(n,t){if(null==n)return!1;var r=Gi.call(n,t);if(!r&&!Xr(t)){if(t=fe(t),n=1==t.length?n:Ut(n,Gt(t,0,-1)),null==n)return!1;t=xe(t),r=Gi.call(n,t)}return r||Hr(n.length)&&Gr(t,n.length)&&(ka(n)||bu(n))}function Vu(n,t,r){r&&Jr(n,t,r)&&(t=null);for(var e=-1,u=Ba(n),i=u.length,o={};++e<i;){var a=u[e],f=n[a];t?Gi.call(o,f)?o[f].push(a):o[f]=[a]:o[f]=a}return o}function Yu(n){if(null==n)return[];Iu(n)||(n=Bi(n));var t=n.length;t=t&&Hr(t)&&(ka(n)||bu(n))&&t||0;for(var r=n.constructor,e=-1,u="function"==typeof r&&r.prototype===n,i=Ti(t),o=t>0;++e<t;)i[e]=e+"";for(var a in n)o&&Gr(a,t)||"constructor"==a&&(u||!Gi.call(n,a))||i.push(a);return i}function Gu(n){n=ae(n);for(var t=-1,r=Ba(n),e=r.length,u=Ti(e);++t<e;){var i=r[t];u[t]=[i,n[i]]}return u}function Ju(n,t,r){var e=null==n?b:n[t];return e===b&&(null==n||Xr(t,n)||(t=fe(t),n=1==t.length?n:Ut(n,Gt(t,0,-1)),e=null==n?b:n[xe(t)]),e=e===b?r:e),Ea(e)?e.call(n):e}function Xu(n,t,r){if(null==n)return n;var e=t+"";t=null!=n[e]||Xr(t,n)?[e]:fe(t);for(var u=-1,i=t.length,o=i-1,a=n;null!=a&&++u<i;){var f=t[u];Iu(a)&&(u==o?a[f]=r:null==a[f]&&(a[f]=Gr(t[u+1])?[]:{})),a=a[f]}return n}function Zu(n,t,r,e){var u=ka(n)||Fu(n);if(t=Nr(t,e,4),null==r)if(u||Iu(n)){var i=n.constructor;r=u?ka(n)?new i:[]:Uo(Ea(i)?i.prototype:null)}else r={};return(u?ut:Wt)(n,function(n,e,u){return t(r,n,e,u)}),r}function Hu(n){return nr(n,Ba(n))}function Qu(n){return nr(n,Yu(n))}function ni(n,t,r){return t=+t||0,"undefined"==typeof r?(r=t,t=0):r=+r||0,n>=mo(t,r)&&n<yo(t,r)}function ti(n,t,r){r&&Jr(n,t,r)&&(t=r=null);var e=null==n,u=null==t;if(null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var i=Ao();return mo(n+i*(t-n+io("1e-"+((i+"").length-1))),t)}return Vt(n,t)}function ri(n){return n=u(n),n&&n.charAt(0).toUpperCase()+n.slice(1)}function ei(n){return n=u(n),n&&n.replace(Tn,l).replace(Rn,"")}function ui(n,t,r){n=u(n),t+="";var e=n.length;return r=r===b?e:mo(0>r?0:+r||0,e),r-=t.length,r>=0&&n.indexOf(t,r)==r}function ii(n){return n=u(n),n&&yn.test(n)?n.replace(_n,c):n}function oi(n){return n=u(n),n&&On.test(n)?n.replace(jn,"\\$&"):n}function ai(n,t,r){n=u(n),t=+t;var e=n.length;if(e>=t||!_o(t))return n;var i=(t-e)/2,o=eo(i),a=to(i);return r=Cr("",a,r),r.slice(0,o)+n+r}function fi(n,t,r){return r&&Jr(n,t,r)&&(t=0),xo(n,t)}function li(n,t){
var r="";if(n=u(n),t=+t,1>t||!n||!_o(t))return r;do t%2&&(r+=n),t=eo(t/2),n+=n;while(t);return r}function ci(n,t,r){return n=u(n),r=null==r?0:mo(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r}function si(n,t,r){var e=Y.templateSettings;r&&Jr(n,t,r)&&(t=r=null),n=u(n),t=gt(yt({},r||t),e,_t);var i,o,a=gt(yt({},t.imports),e.imports,_t),f=Ba(a),l=nr(a,f),c=0,p=t.interpolate||Un,h="__p += '",v=zi((t.escape||Un).source+"|"+p.source+"|"+(p===wn?In:Un).source+"|"+(t.evaluate||Un).source+"|$","g"),_="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Bn+"]")+"\n";n.replace(v,function(t,r,e,u,a,f){return e||(e=u),h+=n.slice(c,f).replace($n,s),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),e&&(h+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),c=f+t.length,t}),h+="';\n";var g=t.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(sn,""):h).replace(pn,"$1").replace(hn,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Za(function(){return Fi(f,_+"return "+h).apply(b,l)});if(y.source=h,ku(y))throw y;return y}function pi(n,t,r){var e=n;return(n=u(n))?(r?Jr(e,t,r):null==t)?n.slice(y(n),d(n)+1):(t+="",n.slice(i(n,t),o(n,t)+1)):n}function hi(n,t,r){var e=n;return n=u(n),n?(r?Jr(e,t,r):null==t)?n.slice(y(n)):n.slice(i(n,t+"")):n}function vi(n,t,r){var e=n;return n=u(n),n?(r?Jr(e,t,r):null==t)?n.slice(0,d(n)+1):n.slice(0,o(n,t+"")+1):n}function _i(n,t,r){r&&Jr(n,t,r)&&(t=null);var e=S,i=T;if(null!=t)if(Iu(t)){var o="separator"in t?t.separator:o;e="length"in t?+t.length||0:e,i="omission"in t?u(t.omission):i}else e=+t||0;if(n=u(n),e>=n.length)return n;var a=e-i.length;if(1>a)return i;var f=n.slice(0,a);if(null==o)return f+i;if(Uu(o)){if(n.slice(a).search(o)){var l,c,s=n.slice(0,a);for(o.global||(o=zi(o.source,(En.exec(o)||"")+"g")),o.lastIndex=0;l=o.exec(s);)c=l.index;f=f.slice(0,null==c?a:c)}}else if(n.indexOf(o,a)!=a){var p=f.lastIndexOf(o);p>-1&&(f=f.slice(0,p))}return f+i}function gi(n){return n=u(n),n&&gn.test(n)?n.replace(vn,m):n}function yi(n,t,r){return r&&Jr(n,t,r)&&(t=null),n=u(n),n.match(t||Fn)||[]}function di(n,t,r){return r&&Jr(n,t,r)&&(t=null),h(n)?bi(n):wt(n,t)}function mi(n){return function(){return n}}function wi(n){return n}function bi(n){return Bt(bt(n,!0))}function xi(n,t){return zt(n,bt(t,!0))}function Ai(n,t,r){if(null==r){var e=Iu(t),u=e?Ba(t):null,i=u&&u.length?Tt(t,u):null;(i?i.length:e)||(i=!1,r=t,t=n,n=this)}i||(i=Tt(t,Ba(t)));var o=!0,a=-1,f=Ea(n),l=i.length;r===!1?o=!1:Iu(r)&&"chain"in r&&(o=r.chain);for(;++a<l;){var c=i[a],s=t[c];n[c]=s,f&&(n.prototype[c]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__),u=e.__actions__=et(this.__actions__);return u.push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}var i=[this.value()];return oo.apply(i,arguments),t.apply(n,i)}}(s))}return n}function ji(){return v._=Zi,this}function Oi(){}function Ri(n){return Xr(n)?Dt(n):Mt(n)}function ki(n){return function(t){return Ut(n,fe(t),t+"")}}function Ii(n,t,r){r&&Jr(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;for(var e=-1,u=yo(to((t-n)/(r||1)),0),i=Ti(u);++e<u;)i[e]=n,n+=r;return i}function Ei(n,t,r){if(n=eo(n),1>n||!_o(n))return[];var e=-1,u=Ti(mo(n,Ro));for(t=ir(t,r,1);++e<n;)Ro>e?u[e]=t(e):t(e);return u}function Ci(n){var t=++Ji;return u(n)+t}function Wi(n,t){return(+n||0)+(+t||0)}function Si(n,t,r){r&&Jr(n,t,r)&&(t=null);var e=Nr(),u=null==t;return u&&e===wt||(u=!1,t=e(t,r,3)),u?ht(ka(n)?n:oe(n)):Ht(n,t)}v=v?tt.defaults(nt.Object(),v,tt.pick(nt,Ln)):nt;var Ti=v.Array,Ui=v.Date,$i=v.Error,Fi=v.Function,Ni=v.Math,Li=v.Number,Bi=v.Object,zi=v.RegExp,Pi=v.String,qi=v.TypeError,Di=Ti.prototype,Mi=Bi.prototype,Ki=Pi.prototype,Vi=(Vi=v.window)?Vi.document:null,Yi=Fi.prototype.toString,Gi=Mi.hasOwnProperty,Ji=0,Xi=Mi.toString,Zi=v._,Hi=zi("^"+oi(Yi.call(Gi)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qi=Pr(v,"ArrayBuffer"),no=Pr(Qi&&new Qi(0),"slice"),to=Ni.ceil,ro=v.clearTimeout,eo=Ni.floor,uo=Pr(Bi,"getPrototypeOf"),io=v.parseFloat,oo=Di.push,ao=Pr(v,"Set"),fo=v.setTimeout,lo=Di.splice,co=Pr(v,"Uint8Array"),so=Pr(v,"WeakMap"),po=function(){try{var n=Pr(v,"Float64Array"),t=new n(new Qi(10),0,1)&&n}catch(r){}return t||null}(),ho=Pr(Bi,"create"),vo=Pr(Ti,"isArray"),_o=v.isFinite,go=Pr(Bi,"keys"),yo=Ni.max,mo=Ni.min,wo=Pr(Ui,"now"),bo=Pr(Li,"isFinite"),xo=v.parseInt,Ao=Ni.random,jo=Li.NEGATIVE_INFINITY,Oo=Li.POSITIVE_INFINITY,Ro=4294967295,ko=Ro-1,Io=Ro>>>1,Eo=po?po.BYTES_PER_ELEMENT:0,Co=9007199254740991,Wo=so&&new so,So={},To=Y.support={};!function(n){var t=function(){this.x=n},r=[];t.prototype={valueOf:n,y:n};for(var e in new t)r.push(e);try{To.dom=11===Vi.createDocumentFragment().nodeType}catch(u){To.dom=!1}}(1,0),Y.templateSettings={escape:dn,evaluate:mn,interpolate:wn,variable:"",imports:{_:Y}};var Uo=function(){function n(){}return function(t){if(Iu(t)){n.prototype=t;var r=new n;n.prototype=null}return r||{}}}(),$o=sr(Wt),Fo=sr(St,!0),No=pr(),Lo=pr(!0),Bo=Wo?function(n,t){return Wo.set(n,t),n}:wi;no||(or=Qi&&co?function(n){var t=n.byteLength,r=po?eo(t/Eo):0,e=r*Eo,u=new Qi(t);if(r){var i=new po(u,0,r);i.set(new po(n,0,r))}return t!=e&&(i=new co(u,e),i.set(new co(n,e))),u}:mi(null));var zo=ho&&ao?function(n){return new Hn(n)}:mi(null),Po=Wo?function(n){return Wo.get(n)}:Oi,qo=Dt("length"),Do=function(){var n=0,t=0;return function(r,e){var u=va(),i=$-(u-t);if(t=u,i>0){if(++n>=U)return r}else n=0;return Bo(r,e)}}(),Mo=hu(function(n,t){return Yr(n)?At(n,Et(t,!1,!0)):[]}),Ko=mr(),Vo=mr(!0),Yo=hu(function(n){for(var t=n.length,e=t,u=Ti(s),i=Br(),o=i==r,a=[];e--;){var f=n[e]=Yr(f=n[e])?f:[];u[e]=o&&f.length>=120?zo(e&&f):null}var l=n[0],c=-1,s=l?l.length:0,p=u[0];n:for(;++c<s;)if(f=l[c],(p?Qn(p,f):i(a,f,0))<0){for(var e=t;--e;){var h=u[e];if((h?Qn(h,f):i(n[e],f,0))<0)continue n}p&&p.push(f),a.push(f)}return a}),Go=hu(function(t,r){r=Et(r);var e=dt(t,r);return Kt(t,r.sort(n)),e}),Jo=Sr(),Xo=Sr(!0),Zo=hu(function(n){return Qt(Et(n,!1,!0))}),Ho=hu(function(n,t){return Yr(n)?At(n,t):[]}),Qo=hu(Te),na=hu(function(n){var t=n.length,r=t>2?n[t-2]:b,e=t>1?n[t-1]:b;return t>2&&"function"==typeof r?t-=2:(r=t>1&&"function"==typeof e?(--t,e):b,e=b),n.length=t,Ue(n,r,e)}),ta=hu(function(n,t){return dt(n,Et(t))}),ra=lr(function(n,t,r){Gi.call(n,r)?++n[r]:n[r]=1}),ea=dr($o),ua=dr(Fo,!0),ia=xr(ut,$o),oa=xr(it,Fo),aa=lr(function(n,t,r){Gi.call(n,r)?n[r].push(t):n[r]=[t]}),fa=lr(function(n,t,r){n[r]=t}),la=hu(function(n,t,r){var e=-1,u="function"==typeof t,i=Xr(t),o=Yr(n)?Ti(n.length):[];return $o(n,function(n){var a=u?t:i&&null!=n?n[t]:null;o[++e]=a?a.apply(n,r):Vr(n,t,r)}),o}),ca=lr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),sa=Ir(ct,$o),pa=Ir(st,Fo),ha=hu(function(n,t){if(null==n)return[];var r=t[2];return r&&Jr(t[0],t[1],r)&&(t.length=1),Zt(n,Et(t),[])}),va=wo||function(){return(new Ui).getTime()},_a=hu(function(n,t,r){var e=A;if(r.length){var u=_(r,_a.placeholder);e|=I}return Tr(n,e,t,r,u)}),ga=hu(function(n,t){t=t.length?Et(t):Du(n);for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=Tr(n[u],A,n)}return n}),ya=hu(function(n,t,r){var e=A|j;if(r.length){var u=_(r,ya.placeholder);e|=I}return Tr(t,e,n,r,u)}),da=gr(R),ma=gr(k),wa=hu(function(n,t){return xt(n,1,t)}),ba=hu(function(n,t,r){return xt(n,t,r)}),xa=br(),Aa=br(!0),ja=kr(I),Oa=kr(E),Ra=hu(function(n,t){return Tr(n,W,null,null,null,Et(t))}),ka=vo||function(n){return h(n)&&Hr(n.length)&&Xi.call(n)==q};To.dom||(ju=function(n){return!!n&&1===n.nodeType&&h(n)&&!Ca(n)});var Ia=bo||function(n){return"number"==typeof n&&_o(n)},Ea=e(/x/)||co&&!e(co)?function(n){return Xi.call(n)==V}:e,Ca=uo?function(n){if(!n||Xi.call(n)!=J)return!1;var t=Pr(n,"valueOf"),r=t&&(r=uo(t))&&uo(r);return r?n==r||uo(n)==r:ue(n)}:ue,Wa=cr(function(n,t,r){return r?gt(n,t,r):yt(n,t)}),Sa=hu(function(n){var t=n[0];return null==t?t:(n.push(vt),Wa.apply(b,n))}),Ta=wr(Wt),Ua=wr(St),$a=Ar(No),Fa=Ar(Lo),Na=jr(Wt),La=jr(St),Ba=go?function(n){var t=null==n?null:n.constructor;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&Yr(n)?ie(n):Iu(n)?go(n):[]}:ie,za=Or(!0),Pa=Or(),qa=cr(Pt),Da=hu(function(n,t){if(null==n)return{};if("function"!=typeof t[0]){var t=lt(Et(t),Pi);return te(n,At(Yu(n),t))}var r=ir(t[0],t[1],3);return re(n,function(n,t,e){return!r(n,t,e)})}),Ma=hu(function(n,t){return null==n?{}:"function"==typeof t[0]?re(n,ir(t[0],t[1],3)):te(n,Et(t))}),Ka=vr(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Va=vr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Ya=Rr(),Ga=Rr(!0);8!=xo(Nn+"08")&&(fi=function(n,t,r){return(r?Jr(n,t,r):null==t)?t=0:t&&(t=+t),n=pi(n),xo(n,t||(Cn.test(n)?16:10))});var Ja=vr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Xa=vr(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Za=hu(function(n,t){try{return n.apply(b,t)}catch(r){return ku(r)?r:new $i(r)}}),Ha=hu(function(n,t){return function(r){return Vr(r,n,t)}}),Qa=hu(function(n,t){return function(r){return Vr(n,r,t)}}),nf=yr(mu,jo),tf=yr(Lu,Oo);return Y.prototype=Z.prototype,Q.prototype=Uo(Z.prototype),Q.prototype.constructor=Q,Dn.prototype=Uo(Z.prototype),Dn.prototype.constructor=Dn,Yn.prototype["delete"]=Gn,Yn.prototype.get=Jn,Yn.prototype.has=Xn,Yn.prototype.set=Zn,Hn.prototype.push=rt,cu.Cache=Yn,Y.after=ou,Y.ary=au,Y.assign=Wa,Y.at=ta,Y.before=fu,Y.bind=_a,Y.bindAll=ga,Y.bindKey=ya,Y.callback=di,Y.chain=Ne,Y.chunk=ce,Y.compact=se,Y.constant=mi,Y.countBy=ra,Y.create=qu,Y.curry=da,Y.curryRight=ma,Y.debounce=lu,Y.defaults=Sa,Y.defer=wa,Y.delay=ba,Y.difference=Mo,Y.drop=pe,Y.dropRight=he,Y.dropRightWhile=ve,Y.dropWhile=_e,Y.fill=ge,Y.filter=Ye,Y.flatten=de,Y.flattenDeep=me,Y.flow=xa,Y.flowRight=Aa,Y.forEach=ia,Y.forEachRight=oa,Y.forIn=$a,Y.forInRight=Fa,Y.forOwn=Na,Y.forOwnRight=La,Y.functions=Du,Y.groupBy=aa,Y.indexBy=fa,Y.initial=be,Y.intersection=Yo,Y.invert=Vu,Y.invoke=la,Y.keys=Ba,Y.keysIn=Yu,Y.map=Xe,Y.mapKeys=za,Y.mapValues=Pa,Y.matches=bi,Y.matchesProperty=xi,Y.memoize=cu,Y.merge=qa,Y.method=Ha,Y.methodOf=Qa,Y.mixin=Ai,Y.negate=su,Y.omit=Da,Y.once=pu,Y.pairs=Gu,Y.partial=ja,Y.partialRight=Oa,Y.partition=ca,Y.pick=Ma,Y.pluck=Ze,Y.property=Ri,Y.propertyOf=ki,Y.pull=je,Y.pullAt=Go,Y.range=Ii,Y.rearg=Ra,Y.reject=He,Y.remove=Oe,Y.rest=Re,Y.restParam=hu,Y.set=Xu,Y.shuffle=nu,Y.slice=ke,Y.sortBy=eu,Y.sortByAll=ha,Y.sortByOrder=uu,Y.spread=vu,Y.take=Ie,Y.takeRight=Ee,Y.takeRightWhile=Ce,Y.takeWhile=We,Y.tap=Le,Y.throttle=_u,Y.thru=Be,Y.times=Ei,Y.toArray=zu,Y.toPlainObject=Pu,Y.transform=Zu,Y.union=Zo,Y.uniq=Se,Y.unzip=Te,Y.unzipWith=Ue,Y.values=Hu,Y.valuesIn=Qu,Y.where=iu,Y.without=Ho,Y.wrap=gu,Y.xor=$e,Y.zip=Qo,Y.zipObject=Fe,Y.zipWith=na,Y.backflow=Aa,Y.collect=Xe,Y.compose=Aa,Y.each=ia,Y.eachRight=oa,Y.extend=Wa,Y.iteratee=di,Y.methods=Du,Y.object=Fe,Y.select=Ye,Y.tail=Re,Y.unique=Se,Ai(Y,Y),Y.add=Wi,Y.attempt=Za,Y.camelCase=Ka,Y.capitalize=ri,Y.clone=yu,Y.cloneDeep=du,Y.deburr=ei,Y.endsWith=ui,Y.escape=ii,Y.escapeRegExp=oi,Y.every=Ve,Y.find=ea,Y.findIndex=Ko,Y.findKey=Ta,Y.findLast=ua,Y.findLastIndex=Vo,Y.findLastKey=Ua,Y.findWhere=Ge,Y.first=ye,Y.get=Mu,Y.gt=mu,Y.gte=wu,Y.has=Ku,Y.identity=wi,Y.includes=Je,Y.indexOf=we,Y.inRange=ni,Y.isArguments=bu,Y.isArray=ka,Y.isBoolean=xu,Y.isDate=Au,Y.isElement=ju,Y.isEmpty=Ou,Y.isEqual=Ru,Y.isError=ku,Y.isFinite=Ia,Y.isFunction=Ea,Y.isMatch=Eu,Y.isNaN=Cu,Y.isNative=Wu,Y.isNull=Su,Y.isNumber=Tu,Y.isObject=Iu,Y.isPlainObject=Ca,Y.isRegExp=Uu,Y.isString=$u,Y.isTypedArray=Fu,Y.isUndefined=Nu,Y.kebabCase=Va,Y.last=xe,Y.lastIndexOf=Ae,Y.lt=Lu,Y.lte=Bu,Y.max=nf,Y.min=tf,Y.noConflict=ji,Y.noop=Oi,Y.now=va,Y.pad=ai,Y.padLeft=Ya,Y.padRight=Ga,Y.parseInt=fi,Y.random=ti,Y.reduce=sa,Y.reduceRight=pa,Y.repeat=li,Y.result=Ju,Y.runInContext=w,Y.size=tu,Y.snakeCase=Ja,Y.some=ru,Y.sortedIndex=Jo,Y.sortedLastIndex=Xo,Y.startCase=Xa,Y.startsWith=ci,Y.sum=Si,Y.template=si,Y.trim=pi,Y.trimLeft=hi,Y.trimRight=vi,Y.trunc=_i,Y.unescape=gi,Y.uniqueId=Ci,Y.words=yi,Y.all=Ve,Y.any=ru,Y.contains=Je,Y.eq=Ru,Y.detect=ea,Y.foldl=sa,Y.foldr=pa,Y.head=ye,Y.include=Je,Y.inject=sa,Ai(Y,function(){var n={};return Wt(Y,function(t,r){Y.prototype[r]||(n[r]=t)}),n}(),!1),Y.sample=Qe,Y.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Qe(t,n)}):Qe(this.value())},Y.VERSION=x,ut(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){Y[n].placeholder=Y}),ut(["dropWhile","filter","map","takeWhile"],function(n,t){var r=t!=L,e=t==F;Dn.prototype[n]=function(n,u){var i=this.__filtered__,o=i&&e?new Dn(this):this.clone(),a=o.__iteratees__||(o.__iteratees__=[]);return a.push({done:!1,count:0,index:0,iteratee:Nr(n,u,1),limit:-1,type:t}),o.__filtered__=i||r,o}}),ut(["drop","take"],function(n,t){var r=n+"While";Dn.prototype[n]=function(r){var e=this.__filtered__,u=e&&!t?this.dropWhile():this.clone();if(r=null==r?1:yo(eo(r)||0,0),e)t?u.__takeCount__=mo(u.__takeCount__,r):xe(u.__iteratees__).limit=r;else{var i=u.__views__||(u.__views__=[]);i.push({size:r,type:n+(u.__dir__<0?"Right":"")})}return u},Dn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Dn.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[r](n,t).reverse()}}),ut(["first","last"],function(n,t){var r="take"+(t?"Right":"");Dn.prototype[n]=function(){return this[r](1).value()[0]}}),ut(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");Dn.prototype[n]=function(){return this[r](1)}}),ut(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?Bt:Ri;Dn.prototype[n]=function(n){return this[r](e(n))}}),Dn.prototype.compact=function(){return this.filter(wi)},Dn.prototype.reject=function(n,t){return n=Nr(n,t,1),this.filter(function(t){return!n(t)})},Dn.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=this;return 0>n?r=this.takeRight(-n):n&&(r=this.drop(n)),t!==b&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},Dn.prototype.toArray=function(){return this.drop(0)},Wt(Dn.prototype,function(n,t){var r=Y[t];if(r){var e=/^(?:filter|map|reject)|While$/.test(t),u=/^(?:first|last)$/.test(t);Y.prototype[t]=function(){var t=arguments,i=this.__chain__,o=this.__wrapped__,a=!!this.__actions__.length,f=o instanceof Dn,l=t[0],c=f||ka(o);c&&e&&"function"==typeof l&&1!=l.length&&(f=c=!1);var s=f&&!a;if(u&&!i)return s?n.call(o):r.call(Y,this.value());var p=function(n){var e=[n];return oo.apply(e,t),r.apply(Y,e)};if(c){var h=s?o:new Dn(this),v=n.apply(h,t);if(!u&&(a||v.__actions__)){var _=v.__actions__||(v.__actions__=[]);_.push({func:Be,args:[p],thisArg:Y})}return new Q(v,i)}return this.thru(p)}}}),ut(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(n){var t=(/^(?:replace|split)$/.test(n)?Ki:Di)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(n);Y.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Wt(Dn.prototype,function(n,t){var r=Y[t];if(r){var e=r.name,u=So[e]||(So[e]=[]);u.push({name:t,func:r})}}),So[Er(null,j).name]=[{name:"wrapper",func:null}],Dn.prototype.clone=Mn,Dn.prototype.reverse=Kn,Dn.prototype.value=Vn,Y.prototype.chain=ze,Y.prototype.commit=Pe,Y.prototype.plant=qe,Y.prototype.reverse=De,Y.prototype.toString=Me,Y.prototype.run=Y.prototype.toJSON=Y.prototype.valueOf=Y.prototype.value=Ke,Y.prototype.collect=Y.prototype.map,Y.prototype.head=Y.prototype.first,Y.prototype.select=Y.prototype.filter,Y.prototype.tail=Y.prototype.rest,Y}var b,x="3.9.3",A=1,j=2,O=4,R=8,k=16,I=32,E=64,C=128,W=256,S=30,T="...",U=150,$=16,F=0,N=1,L=2,B="Expected a function",z="__lodash_placeholder__",P="[object Arguments]",q="[object Array]",D="[object Boolean]",M="[object Date]",K="[object Error]",V="[object Function]",Y="[object Map]",G="[object Number]",J="[object Object]",X="[object RegExp]",Z="[object Set]",H="[object String]",Q="[object WeakMap]",nn="[object ArrayBuffer]",tn="[object Float32Array]",rn="[object Float64Array]",en="[object Int8Array]",un="[object Int16Array]",on="[object Int32Array]",an="[object Uint8Array]",fn="[object Uint8ClampedArray]",ln="[object Uint16Array]",cn="[object Uint32Array]",sn=/\b__p \+= '';/g,pn=/\b(__p \+=) '' \+/g,hn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vn=/&(?:amp|lt|gt|quot|#39|#96);/g,_n=/[&<>"'`]/g,gn=RegExp(vn.source),yn=RegExp(_n.source),dn=/<%-([\s\S]+?)%>/g,mn=/<%([\s\S]+?)%>/g,wn=/<%=([\s\S]+?)%>/g,bn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,xn=/^\w*$/,An=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,jn=/[.*+?^${}()|[\]\/\\]/g,On=RegExp(jn.source),Rn=/[\u0300-\u036f\ufe20-\ufe23]/g,kn=/\\(\\)?/g,In=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,En=/\w*$/,Cn=/^0[xX]/,Wn=/^\[object .+?Constructor\]$/,Sn=/^\d+$/,Tn=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Un=/($^)/,$n=/['\n\r\u2028\u2029\\]/g,Fn=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"+(?="+n+t+")|"+n+"?"+t+"|"+n+"+|[0-9]+","g")}(),Nn=" 	\f\ufeff\n\r\u2028\u2029",Ln=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],Bn=-1,zn={};zn[tn]=zn[rn]=zn[en]=zn[un]=zn[on]=zn[an]=zn[fn]=zn[ln]=zn[cn]=!0,zn[P]=zn[q]=zn[nn]=zn[D]=zn[M]=zn[K]=zn[V]=zn[Y]=zn[G]=zn[J]=zn[X]=zn[Z]=zn[H]=zn[Q]=!1;var Pn={};Pn[P]=Pn[q]=Pn[nn]=Pn[D]=Pn[M]=Pn[tn]=Pn[rn]=Pn[en]=Pn[un]=Pn[on]=Pn[G]=Pn[J]=Pn[X]=Pn[H]=Pn[an]=Pn[fn]=Pn[ln]=Pn[cn]=!0,Pn[K]=Pn[V]=Pn[Y]=Pn[Z]=Pn[Q]=!1;var qn={leading:!1,maxWait:0,trailing:!1},Dn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Mn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Kn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Vn={"function":!0,object:!0},Yn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gn=Vn[typeof exports]&&exports&&!exports.nodeType&&exports,Jn=Vn[typeof module]&&module&&!module.nodeType&&module,Xn=Gn&&Jn&&"object"==typeof global&&global&&global.Object&&global,Zn=Vn[typeof self]&&self&&self.Object&&self,Hn=Vn[typeof window]&&window&&window.Object&&window,Qn=Jn&&Jn.exports===Gn&&Gn,nt=Xn||Hn!==(this&&this.window)&&Hn||Zn||this,tt=w();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(nt._=tt,define(function(){return tt})):Gn&&Jn?Qn?(Jn.exports=tt)._=tt:Gn._=tt:nt._=tt}).call(this);


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],3:[function(require,module,exports){
function DOMParser(t){this.options=t||{locator:{}}}function buildErrorHandler(t,e,n){function r(e){var r=t[e];if(!r)if(i)r=2==t.length?function(n){t(e,n)}:t;else for(var a=arguments.length;--a&&!(r=t[arguments[a]]););o[e]=r&&function(t){r(t+_locator(n))}||function(){}}if(!t){if(e instanceof DOMHandler)return e;t=e}var o={},i=t instanceof Function;return n=n||{},r("warning","warn"),r("error","warn","warning"),r("fatalError","warn","warning","error"),o}function DOMHandler(){this.cdata=!1}function position(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function _locator(t){return t?"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]":void 0}function _toString(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function appendElement(t,e){t.currentElement?t.currentElement.appendChild(e):t.document.appendChild(e)}if(DOMParser.prototype.parseFromString=function(t,e){var n=this.options,r=new XMLReader,o=n.domBuilder||new DOMHandler,i=n.errorHandler,a=n.locator,c=n.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),r.errorHandler=buildErrorHandler(i,o,a),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(l.nbsp="",l.copy="",c[""]="http://www.w3.org/1999/xhtml"),t?r.parse(t,c,l):r.errorHandler.error("invalid document source"),o.document},DOMHandler.prototype={startDocument:function(){this.document=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var o=this.document,i=o.createElementNS(t,n||e),a=r.length;appendElement(this,i),this.currentElement=i,this.locator&&position(this.locator,i);for(var c=0;a>c;c++){var t=r.getURI(c),l=r.getValue(c),n=r.getQName(c),s=o.createAttributeNS(t,n);s.getOffset&&position(s.getOffset(1),s),s.value=s.nodeValue=l,i.setAttributeNode(s)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.document.createProcessingInstruction(t,e);this.locator&&position(this.locator,n),appendElement(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=_toString.apply(this,arguments),this.currentElement&&t){if(this.cdata){var r=this.document.createCDATASection(t);this.currentElement.appendChild(r)}else{var r=this.document.createTextNode(t);this.currentElement.appendChild(r)}this.locator&&position(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=_toString.apply(this,arguments);var r=this.document.createComment(t);this.locator&&position(this.locator,r),appendElement(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.document.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(t,e,n);this.locator&&position(this.locator,o),appendElement(this,o)}},warning:function(t){console.warn(t,_locator(this.locator))},error:function(t){console.error(t,_locator(this.locator))},fatalError:function(t){throw console.error(t,_locator(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){DOMHandler.prototype[t]=function(){return null}}),"function"==typeof require){var XMLReader=require("./sax").XMLReader,DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer,exports.DOMParser=DOMParser}


},{"./dom":4,"./sax":5}],4:[function(require,module,exports){
function copy(e,t){for(var n in e)t[n]=e[n]}function _extends(e,t){function n(){}var o=e.prototype;if(Object.create){var i=Object.create(t.prototype);o.__proto__=i}o instanceof t||(n.prototype=t.prototype,n=new n,copy(o,n),e.prototype=o=n),o.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),o.constructor=e)}function DOMException(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);__set__(e,"length",n.length),copy(n,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,o){if(o?t[_findNodeIndex(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(o&&_onRemoveAttribute(i,e,o),_onAddAttribute(i,e,n))}}function _removeNamedNode(e,t,n){var o=_findNodeIndex(t,n);if(!(o>=0))throw DOMException(NOT_FOUND_ERR,new Error);for(var i=t.length-1;i>o;)t[o]=t[++o];if(t.length=i,e){var r=e.ownerDocument;r&&(_onRemoveAttribute(r,e,n),n.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do if(_visitNode(e,t))return!0;while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,n){e&&e._inc++;var o=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==o&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function _onRemoveAttribute(e,t,n,o){e&&e._inc++;var i=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==i&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var i=t.firstChild,r=0;i;)o[r++]=i,i=i.nextSibling;o.length=r}}}function _removeChild(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var i=t.firstChild;if(null==i)return t;var r=t.lastChild}else i=r=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,r.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=r:n.previousSibling=r;do i.parentNode=e;while(i!==r&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var n=t.parentNode;if(n){var o=e.lastChild;n.removeChild(t);var o=e.lastChild}var o=e.lastChild;return t.parentNode=e,t.previousSibling=o,t.nextSibling=null,o?o.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function serializeToString(e,t){switch(e.nodeType){case ELEMENT_NODE:var n=e.attributes,o=n.length,i=e.firstChild,r=e.tagName,a=htmlns===e.namespaceURI;t.push("<",r);for(var s=0;o>s;s++)serializeToString(n.item(s),t,a);if(i||a&&!/^(?:meta|link|img|br|hr|input)$/i.test(r)){if(t.push(">"),a&&/^script$/i.test(r))i&&t.push(i.data);else for(;i;)serializeToString(i,t),i=i.nextSibling;t.push("</",r,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var i=e.firstChild;i;)serializeToString(i,t),i=i.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("<!--",e.data,"-->");case DOCUMENT_TYPE_NODE:var u=e.publicId,d=e.systemId;if(t.push("<!DOCTYPE ",e.name),u)t.push(' PUBLIC "',u),d&&"."!=d&&t.push('" "',d),t.push('">');else if(d&&"."!=d)t.push(' SYSTEM "',d,'">');else{var c=e.internalSubset;c&&t.push(" [",c,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,n){var o;switch(t.nodeType){case ELEMENT_NODE:o=t.cloneNode(!1),o.ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:n=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,n)for(var i=t.firstChild;i;)o.appendChild(importNode(e,i,n)),i=i.nextSibling;return o}function cloneNode(e,t,n){var o=new t.constructor;for(var i in t){var r=t[i];"object"!=typeof r&&r!=o[i]&&(o[i]=r)}switch(t.childNodes&&(o.childNodes=new NodeList),o.ownerDocument=e,o.nodeType){case ELEMENT_NODE:var a=t.attributes,s=o.attributes=new NamedNodeMap,u=a.length;s._ownerElement=o;for(var d=0;u>d;d++)o.setAttributeNode(cloneNode(e,a.item(d),!0));break;case ATTRIBUTE_NODE:n=!0}if(n)for(var c=t.firstChild;c;)o.appendChild(cloneNode(e,c,n)),c=c.nextSibling;return o}function __set__(e,t,n){e[t]=n}function getTextContent(e){switch(e.nodeType){case 1:case 11:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return n&&(!t||t in n)?!0:!1},createDocument:function(e,t,n){var o=new Document;if(o.doctype=n,n&&o.appendChild(n),o.implementation=this,o.childNodes=new NodeList,t){var i=o.createElementNS(e,t);o.appendChild(i)}return o},createDocumentType:function(e,t,n){var o=new DocumentType;return o.name=e,o.nodeName=e,o.publicId=t,o.systemId=n,o}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(n[o]==e)return o;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,function(n){return 1==n.nodeType&&n.getAttribute("id")==e?(t=n,!0):void 0}),t},createElement:function(e){var t=new Element;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList;var n=t.attributes=new NamedNodeMap;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,o=t.split(":"),i=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Attr,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,function(t){var n=[];return _visitNode(t,function(o){o===t||o.nodeType!=ELEMENT_NODE||"*"!==e&&o.tagName!=e||n.push(o)}),n})},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,function(n){var o=[];return _visitNode(n,function(i){i===n||i.nodeType!==ELEMENT_NODE||i.namespaceURI!==e||"*"!==t&&i.localName!=t||o.push(i)}),o})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ExceptionMessage[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var o=this.data.substring(0,e),i=this.data.substring(e+t);n=o+n+i,this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e){var t=[];return serializeToString(e,t),t.join("")},Node.prototype.toString=function(){return XMLSerializer.prototype.serializeToString(this)};try{Object.defineProperty&&(Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=value,this.nodeValue=e}}}),__set__=function(e,t,n){e["$$"+t]=n})}catch(e){}"function"==typeof require&&(exports.DOMImplementation=DOMImplementation,exports.XMLSerializer=XMLSerializer);


},{}],5:[function(require,module,exports){
function XMLReader(){}function parse(e,t,r,a,n){function s(e){if(e>65535){e-=65536;var t=55296+(e>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}function i(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?s(parseInt(t.substr(1).replace("x","0x"))):(n.error("entity not found:"+e),e)}function c(t){var r=e.substring(S,t).replace(/&#?\w+;/g,i);m&&o(S),a.characters(r,0,t-S),S=t}function o(t,r){for(;t>=l&&(r=f.exec(e));)u=r.index,l=u+r[0].length,m.lineNumber++;m.columnNumber=t-u+1}for(var u=0,l=0,f=/.+(?:\r\n?|\n)|.*$/g,m=a.locator,p=[{currentNSMap:t}],d={},S=0;;){var _=e.indexOf("<",S);if(0>_){if(!e.substr(S).match(/^\s*$/)){var h=a.document,g=h.createTextNode(e.substr(S));h.appendChild(g),a.currentElement=g}return}switch(_>S&&c(_),e.charAt(_+1)){case"/":var w=e.indexOf(">",_+3),b=e.substring(_+2,w),v=p.pop(),x=v.localNSMap;if(v.tagName!=b&&n.fatalError("end tag name: "+b+" is not match the current start tagName:"+v.tagName),a.endElement(v.uri,v.localName,b),x)for(var T in x)a.endPrefixMapping(T);w++;break;case"?":m&&o(_),w=parseInstruction(e,_,a);break;case"!":m&&o(_),w=parseDCC(e,_,a,n);break;default:try{m&&o(_);var N=new ElementAttributes,w=parseElementStartPart(e,_,N,i,n),E=N.length;if(E&&m){for(var A=copyLocator(m,{}),_=0;E>_;_++){var C=N[_];o(C.offset),C.offset=copyLocator(m,{})}copyLocator(A,m)}!N.closed&&fixSelfClosed(e,w,N.tagName,d)&&(N.closed=!0,r.nbsp||n.warning("unclosed xml attribute")),appendElement(N,a,p),"http://www.w3.org/1999/xhtml"!==N.uri||N.closed?w++:w=parseHtmlSpecialContent(e,w,N.tagName,i,a)}catch(F){n.error("element parse error: "+F),w=-1}}0>w?c(_+1):S=w}}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,r,a,n){for(var s,i,c=++t,o=S_TAG;;){var u=e.charAt(c);switch(u){case"=":if(o===S_ATTR)s=e.slice(t,c),o=S_EQ;else{if(o!==S_ATTR_S)throw new Error("attribute equal must after attrName");o=S_EQ}break;case"'":case'"':if(o===S_EQ){if(t=c+1,c=e.indexOf(u,t),!(c>0))throw new Error("attribute value no end '"+u+"' match");i=e.slice(t,c).replace(/&#?\w+;/g,a),r.add(s,i,t-1),o=S_E}else{if(o!=S_V)throw new Error('attribute value must after "="');i=e.slice(t,c).replace(/&#?\w+;/g,a),r.add(s,i,t),n.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=c+1,o=S_E}break;case"/":switch(o){case S_TAG:r.setTagName(e.slice(t,c));case S_E:case S_S:case S_C:o=S_C,r.closed=!0;case S_V:case S_ATTR:case S_ATTR_S:break;default:throw new Error("attribute invalid close char('/')")}break;case"":n.error("unexpected end of input");case">":switch(o){case S_TAG:r.setTagName(e.slice(t,c));case S_E:case S_S:case S_C:break;case S_V:case S_ATTR:i=e.slice(t,c),"/"===i.slice(-1)&&(r.closed=!0,i=i.slice(0,-1));case S_ATTR_S:o===S_ATTR_S&&(i=s),o==S_V?(n.warning('attribute "'+i+'" missed quot(")!!'),r.add(s,i.replace(/&#?\w+;/g,a),t)):(n.warning('attribute "'+i+'" missed value!! "'+i+'" instead!!'),r.add(i,i,t));break;case S_EQ:throw new Error("attribute value missed!!")}return c;case"":u=" ";default:if(" ">=u)switch(o){case S_TAG:r.setTagName(e.slice(t,c)),o=S_S;break;case S_ATTR:s=e.slice(t,c),o=S_ATTR_S;break;case S_V:var i=e.slice(t,c).replace(/&#?\w+;/g,a);n.warning('attribute "'+i+'" missed quot(")!!'),r.add(s,i,t);case S_E:o=S_S}else switch(o){case S_ATTR_S:n.warning('attribute "'+s+'" missed value!! "'+s+'" instead!!'),r.add(s,s,t),t=c,o=S_ATTR;break;case S_E:n.warning('attribute space is required"'+s+'"!!');case S_S:o=S_ATTR,t=c;break;case S_EQ:o=S_V,t=c;break;case S_C:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function appendElement(e,t,r){for(var a=e.tagName,n=null,s=r[r.length-1].currentNSMap,i=e.length;i--;){var c=e[i],o=c.qName,u=c.value,l=o.indexOf(":");if(l>0)var f=c.prefix=o.slice(0,l),m=o.slice(l+1),p="xmlns"===f&&m;else m=o,f=null,p="xmlns"===o&&"";c.localName=m,p!==!1&&(null==n&&(n={},_copy(s,s={})),s[p]=n[p]=u,c.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,u))}for(var i=e.length;i--;){c=e[i];var f=c.prefix;f&&("xml"===f&&(c.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==f&&(c.uri=s[f]))}var l=a.indexOf(":");l>0?(f=e.prefix=a.slice(0,l),m=e.localName=a.slice(l+1)):(f=null,m=e.localName=a);var d=e.uri=s[f||""];if(t.startElement(d,m,a,e),e.closed){if(t.endElement(d,m,a),n)for(f in n)t.endPrefixMapping(f)}else e.currentNSMap=s,e.localNSMap=n,r.push(e)}function parseHtmlSpecialContent(e,t,r,a,n){if(/^(?:script|textarea)$/i.test(r)){var s=e.indexOf("</"+r+">",t),i=e.substring(t+1,s);if(/[&<]/.test(i))return/^script$/i.test(r)?(n.characters(i,0,i.length),s):(i=i.replace(/&#?\w+;/g,a),n.characters(i,0,i.length),s)}return t+1}function fixSelfClosed(e,t,r,a){var n=a[r];return null==n&&(n=a[r]=e.lastIndexOf("</"+r+">")),t>n}function _copy(e,t){for(var r in e)t[r]=e[r]}function parseDCC(e,t,r,a){var n=e.charAt(t+2);switch(n){case"-":if("-"===e.charAt(t+3)){var s=e.indexOf("-->",t+4);return s>t?(r.comment(e,t+4,s-t-4),s+3):(a.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){var s=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,s-t-9),r.endCDATA(),s+3}var i=split(e,t),c=i.length;if(c>1&&/!doctype/i.test(i[0][0])){var o=i[1][0],u=c>3&&/^public$/i.test(i[2][0])&&i[3][0],l=c>4&&i[4][0],f=i[c-1];return r.startDTD(o,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),f.index+f[0].length}}return-1}function parseInstruction(e,t,r){var a=e.indexOf("?>",t);if(a){var n=e.substring(t,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){n[0].length;return r.processingInstruction(n[1],n[2]),a+2}return-1}return-1}function ElementAttributes(e){}function _set_proto_(e,t){return e.__proto__=t,e}function split(e,t){var r,a=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(e);r=n.exec(e);)if(a.push(r),r[1])return a}var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"-\\ux203F-]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_S=2,S_EQ=3,S_V=4,S_E=5,S_S=6,S_C=7;XMLReader.prototype={parse:function(e,t,r){var a=this.domBuilder;a.startDocument(),_copy(t,t={}),parse(e,t,r,a,this.errorHandler),a.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!tagNamePattern.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!tagNamePattern.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getOffset:function(e){return this[e].offset},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(e,t){function r(){}r.prototype=t,r=new r;for(t in e)r[t]=e[t];return r}),"function"==typeof require&&(exports.XMLReader=XMLReader);


},{}],6:[function(require,module,exports){
"use strict";var Color=require("../objects/color"),vg={};vg.isDrawable=function(o){return Array.isArray(o)&&(o=o[0]),o?"function"==typeof o.draw?!0:void 0!==o.x&&void 0!==o.y?!0:void 0!==o.r&&void 0!==o.g&&void 0!==o.b?!0:!1:!1},vg.drawPoints=function(o,r){var t,i;for(o.fillStyle="blue",o.beginPath(),i=0;i<r.length;i+=1)t=r[i],o.moveTo(t.x,t.y),o.arc(t.x,t.y,2,0,2*Math.PI,!1);o.fill()},vg.drawColoredPoints=function(o,r){for(var t=0,i=r.length;i>t;t+=1){var e=r[t];o.fillStyle=Color.toCSS(e),o.fillRect(e.x-2,e.y-2,4,4)}},vg.drawRectangles=function(o,r){var t,i;for(o.save(),t=0;t<r.length;t+=1)i=r[t],o.strokeStyle="black",o.strokeWidth=1,o.rect(i.x,i.y,i.width,i.height),o.stroke();o.restore()},vg.drawColors=function(o,r){var t,i;for(o.save(),t=0;t<r.length;t+=1)i=r[t],o.fillStyle=Color.toCSS(i),o.fillRect(0,0,30,30),o.translate(30,0);o.restore()},vg.draw=function(o,r){var t=r,i=!1;if(Array.isArray(r)&&(t=r[0],i=!0),t)if("function"==typeof t.draw)if(i)for(var e=0,v=r.length;v>e;e+=1)vg.draw(o,r[e]);else r.draw(o);else void 0!==t.x&&void 0!==t.y?void 0!==t.r&&void 0!==t.g&&void 0!==t.b?vg.drawColoredPoints(o,i?r:[r]):void 0!==t.width&&void 0!==t.height?vg.drawRectangles(o,i?r:[r]):vg.drawPoints(o,i?r:[r]):void 0!==t.r&&void 0!==t.g&&void 0!==t.b&&vg.drawColors(o,i?r:[r])},vg.toSVG=function(o,r){r=r||{};var t=r.header===!0,i=void 0!==r.x?r.x:0,e=void 0!==r.y?r.y:0,v=void 0!==r.width?r.width:500,n=void 0!==r.height?r.height:500,l="";if(o)if("function"==typeof o.toSVG)l=o.toSVG();else if(Array.isArray(o)){l="<g>\n";for(var d=0,a=o.length;a>d;d+=1)l+=vg.toSVG(o[d])+"\n";l+="</g>\n"}return t&&(l='<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="'+i+'" y="'+e+'" width="'+v+'px" height="'+n+'px" viewBox="'+i+" "+e+" "+v+" "+n+'">\n'+l+"</svg>\n"),l},module.exports=vg;


},{"../objects/color":9}],7:[function(require,module,exports){
"use strict";var _=require("lodash"),ClipperLib=require("js-clipper"),bezier=require("../util/bezier"),geo=require("../util/geo"),math=require("../util/math"),random=require("../util/random"),Color=require("../objects/color"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),Rect=require("../objects/rect"),Transform=require("../objects/transform"),Transformable=require("../objects/transformable"),vg={};vg.HORIZONTAL="horizontal",vg.VERTICAL="vertical",vg.EAST="e",vg.WEST="w",vg.NORTH="n",vg.SOUTH="s",vg.bounds=function(e){var r,n,t;if(e){if("function"==typeof e.bounds)return e.bounds();if(void 0!==e.x&&void 0!==e.y)return void 0!==e.width&&void 0!==e.height?new Rect(e.x,e.y,e.width,e.height):new Rect(e.x,e.y,0,0);if(void 0!==e.r&&void 0!==e.g&&void 0!==e.b)return new vg.Rect(0,0,30,30);if(Array.isArray(e)){if(r=null,t=e.length,t>0&&void 0!==e[0].r&&void 0!==e[0].g&&void 0!==e[0].b)return new Rect(0,0,30*e.length,30);for(n=0;t>n;n+=1)r=r?r.unite(vg.bounds(e[n])):vg.bounds(e[n]);return r||new Rect}return new Rect}return new Rect},vg.makeCenteredRect=function(e,r,n,t){var o=e-n/2,i=r-t/2;return new Rect(o,i,n,t)},vg.makePoint=function(e,r){return new Point(e,r)},vg.makeRect=function(e,r,n,t){return new Rect(e,r,n,t)},vg.merge=function(){return new Group(_.reject(_.flatten(arguments,!0),_.isEmpty))},vg.combinePaths=function(e){return Path.combine(e)},vg.shapePoints=vg.toPoints=function(e){if(!e)return[];if(e.commands)return _.map(_.filter(e.commands,function(e){return void 0!==e.x?!0:!1}),function(e){return new Point(e.x,e.y)});var r,n=[];for(r=0;r<e.shapes.length;r+=1)n=n.concat(vg.shapePoints(e.shapes[r]));return n},vg.colorize=function(e,r,n,t){return e?e.colorize(r,n,t):void 0},vg.translate=function(e,r){return e.translate?e.translate(r):Transformable.translate.apply(e,[r])},vg.scale=function(e,r,n){return e.scale?e.scale(r,n):Transformable.scale.apply(e,[r,n])},vg.rotate=function(e,r,n){return e.rotate?e.rotate(r,n):Transformable.rotate.apply(e,[r,n])},vg.skew=function(e,r,n){return e.skew?e.skew(r,n):Transformable.skew.apply(e,[r,n])},vg.copy=function(e,r,n,t,o,i){var a,s,u,h,c=[],f=0,p=0,v=0,l=1,g=1;for(a=0;r>a;a+=1){for(s=new Transform,u=0;u<n.length;u+=1)h=n[u],"t"===h?s=s.translate(f,p):"r"===h?s=s.rotate(v):"s"===h&&(s=s.scale(l,g));Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y?c=c.concat(s.transformShape(e)):c.push(s.transformShape(e)),f+=t.x,p+=t.y,v+=o,l+=i.x,g+=i.y}return c},vg.fit=function(e,r,n,t,o){if(e){o=void 0!==o?o:!1;var i,a,s,u=vg.bounds(e),h=u.x,c=u.y,f=u.width,p=u.height;return f=f>1e-12?f:0,p=p>1e-12?p:0,i=new Transform,i=i.translate(r.x,r.y),o?(a=f>0?n/f:1,s=p>0?t/p:1):(a=f>0?n/f:Number.MAX_VALUE,s=p>0?t/p:Number.MAX_VALUE,a=s=Math.min(a,s)),i=i.scale(a,s),i=i.translate(-f/2-h,-p/2-c),i.transformShape(e)}},vg.fitTo=function(e,r,n){if(e&&r){var t=vg.bounds(r),o=t.x,i=t.y,a=t.width,s=t.height;return vg.fit(e,{x:o+a/2,y:i+s/2},a,s,n)}},vg.mirror=function(e,r,n,t){if(e){n=n||new Point,0!==r&&(r=r||90);var o=function(e,t){var o=geo.distance(e,t,n.x,n.y),i=geo.angle(e,t,n.x,n.y),a=geo.coordinates(n.x,n.y,180+r,o*Math.cos(math.radians(i-r)));return o=geo.distance(e,t,a.x,a.y),i=geo.angle(e,t,a.x,a.y),a=geo.coordinates(e,t,i,2*o),new Point(a.x,a.y)},i=function(e){for(var r,n,t,i=new Path([],e.fill,e.stroke,e.strokeWidth),a=0;a<e.commands.length;a+=1){var s=e.commands[a];if(s.type===bezier.MOVETO)r=o(s.x,s.y),i.moveTo(r.x,r.y);else if(s.type===bezier.LINETO)r=o(s.x,s.y),i.lineTo(r.x,r.y);else if(s.type===bezier.CURVETO)r=o(s.x,s.y),n=o(s.x1,s.y1),t=o(s.x2,s.y2),i.curveTo(n.x,n.y,t.x,t.y,r.x,r.y);else{if(s.type!==bezier.CLOSE)throw new Error("Unknown command "+s);i.close()}}return i},a=function(e){return _.map(e,function(e){return o(e.x,e.y)})},s=function(e){var r=_.map(e.shapes,function(e){return u(e)});return new Group(r)},u=function(e){if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y)return a(e);var r=e.shapes?s:i;return r(e)},h=u(e);return t?Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y?e.concat(h):new Group([e,h]):h}},vg.pathLength=function(e,r){var n=20;return r&&r.precision&&(n=r.precision),e.length(n)},vg.resampleByLength=function(e,r){return e?e.resampleByLength(r):void 0},vg.resampleByAmount=function(e,r,n){return e?e.resampleByAmount(r,n):void 0},vg.wigglePoints=function(e,r,n){n=void 0!==n?n:Math.random();var t=random.generator(n);void 0===r?r={x:10,y:10}:"number"==typeof r&&(r={x:r,y:r});var o=function(e){var n,i,a;if(e.commands){var s=new Path([],e.fill,e.stroke,e.strokeWidth);for(n=0;n<e.commands.length;n+=1){i=(t(0,1)-.5)*r.x*2,a=(t(0,1)-.5)*r.y*2;var u=e.commands[n];u.type===bezier.MOVETO?s.moveTo(u.x+i,u.y+a):u.type===bezier.LINETO?s.lineTo(u.x+i,u.y+a):u.type===bezier.CURVETO?s.curveTo(u.x1,u.y1,u.x2,u.y2,u.x+i,u.y+a):u.type===bezier.CLOSE&&s.close()}return s}if(e.shapes)return new Group(_.map(e.shapes,o));if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){var h=[];for(n=0;n<e.length;n+=1)i=(t(0,1)-.5)*r.x*2,a=(t(0,1)-.5)*r.y*2,h.push(new Point(e[n].x+i,e[n].y+a));return h}return _.map(e,o)};return o(e)},vg.wiggleContours=function(e,r,n){n=void 0!==n?n:Math.random();var t=random.generator(n);void 0===r?r={x:10,y:10}:"number"==typeof r&&(r={x:r,y:r});var o=function(e){if(e.commands){var n,i,a,s,u=e.contours(),h=[];for(n=0;n<u.length;n+=1)i=(t(0,1)-.5)*r.x*2,a=(t(0,1)-.5)*r.y*2,s=(new Transform).translate(i,a),h=h.concat(s.transformShape(new Path(u[n])).commands);return new Path(h,e.fill,e.stroke,e.strokeWidth)}return e.shapes?new Group(_.map(e.shapes,o)):_.map(e,o)};return o(e)},vg.wigglePaths=function(e,r,n){n=void 0!==n?n:Math.random();var t=random.generator(n);void 0===r?r={x:10,y:10}:"number"==typeof r&&(r={x:r,y:r});var o=function(e){if(e.commands)return e;if(e.shapes)return new Group(o(e.shapes));if(Array.isArray(e)){for(var n,i,a,s,u=[],h=0;h<e.length;h+=1)n=e[h],n.commands?(i=(t(0,1)-.5)*r.x*2,a=(t(0,1)-.5)*r.y*2,s=(new Transform).translate(i,a),u.push(s.transformShape(n))):n.shapes&&u.push(o(n));return u}};return o(e)},vg.scatterPoints=function(e,r,n){if(e){n=void 0!==n?n:Math.random();var t,o,i,a,s,u=random.generator(n),h=e.bounds(),c=h.x,f=h.y,p=h.width,v=h.height,l=e.contours(),g=[],y=[];for(t=0;t<l.length;t++){var d=new Path(l[t]),m=d.commands.length,x=5;g.push(d.points(m*x,{closed:!0}))}for(t=0;r>t;t+=1)for(i=100;i>0;){var w=0;for(a=c+u(0,1)*p,s=f+u(0,1)*v,o=0;o<g.length;o++)geo.pointInPolygon(g[o],a,s)&&(w+=1);if(w%2){y.push(new Point(a,s));break}i-=1}return y}},vg.connectPoints=function(e,r){if(e){for(var n=new Path,t=0;t<e.length;t+=1){var o=e[t];0===t?n.moveTo(o.x,o.y):n.lineTo(o.x,o.y)}return r&&n.close(),n.fill=null,n.stroke=Color.BLACK,n}},vg.align=function(e,r,n,t){if(e){var o,i,a,s=r.x,u=r.y,h=vg.bounds(e);return o="left"===n?s-h.x:"right"===n?s-h.x-h.width:"center"===n?s-h.x-h.width/2:0,i="top"===t?u-h.y:"bottom"===t?u-h.y-h.height:"middle"===t?u-h.y-h.height/2:0,a=(new Transform).translate(o,i),a.transformShape(e)}},vg.snap=function(e,r,n,t){if(e){n=void 0!==n?n:1,t=t||Point.ZERO;var o=function(e){if(e.commands){for(var i=new Path([],e.fill,e.stroke,e.strokeWidth),a=0;a<e.commands.length;a+=1){var s=e.commands[a];if(s.type===bezier.MOVETO||s.type===bezier.LINETO||s.type===bezier.CURVETO){var u=math.snap(s.x+t.x,r,n)-t.x,h=math.snap(s.y+t.y,r,n)-t.y;if(s.type===bezier.MOVETO)i.moveTo(u,h);else if(s.type===bezier.LINETO)i.lineTo(u,h);else if(s.type===bezier.CURVETO){var c=math.snap(s.x1+t.x,r,n)-t.x,f=math.snap(s.y1+t.y,r,n)-t.y,p=math.snap(s.x2+t.x,r,n)-t.x,v=math.snap(s.y2+t.y,r,n)-t.y;i.curveTo(c,f,p,v,u,h)}}else{if(s.type!==bezier.CLOSE)throw new Error("Invalid path command "+s);i.close()}}return i}return e.shapes?new Group(_.map(e.shapes,o)):Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y?_.map(e,function(e){var o=math.snap(e.x+t.x,r,n)-t.x,i=math.snap(e.y+t.y,r,n)-t.y;return new Point(o,i)}):_.map(e,o)};return o(e)}},vg.deletePoints=function(e,r,n){var t=function(e){var o,i,a,s=[],u=[];if(e.commands){for(o=0;o<e.commands.length;o+=1)i=e.commands[o],(void 0===i.x||!n&&r.contains(i.x,i.y)||n&&!r.contains(i.x,i.y))&&s.push(i);return new Path(s,e.fill,e.stroke,e.strokeWidth)}if(e.shapes)return new Group(_.map(e.shapes,t));if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){for(o=0;o<e.length;o+=1)a=e[o],(!n&&r.contains(a.x,a.y)||n&&!r.contains(a.x,a.y))&&u.push(a);return u}return _.map(e,t)};return t(e)},vg.deletePaths=function(e,r,n){var t=function(e){if(e.commands)return null;if(e.shapes)return new Group(t(e.shapes));if(Array.isArray(e)){for(var o,i,a,s,u,h=[],c=e,f=0;f<c.length;f+=1)if(i=c[f],i.commands){for(a=!1,o=0;o<i.commands.length;o+=1)if(s=i.commands[o],void 0!==s.x&&r.contains(s.x,s.y)){a=!0;break}a!==n&&h.push(i)}else i.shapes&&(u=t(i),0!==u.length&&h.push(u));return h}};return t(e)},vg["delete"]=function(e,r,n,t){if(null===e||null===r)return null;if("points"===n)return vg.deletePoints(e,r,t);if("paths"===n)return vg.deletePaths(e,r,t);throw new Error("Invalid scope.")},vg.pointOnPath=function(e,r){if(e){e.shapes&&(e=new Path(vg.combinePaths(e))),r%=1,0>r&&(r=1+r);var n=e.point(r);return new Point(n.x,n.y)}},vg._x=function(e){return void 0!==e.x?e.x:e.bounds().x},vg._y=function(e){return void 0!==e.y?e.y:e.bounds().y},vg._angleToPoint=function(e){return function(r){if(void 0!==r.x&&void 0!==r.y)return geo.angle(r.x,r.y,e.x,e.y);var n=r.bounds().centerPoint();return geo.angle(n.x,n.y,e.x,e.y)}},vg._distanceToPoint=function(e){return function(r){if(void 0!==r.x&&void 0!==r.y)return geo.distance(r.x,r.y,e.x,e.y);var n=r.bounds().centerPoint();return geo.distance(n.x,n.y,e.x,e.y)}},vg.shapeSort=function(e,r,n){if(e){n=n||Point.ZERO;var t={x:vg._x,y:vg._y,angle:vg._angleToPoint(n),distance:vg._distanceToPoint(n)};if(r=t[r],void 0===r)return e;var o=e.slice(0);return o.sort(function(e,n){var t=r(e),o=r(n);return o>t?-1:t>o?1:0}),o}},vg.group=function(){return new Group(_.flatten(arguments))},vg.ungroup=function(e){if(e){if(e.shapes){var r,n,t=[];for(r=0;r<e.shapes.length;r+=1)n=e.shapes[r],n.commands?t.push(n):n.shapes&&(t=t.concat(vg.ungroup(n)));return t}return e.commands?[e]:[]}return[]},vg.centerPoint=function(e){if(!e)return Point.ZERO;var r=vg.bounds(e);return new Point(r.x+r.width/2,r.y+r.height/2)},vg.link=function(e,r,n){if(e&&r){var t=new Path,o=e.bounds(),i=r.bounds();if(n===vg.HORIZONTAL){var a=(i.x-(o.x+o.width))/2;t.moveTo(o.x+o.width,o.y),t.curveTo(o.x+o.width+a,o.y,i.x-a,i.y,i.x,i.y),t.lineTo(i.x,i.y+i.height),t.curveTo(i.x-a,i.y+i.height,o.x+o.width+a,o.y+o.height,o.x+o.width,o.y+o.height),t.close()}else{var s=(i.y-(o.y+o.height))/2;t.moveTo(o.x,o.y+o.height),t.curveTo(o.x,o.y+o.height+s,i.x,i.y-s,i.x,i.y),t.lineTo(i.x+i.width,i.y),t.curveTo(i.x+i.width,i.y-s,o.x+o.width,o.y+o.height+s,o.x+o.width,o.y+o.height),t.close()}return t}},vg.stack=function(e,r,n){if(!e)return[];if(e.length<=1)return e;var t,o,i,a,s=e[0].bounds(),u=[];return n=n||0,r===vg.EAST?(t=-(s.width/2),_.each(e,function(e){a=e.bounds(),i=(new Transform).translate(t-a.x,0),u.push(i.transformShape(e)),t+=a.width+n})):r===vg.WEST?(t=s.width/2,_.each(e,function(e){a=e.bounds(),i=(new Transform).translate(t+a.x,0),u.push(i.transformShape(e)),t-=a.width+n})):r===vg.NORTH?(o=s.height/2,_.each(e,function(e){a=e.bounds(),i=(new Transform).translate(0,o+a.y),u.push(i.transformShape(e)),o-=a.height+n})):r===vg.SOUTH&&(o=-(s.height/2),_.each(e,function(e){a=e.bounds(),i=(new Transform).translate(0,o-a.y),u.push(i.transformShape(e)),o+=a.height+n})),u},vg.colorLookup=function(e,r){switch(e=Color.parse(e),r){case"r":return e.r;case"g":return e.g;case"b":return e.b;case"a":return e.a;case"h":return e.h;case"s":return e.s;case"v":return e.v;default:throw new Error("Unknown component "+r)}},vg.compound=function(e,r,n){function t(e){var r,n,t,o,i,a=[];for(r=0;r<e.length;r+=1){for(n=[],t=e[r],o=0;o<t.length;o+=1)i=t[o],i.type!==bezier.CLOSE&&n.push({X:i.x,Y:i.y});a.push(n)}return a}var o={union:ClipperLib.ClipType.ctUnion,difference:ClipperLib.ClipType.ctDifference,intersection:ClipperLib.ClipType.ctIntersection,xor:ClipperLib.ClipType.ctXor};e.commands||(e=Path.combine(e)),r.commands||(r=Path.combine(r));var i=e.resampleByLength(1).contours(),a=r.resampleByLength(1).contours(),s=t(i),u=t(a),h=100;ClipperLib.JS.ScaleUpPaths(s,h),ClipperLib.JS.ScaleUpPaths(u,h);var c=new ClipperLib.Clipper;c.AddPaths(s,ClipperLib.PolyType.ptSubject,e.isClosed()),c.AddPaths(u,ClipperLib.PolyType.ptClip,r.isClosed());var f=new ClipperLib.Paths;c.Execute(o[n],f,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero),f=ClipperLib.JS.Clean(f,.1*h),ClipperLib.JS.ScaleDownPaths(f,h);var p,v,l,g=new Path;for(p=0;p<f.length;p+=1){for(l=f[p],v=0;v<l.length;v+=1)0===v?g.moveTo(l[v].X,l[v].Y):g.lineTo(l[v].X,l[v].Y);(l[0].X!==l[l.length-1].X||l[0].Y!==l[l.length-1].Y)&&g.closePath()}return g},module.exports=vg;


},{"../objects/color":9,"../objects/group":10,"../objects/path":12,"../objects/point":13,"../objects/rect":14,"../objects/transform":16,"../objects/transformable":17,"../util/bezier":19,"../util/geo":21,"../util/math":23,"../util/random":24,"js-clipper":1,"lodash":2}],8:[function(require,module,exports){
"use strict";var _=require("lodash"),geo=require("../util/geo"),Color=require("../objects/color"),Path=require("../objects/path"),Point=require("../objects/point"),gText=require("../objects/text"),vg={};vg.roundedRect=function(e,t,n,r,o,a){var i=new Path;return i.addRoundedRect(e,t,n,r,o,a),i},vg.quad=function(e,t,n,r){var o=arguments,a=new Path;return 8===o.length?Path.prototype.addQuad.apply(a,o):(e=Point.read(e),t=Point.read(t),n=Point.read(n),r=Point.read(r),a.addQuad(e.x,e.y,t.x,t.y,n.x,n.y,r.x,r.y)),a},vg.rect=function(e,t,n,r){var o=arguments;if(3===o.length?e=Point.read(e):4===o.length?"number"==typeof o[0]&&"number"==typeof o[1]?(e=Point.read(o[0],o[1]),t=o[2],n=o[3],r=null):(e=Point.read(e),r=Point.read(r)):(5===o.length||6===o.length)&&(e=Point.read(o[0],o[1]),t=o[2],n=o[3],r=5===o.length&&"number"==typeof o[4]?Point.read(o[4],o[4]):Point.read(o[4],o[5])),!r||0===r.x&&0===r.y){var a=new Path;return a.addRect(e.x-t/2,e.y-n/2,t,n),a}return vg.roundedRect(e.x-t/2,e.y-n/2,t,n,r.x,r.y)},vg.ellipse=function(e,t,n){var r=arguments;4===r.length?(e=Point.read(r[0],r[1]),t=r[2],n=r[3]):e=Point.read(e);var o=new Path;return o.addEllipse(e.x-t/2,e.y-n/2,t,n),o},vg.line=function(e,t){var n=arguments;4===n.length?(e=Point.read(n[0],n[1]),t=Point.read(n[2],n[3])):(e=Point.read(e),t=Point.read(t));var r=new Path;return r.addLine(e.x,e.y,t.x,t.y),r.fill=null,r.stroke="black",r},vg.lineAngle=function(e,t,n){var r=arguments;4===r.length?(e=Point.read(r[0],r[1]),n=r[2],t=r[3]):e=Point.read(e);var o=geo.coordinates(e.x,e.y,t,n);return vg.line(e,o)},vg.arc=function(e,t,n,r,o,a){var i=arguments;7===i.length?(e=Point.read(i[0],i[1]),t=i[2],n=i[3],r=i[4],o=i[5],a=i[6]):e=Point.read(e);var u=new Path;return u.addArc(e.x,e.y,t,n,r,o,a),u},vg.curve=function(e,t,n,r){var o=arguments;6===o.length?(e=Point.read(o[0],o[1]),t=Point.read(o[2],o[3]),n=o[4],r=o[5]):(e=Point.read(e),t=Point.read(t));var a=e.x+n*(t.x-e.x),i=e.y+n*(t.y-e.y),u=geo.angle(e.x,e.y,t.x,t.y)+90,l=geo.coordinates(a,i,u,r),g=l.x,d=l.y,v=e.x+2/3*(g-e.x),y=e.y+2/3*(d-e.y),c=t.x+2/3*(g-t.x),x=t.y+2/3*(d-t.y),P=new Path;return P.moveTo(e.x,e.y),P.curveTo(v,y,c,x,t.x,t.y),P.fill=null,P.stroke=Color.BLACK,P},vg.polygon=function(e,t,n,r){var o=arguments;5===o.length||4===o.length&&"number"==typeof o[0]&&"number"==typeof o[1]?(e=Point.read(o[0],o[1]),t=o[2],n=o[3],r=5===o.length?o[4]:!0):(e=Point.read(e),3===o.length&&(r=!0)),n=Math.max(n,3);var a,i,u,l,g=e.x,d=e.y,v=t,y=360/n,c=0;r===!0&&(a=geo.coordinates(g,d,0,v),i=geo.coordinates(g,d,y,v),c=-geo.angle(i.x,i.y,a.x,a.y));var x=new Path;for(u=0;n>u;u+=1)l=geo.coordinates(g,d,y*u+c,v),0===u?x.moveTo(l.x,l.y):x.lineTo(l.x,l.y);return x.close(),x},vg.star=function(e,t,n,r){var o=arguments;5===o.length||4===o.length&&"number"==typeof o[0]&&"number"==typeof o[1]?(e=Point.read(o[0],o[1]),t=o[2],n=o[3],r=o[4]):e=Point.read(e),r||(r=n);var a,i,u,l,g,d=new Path;for(d.moveTo(e.x,e.y+n/2),a=1;2*t>a;a+=1)i=a*Math.PI/t,u=a%2===1?r/2:n/2,l=e.x+u*Math.sin(i),g=e.y+u*Math.cos(i),d.lineTo(l,g);return d.close(),d},vg.freehand=function(e){var t,n,r,o=function(e){return""!==e},a=_.filter(e.split("M"),o);a=_.map(a,function(e){return e.replace(/,/g," ")});var i=new Path;for(n=0;n<a.length;n+=1)for(r=_.filter(a[n].split(" "),o),t=0;t<r.length;t+=2)if(void 0!==r[t+1]){var u=parseFloat(r[t]),l=parseFloat(r[t+1]);0===t?i.moveTo(u,l):i.lineTo(u,l)}return i.fill=null,i.stroke=Color.BLACK,i},vg.grid=function(e,t,n,r,o){var a,i,u,l,g,d,v,y,c,x=[];for(x.length=e*t,o=void 0!==o?o:Point.ZERO,e>1?(a=n*(e-1),i=o.x-a/2):i=o.x,t>1?(u=r*(t-1),l=o.y-u/2):l=o.y,c=0,g=0;t>g;g+=1)for(d=0;e>d;d+=1)v=i+d*n,y=l+g*r,x[c]=new Point(v,y),c+=1;return x},vg.text=function(){var e=Object.create(gText.prototype);return e.constructor=gText.prototype,gText.apply(e,arguments),e},vg.demoRect=function(){return new vg.rect({x:0,y:0},100,100,{x:0,y:0})},vg.demoEllipse=function(){return new vg.ellipse({x:0,y:0},100,100)},module.exports=vg;


},{"../objects/color":9,"../objects/path":12,"../objects/point":13,"../objects/text":15,"../util/geo":21,"lodash":2}],9:[function(require,module,exports){
"use strict";var math=require("../util/math"),color=require("../util/color"),js=require("../util/js"),HSB="HSB",HEX="HEX",Color=function(r,o,t,e,n){var i,s,l,a,h,u;void 0===r?(i=s=l=0,a=1):Array.isArray(r)?(u=o||{},i=void 0!==r[0]?r[0]:0,s=void 0!==r[1]?r[1]:0,l=void 0!==r[2]?r[2]:0,a=void 0!==r[3]?r[3]:u.range||1):void 0!==r.r?(u=o||{},i=r.r,s=r.g,l=r.b,a=void 0!==r.a?r.a:u.range||1):"string"==typeof r?(h=color.hex2rgb(r),i=h[0],s=h[1],l=h[2],a=1):"number"==typeof r&&(1===arguments.length?(i=s=l=r,a=1):2===arguments.length?(i=s=l=r,"number"==typeof o?a=o:(u=o,a=u.range||1)):3===arguments.length?"number"==typeof t?(i=r,s=o,l=t,a=1):(i=s=l=r,a=o,u=t):4===arguments.length?(i=r,s=o,l=t,"number"==typeof e?a=e:(u=e,a=u.range||1)):(i=r,s=o,l=t,a=e,u=n)),u=u||{},void 0!==u.range&&(i/=u.range,s/=u.range,l/=u.range,a/=u.range,u.mode===HSB&&(r/=u.range,o/=u.range,t/=u.range)),u.mode===HSB?(r=math.clamp(r,0,1),o=math.clamp(o,0,1),t=math.clamp(t,0,1),h=color.hsb2rgb(r,o,t),i=h[0],s=h[1],l=h[2]):u.mode===HEX&&(h=color.hex2rgb(r),i=h[0],s=h[1],l=h[2],a=1),this.r=math.clamp(i,0,1),this.g=math.clamp(s,0,1),this.b=math.clamp(l,0,1),this.a=math.clamp(a,0,1)};Color.BLACK=new Color(0),Color.WHITE=new Color(1),js.defineAlias(Color,"r","red"),js.defineAlias(Color,"g","green"),js.defineAlias(Color,"b","blue"),js.defineAlias(Color,"a","alpha"),js.defineGetter(Color,"h",function(){return color.rgb2hsb(this.r,this.g,this.b)[0]}),js.defineGetter(Color,"s",function(){return color.rgb2hsb(this.r,this.g,this.b)[1]}),js.defineGetter(Color,"v",function(){return color.rgb2hsb(this.r,this.g,this.b)[2]}),js.defineAlias(Color,"h","hue"),js.defineAlias(Color,"s","saturation"),js.defineAlias(Color,"v","value"),js.defineAlias(Color,"v","brightness"),js.defineGetter(Color,"rgb",function(){return[this.r,this.g,this.b]}),js.defineGetter(Color,"rgba",function(){return[this.r,this.g,this.b,this.a]}),js.defineGetter(Color,"hsb",function(){return color.rgb2hsb(this.r,this.g,this.b)}),js.defineGetter(Color,"hsba",function(){return color.rgb2hsb(this.r,this.g,this.b).concat([this.a])}),Color.prototype.toCSS=function(){return Color.toCSS(this)},Color.prototype.toHex=function(){return this.a>=1?color.rgb2hex(this.r,this.g,this.b):color.rgba2hex(this.r,this.g,this.b,this.a)},Color.prototype.desaturate=function(){if(this.r===this.g&&this.g===this.b)return this;var r=.3*this.r+.59*this.g+.11*this.b;return new Color(r,r,r,this.a)},Color.prototype.invert=function(){return new Color(1-this.r,1-this.g,1-this.b,this.a)},Color.clone=function(r){return null===r||void 0===r?null:"string"==typeof r?r:new Color(r.r,r.g,r.b,r.a)},Color.toCSS=function(r){if(null===r)return"none";if(void 0===r)return"black";if("string"==typeof r)return r;if(r instanceof Color){var o=Math.round(255*r.r),t=Math.round(255*r.g),e=Math.round(255*r.b);return"rgba("+o+", "+t+", "+e+", "+r.a+")"}if(void 0!==r.r&&void 0!==r.g&&void 0!==r.b)return void 0===r.a?"rgb("+r.r+", "+r.g+", "+r.b+")":"rgba("+r.r+", "+r.g+", "+r.b+", "+r.a+")";throw new Error("Don't know how to convert "+r+" to CSS.")},Color.toHex=function(r){return Color.parse(r).toHex()},Color.make=function(){var r=Object.create(Color.prototype);return r.constructor=Color.prototype,Color.apply(r,arguments),r},Color.parse=function(r){if(void 0===r||null===r)return new Color(0,0,0,0);if(r instanceof Color)return r;if(color.namedColors[r])return Color.make.apply(null,color.namedColors[r]);if("#"===r[0])return new Color(r,0,0,0,{mode:HEX});if("none"===r)return new Color(0,0,0,0);throw new Error("Color "+r+"can not be parsed")},Color.gray=function(r,o,t){return t=Math.max(t,1),new Color(r/t,r/t,r/t,o/t)},Color.rgb=function(r,o,t,e,n){return n=Math.max(n,1),new Color(r/n,o/n,t/n,e/n)},Color.hsb=function(r,o,t,e,n){return n=Math.max(n,1),new Color(r/n,o/n,t/n,e/n,{mode:HSB})},module.exports=Color;


},{"../util/color":20,"../util/js":22,"../util/math":23}],10:[function(require,module,exports){
"use strict";var _=require("lodash"),Path=require("../objects/path"),Rect=require("../objects/rect"),Group=function(t){t?t.shapes||t.commands?this.shapes=[t]:t&&(this.shapes=t):this.shapes=[]};Group.prototype.add=function(t){this.shapes.push(t)},Group.prototype.clone=function(){var t,e=[],r=this.shapes.length;for(e.length=r,t=0;r>t;t+=1)e[t]=this.shapes[t].clone();return new Group(e)},Group.prototype.colorize=function(t,e,r){var n=_.map(this.shapes,function(n){return n.colorize(t,e,r)});return new Group(n)},Group.prototype.desaturate=function(){var t=_.map(this.shapes,function(t){return t.desaturate()});return new Group(t)},Group.prototype.invert=function(){var t=_.map(this.shapes,function(t){return t.invert()});return new Group(t)},Group.prototype.bounds=function(){if(0===this.shapes.length)return new Rect(0,0,0,0);var t,e,r,n=this.shapes;for(t=0;t<n.length;t+=1)r=n[t],void 0===e&&(e=r.bounds()),(r.shapes&&0!==r.shapes.length||r.commands&&0!==r.commands.length)&&(e=e.unite(r.bounds()));return void 0!==e?e:new Rect(0,0,0,0)},Group.prototype.contains=function(t,e,r){void 0===r&&(r=100);var n,o=this.shapes;for(n=0;n<o.length;n+=1)if(o[n].contains(t,e,r))return!0;return!1},Group.prototype.length=function(t){void 0===t&&(t=10);for(var e=0,r=this.shapes,n=0;n<r.length;n+=1)e+=r[n].length(t);return e},Group.prototype.resampleByAmount=function(t,e){var r,n;return e?(n=_.map(this.shapes,function(r){return r.resampleByAmount(t,e)}),new Group(n)):(r=new Path.combine(this),r.resampleByAmount(t,e))},Group.prototype.resampleByLength=function(t){var e=_.map(this.shapes,function(e){return e.resampleByLength(t)});return new Group(e)},Group.prototype.toSVG=function(){var t;return t=_.map(this.shapes,function(t){return t.toSVG()}),"<g>"+t.join("")+"</g>"},Group.prototype.draw=function(t){var e,r=this.shapes,n=r.length;for(e=0;n>e;e+=1)r[e].draw(t)},module.exports=Group;


},{"../objects/path":12,"../objects/rect":14,"lodash":2}],11:[function(require,module,exports){
"use strict";var Vec3=require("../objects/vec3"),Matrix4=function(m){void 0!==m?this.m=m:(m=new Float32Array(16),m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,this.m=m)};Matrix4.IDENTITY=new Matrix4,Matrix4.perspective=function(m,t,i,s){var h=new Float32Array(Matrix4.IDENTITY.m),r=1/Math.tan(.5*m);return h[0]=r/t,h[1]=h[2]=h[3]=0,h[5]=r,h[4]=h[6]=h[7]=0,h[8]=h[9]=0,h[10]=-s/(i-s),h[11]=1,h[12]=h[13]=h[15]=0,h[14]=i*s/(i-s),new Matrix4(h)},Matrix4.lookAt=function(m,t,i){var s,h,r,a,e,n,o;return s=new Float32Array(16),h=t.subtract(m).normalize(),r=Vec3.cross(i,h).normalize(),a=Vec3.cross(h,r).normalize(),e=-Vec3.dot(r,m),n=-Vec3.dot(a,m),o=-Vec3.dot(h,m),s[0]=r.x,s[1]=a.x,s[2]=h.x,s[3]=0,s[4]=r.y,s[5]=a.y,s[6]=h.y,s[7]=0,s[8]=r.z,s[9]=a.z,s[10]=h.z,s[11]=0,s[12]=e,s[13]=n,s[14]=o,s[15]=1,new Matrix4(s)},Matrix4.prototype.invert=function(){var m,t,i,s,h,r,a,e,n,o,c,x,u,M,l,y,w,p,v,A,f,z,F,V,d,I,T,b,D,E,N,Y,j,k,q,g,B,C,G,H;return m=this.m[0],t=this.m[1],i=this.m[2],s=this.m[3],h=this.m[4],r=this.m[5],a=this.m[6],e=this.m[7],n=this.m[8],o=this.m[9],c=this.m[10],x=this.m[11],u=this.m[12],M=this.m[13],l=this.m[14],y=this.m[15],w=c*y-x*l,p=o*y-x*M,v=o*l-c*M,A=n*y-x*u,f=n*l-c*u,z=n*M-o*u,F=r*w-a*p+e*v,V=-(h*w-a*A+e*f),d=h*p-r*A+e*z,I=-(h*v-r*f+a*z),T=1/(m*F+t*V+i*d+s*I),b=a*y-e*l,D=r*y-e*M,E=r*l-a*M,N=h*y-e*u,Y=h*l-a*u,j=h*M-r*u,k=a*x-e*c,q=r*x-e*o,g=r*c-a*o,B=h*x-e*n,C=h*c-a*n,G=h*o-r*n,H=new Float32Array(16),H[0]=F*T,H[4]=V*T,H[8]=d*T,H[12]=I*T,H[1]=-(t*w-i*p+s*v)*T,H[5]=(m*w-i*A+s*f)*T,H[9]=-(m*p-t*A+s*z)*T,H[13]=(m*v-t*f+i*z)*T,H[2]=(t*b-i*D+s*E)*T,H[6]=-(m*b-i*N+s*Y)*T,H[10]=(m*D-t*N+s*j)*T,H[14]=-(m*E-t*Y+i*j)*T,H[3]=-(t*k-i*q+s*g)*T,H[7]=(m*k-i*B+s*C)*T,H[11]=-(m*q-t*B+s*G)*T,H[15]=(m*g-t*C+i*G)*T,new Matrix4(H)},Matrix4.prototype.multiply=function(m){var t=new Float32Array(16);return t[0]=this.m[0]*m.m[0]+this.m[1]*m.m[4]+this.m[2]*m.m[8]+this.m[3]*m.m[12],t[1]=this.m[0]*m.m[1]+this.m[1]*m.m[5]+this.m[2]*m.m[9]+this.m[3]*m.m[13],t[2]=this.m[0]*m.m[2]+this.m[1]*m.m[6]+this.m[2]*m.m[10]+this.m[3]*m.m[14],t[3]=this.m[0]*m.m[3]+this.m[1]*m.m[7]+this.m[2]*m.m[11]+this.m[3]*m.m[15],t[4]=this.m[4]*m.m[0]+this.m[5]*m.m[4]+this.m[6]*m.m[8]+this.m[7]*m.m[12],t[5]=this.m[4]*m.m[1]+this.m[5]*m.m[5]+this.m[6]*m.m[9]+this.m[7]*m.m[13],t[6]=this.m[4]*m.m[2]+this.m[5]*m.m[6]+this.m[6]*m.m[10]+this.m[7]*m.m[14],t[7]=this.m[4]*m.m[3]+this.m[5]*m.m[7]+this.m[6]*m.m[11]+this.m[7]*m.m[15],t[8]=this.m[8]*m.m[0]+this.m[9]*m.m[4]+this.m[10]*m.m[8]+this.m[11]*m.m[12],t[9]=this.m[8]*m.m[1]+this.m[9]*m.m[5]+this.m[10]*m.m[9]+this.m[11]*m.m[13],t[10]=this.m[8]*m.m[2]+this.m[9]*m.m[6]+this.m[10]*m.m[10]+this.m[11]*m.m[14],t[11]=this.m[8]*m.m[3]+this.m[9]*m.m[7]+this.m[10]*m.m[11]+this.m[11]*m.m[15],t[12]=this.m[12]*m.m[0]+this.m[13]*m.m[4]+this.m[14]*m.m[8]+this.m[15]*m.m[12],t[13]=this.m[12]*m.m[1]+this.m[13]*m.m[5]+this.m[14]*m.m[9]+this.m[15]*m.m[13],t[14]=this.m[12]*m.m[2]+this.m[13]*m.m[6]+this.m[14]*m.m[10]+this.m[15]*m.m[14],t[15]=this.m[12]*m.m[3]+this.m[13]*m.m[7]+this.m[14]*m.m[11]+this.m[15]*m.m[15],new Matrix4(t)},Matrix4.prototype.translate=function(m,t,i){var s=new Float32Array(this.m);return s[12]+=m,s[13]+=t,s[14]+=i,new Matrix4(s)},module.exports=Matrix4;


},{"../objects/vec3":18}],12:[function(require,module,exports){
"use strict";function _cloneCommand(t){var o={type:t.type};return o.type!==CLOSE&&(o.x=t.x,o.y=t.y),o.type===QUADTO?(o.x1=t.x1,o.y1=t.y1):o.type===CURVETO&&(o.x1=t.x1,o.y1=t.y1,o.x2=t.x2,o.y2=t.y2),o}var _=require("lodash"),bezier=require("../util/bezier"),geo=require("../util/geo"),math=require("../util/math"),Color=require("../objects/color"),Rect=require("../objects/rect"),MOVETO=bezier.MOVETO,LINETO=bezier.LINETO,QUADTO=bezier.QUADTO,CURVETO=bezier.CURVETO,CLOSE=bezier.CLOSE,CLOSE_COMMAND=Object.freeze({type:CLOSE}),KAPPA=.5522847498307936,Path=function(t,o,e,i){this.commands=void 0!==t?t:[],this.fill=void 0!==o?o:"black",this.stroke=void 0!==e?e:null,this.strokeWidth=void 0!==i?i:1};Path.prototype.clone=function(){var t,o=new Path,e=this.commands.length;for(o.commands.length=this.commands.length,t=0;e>t;t+=1)o.commands[t]=_cloneCommand(this.commands[t]);return o.fill=Color.clone(this.fill),o.stroke=Color.clone(this.stroke),o.strokeWidth=this.strokeWidth,o},Path.prototype.extend=function(t){var o=t.commands||t;Array.prototype.push.apply(this.commands,o)},Path.prototype.moveTo=function(t,o){this.commands.push({type:MOVETO,x:t,y:o})},Path.prototype.lineTo=function(t,o){this.commands.push({type:LINETO,x:t,y:o})},Path.prototype.curveTo=function(t,o,e,i,s,n){this.commands.push({type:CURVETO,x1:t,y1:o,x2:e,y2:i,x:s,y:n})},Path.prototype.quadTo=function(t,o,e,i){var s=this.commands[this.commands.length-1].x,n=this.commands[this.commands.length-1].y,r=s+2/3*(t-s),h=n+2/3*(o-n),a=r+1/3*(e-s),l=h+1/3*(i-n);this.curveTo(r,h,a,l,e,i)},Path.prototype.closePath=Path.prototype.close=function(){this.commands.push(CLOSE_COMMAND)},Path.prototype.isClosed=function(){return 0===this.commands.length?!1:this.commands[this.commands.length-1].type===CLOSE},Path.prototype.addRect=function(t,o,e,i){this.moveTo(t,o),this.lineTo(t+e,o),this.lineTo(t+e,o+i),this.lineTo(t,o+i),this.close()},Path.prototype.addRoundedRect=function(t,o,e,i,s,n){var r=1-.552,h=s,a=n,l=t,c=t+e,p=o,u=o+i;h=Math.min(h,.5*e),a=Math.min(a,.5*i),this.moveTo(l+h,p),.5*e>h&&this.lineTo(c-s,p),this.curveTo(c-h*r,p,c,p+a*r,c,p+a),.5*i>a&&this.lineTo(c,u-a),this.curveTo(c,u-a*r,c-h*r,u,c-h,u),.5*e>h&&this.lineTo(l+h,u),this.curveTo(l+h*r,u,l,u-a*r,l,u-a),.5*i>a&&this.lineTo(l,p+a),this.curveTo(l,p+a*r,l+h*r,p,l+h,p),this.close()},Path.prototype.addEllipse=function(t,o,e,i){var s=.5*KAPPA*e,n=.5*KAPPA*i,r=t+.5*e,h=o+.5*i,a=t+e,l=o+i;this.moveTo(t,h),this.curveTo(t,h-n,r-s,o,r,o),this.curveTo(r+s,o,a,h-n,a,h),this.curveTo(a,h+n,r+s,l,r,l),this.curveTo(r-s,l,t,h+n,t,h),this.close()},Path.prototype.addLine=function(t,o,e,i){this.moveTo(t,o),this.lineTo(e,i)},Path.prototype.addQuad=function(t,o,e,i,s,n,r,h){this.moveTo(t,o),this.lineTo(e,i),this.lineTo(s,n),this.lineTo(r,h),this.close()},Path.prototype.addArc=function(t,o,e,i,s,n,r){r=r||"pie";var h,a,l,c,p,u,m,d,y,f,v,T,P;for(h=e/2,a=i/2,l=math.radians(s),c=n,c>=360||-360>=c?(p=4,u=Math.PI/2,m=.5522847498307933,0>c&&(u=-u,m=-m)):(p=Math.ceil(Math.abs(c)/90),u=math.radians(c/p),m=4/3*Math.sin(u/2)/(1+Math.cos(u/2)),0===m&&(p=0)),"open"===r?d=0:"chord"===r?d=1:"pie"===r&&(d=2),(0>h||0>a)&&(p=d=-1),y=0;p+d>=y;)f=l,0===y?this.moveTo(t+Math.cos(f)*h,o+Math.sin(f)*a):y>p?y===p+d?this.close():this.lineTo(t,o):(f+=u*(y-1),v=Math.cos(f),T=Math.sin(f),P=[],P.push(t+(v-m*T)*h),P.push(o+(T+m*v)*a),f+=u,v=Math.cos(f),T=Math.sin(f),P.push(t+(v+m*T)*h),P.push(o+(T-m*v)*a),P.push(t+v*h),P.push(o+T*a),Path.prototype.curveTo.apply(this,P)),y+=1},Path.prototype.colorize=function(t,o,e){var i=this.clone();return i.fill=Color.clone(t),i.stroke=Color.clone(o),i.strokeWidth=e,i},Path.prototype.desaturate=function(){var t=this.clone(),o=t.fill,e=t.stroke;return o instanceof Color||(o=Color.parse(o)),e instanceof Color||(e=Color.parse(e)),t.fill=o.desaturate(),t.stroke=e.desaturate(),t},Path.prototype.invert=function(){var t=this.clone(),o=t.fill,e=t.stroke;return o instanceof Color||(o=Color.parse(o)),e instanceof Color||(e=Color.parse(e)),t.fill=o.invert(),t.stroke=e.invert(),t},Path.prototype.contours=function(){var t=[],o=[];return _.each(this.commands,function(e){e.type===MOVETO?(0!==o.length&&t.push(o),o=[e]):o.push(e)}),0!==o.length&&t.push(o),t},Path.prototype.bounds=function(){if(this._bounds)return this._bounds;if(0===this.commands.length)return new Rect(0,0,0,0);var t,o,e,i,s,n=Number.MAX_VALUE,r=Number.MAX_VALUE,h=-Number.MAX_VALUE,a=-Number.MAX_VALUE;return _.each(this.commands,function(l){if(l.type===MOVETO||l.type===LINETO)t=l.x,o=l.y,n>t&&(n=t),r>o&&(r=o),t>h&&(h=t),o>a&&(a=o),e=l;else if(l.type===CURVETO){var c=bezier.extrema(e.x,e.y,l.x1,l.y1,l.x2,l.y2,l.x,l.y);i=c.x+c.width,s=c.y+c.height,c.x<n&&(n=c.x),i>h&&(h=i),c.y<r&&(r=c.y),s>a&&(a=s),e=l}}),new Rect(n,r,h-n,a-r)},Path.prototype.point=function(t,o){return void 0===o&&(o=bezier.segmentLengths(this.commands,!0,10)),bezier.point(this,t,o)},Path.prototype.points=function(t,o){var e=o&&void 0!==o.start?o.start:0,i=o&&void 0!==o.end?o.end:1;if(0===this.commands.length)return[];t=Math.round(t);var s;s=o&&o.closed?t>1?(i-e)/t:i-e:t>1?(i-e)/(t-1):i-e;for(var n=[],r=bezier.segmentLengths(this.commands,!0,10),h=0;t>h;h+=1)n.push(this.point(e+s*h,r));return n},Path.prototype.length=function(t){return void 0===t&&(t=10),bezier.length(this,t)},Path.prototype.contains=function(t,o,e){var i=this.points(void 0!==e?e:100);return geo.pointInPolygon(i,t,o)},Path.prototype.resampleByAmount=function(t,o){for(var e=o?this.contours():[this.commands],i=new Path([],this.fill,this.stroke,this.strokeWidth),s=0;s<e.length;s+=1){var n=new Path(e[s]),r={};n.isClosed()&&(r.closed=!0);for(var h=n.points(t,r),a=0;a<h.length;a+=1)0===a?i.moveTo(h[a].x,h[a].y):i.lineTo(h[a].x,h[a].y);n.isClosed()&&i.close()}return i},Path.prototype.resampleByLength=function(t,o){o=o||{};var e=o.force||!1,i=this.contours(),s=[];e||(t=Math.max(t,1));for(var n=0;n<i.length;n+=1){var r=new Path(i[n]),h=r.length(),a=Math.ceil(h/t);s=s.concat(r.resampleByAmount(a).commands)}return new Path(s,this.fill,this.stroke,this.strokeWidth)},Path.prototype.toPathData=function(){var t,o,e,i,s,n,r,h,a;for(o="",t=0;t<this.commands.length;t+=1)e=this.commands[t],void 0!==e.x&&(i=math.clamp(e.x,-9999,9999),s=math.clamp(e.y,-9999,9999)),void 0!==e.x1&&(n=math.clamp(e.x1,-9999,9999),r=math.clamp(e.y1,-9999,9999)),void 0!==e.x2&&(h=math.clamp(e.x2,-9999,9999),a=math.clamp(e.y2,-9999,9999)),e.type===MOVETO?isNaN(i)||isNaN(s)||(o+="M"+i+" "+s):e.type===LINETO?isNaN(i)||isNaN(s)||(o+="L"+i+" "+s):e.type===QUADTO?isNaN(i)||isNaN(s)||isNaN(n)||isNaN(r)||(o+="Q"+n+" "+r+" "+i+" "+s):e.type===CURVETO?isNaN(i)||isNaN(s)||isNaN(n)||isNaN(r)||isNaN(h)||isNaN(a)||(o+="C"+n+" "+r+" "+h+" "+a+" "+i+" "+s):e.type===CLOSE&&(o+="Z");return o},Path.prototype.toSVG=function(){var t='<path d="';t+=this.toPathData(),t+='"';var o;o=this.fill&&void 0!==this.fill.r?Color.toCSS(this.fill):this.fill,"black"!==o&&(t+=null===o?' fill="none"':' fill="'+o+'"');var e;return e=this.stroke&&void 0!==this.stroke.r?Color.toCSS(this.stroke):this.stroke,e&&(t+=' stroke="'+e+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},Path.prototype.draw=function(t){var o,e,i;for(t.beginPath(),o=this.commands.length,e=0;o>e;e+=1)i=this.commands[e],i.type===MOVETO?t.moveTo(i.x,i.y):i.type===LINETO?t.lineTo(i.x,i.y):i.type===QUADTO?t.quadraticCurveTo(i.x1,i.y1,i.x,i.y):i.type===CURVETO?t.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):i.type===CLOSE&&t.closePath();null!==this.fill&&(t.fillStyle=Color.toCSS(this.fill),t.fill()),null!==this.stroke&&null!==this.strokeWidth&&this.strokeWidth>0&&(t.strokeStyle=Color.toCSS(this.stroke),t.lineWidth=this.strokeWidth,t.stroke())},Path.combine=function(){for(var t=_.flatten(arguments),o=[],e=0;e<t.length;e+=1){var i=t[e];i.commands?o=o.concat(i.commands):i.shapes&&(o=o.concat(Path.combine(i.shapes).commands))}return new Path(o)},module.exports=Path;


},{"../objects/color":9,"../objects/rect":14,"../util/bezier":19,"../util/geo":21,"../util/math":23,"lodash":2}],13:[function(require,module,exports){
"use strict";var Point=function(t,n){this.x=void 0!==t?t:0,this.y=void 0!==n?n:0};Object.defineProperty(Point.prototype,"xy",{get:function(){return[this.x,this.y]}}),Point.ZERO=new Point(0,0),Point.read=function(t,n){if(2===arguments.length)return new Point(t,n);var i=t;return i instanceof Point?i:"number"==typeof i?new Point(i,i):Array.isArray(i)?0===i.length?Point.ZERO:(t=i[0],n=i.length>1?i[1]:t,new Point(t,n)):void 0!==i.x&&void 0!==i.y?new Point(i.x,i.y):Point.ZERO},Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.add=function(t){return new Point(this.x+t.x,this.y+t.y)},Point.prototype.subtract=Point.prototype.sub=function(t){return new Point(this.x-t.x,this.y-t.y)},Point.prototype.divide=function(t){return new Point(this.x/t,this.y/t)},Point.prototype.multiply=function(t){return new Point(this.x*t,this.y*t)},Point.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Point.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y},Point.prototype.heading=function(){return Math.atan2(this.y,this.x)},Point.prototype.distanceTo=function(t){var n=this.x-t.x,i=this.y-t.y;return Math.sqrt(n*n+i*i)},Point.prototype.normalize=function(){var t=this.magnitude();return 0!==t?this.divide(t):Point.ZERO},Point.prototype.limit=function(t){return this.magnitudeSquared()>t*t?this.normalize().multiply(t):this},Point.prototype.translate=function(t,n){return new Point(this.x+t,this.y+n)},Point.prototype.scale=function(t,n){return n=void 0!==n?n:t,new Point(this.x*t,this.y*n)},Point.prototype.toString=function(){return"["+this.x+", "+this.y+"]"},module.exports=Point;


},{}],14:[function(require,module,exports){
"use strict";var Point=require("../objects/point"),Rect=function(t,i,h,e){this.x=void 0!==t?t:0,this.y=void 0!==i?i:0,this.width=void 0!==h?h:0,this.height=void 0!==e?e:0};Object.defineProperty(Rect.prototype,"xywh",{get:function(){return[this.x,this.y,this.width,this.height]}}),Rect.prototype.normalize=function(){var t=this.x,i=this.y,h=this.width,e=this.height;return 0>h&&(t+=h,h=-h),0>e&&(i+=e,e=-e),new Rect(t,i,h,e)},Rect.prototype.containsPoint=function(t,i){return 1===arguments.length&&(i=t.y,t=t.x),t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height},Rect.prototype.containsRect=function(t){return t.x>=this.x&&t.x+t.width<=this.x+this.width&&t.y>=this.y&&t.y+t.height<=this.y+this.height},Rect.prototype.grow=function(t,i){var h=this.x-t,e=this.y-i,s=this.width+2*t,n=this.height+2*i;return new Rect(h,e,s,n)},Rect.prototype.unite=function(t){var i=Math.min(this.x,t.x),h=Math.min(this.y,t.y),e=Math.max(this.x+this.width,t.x+t.width)-i,s=Math.max(this.y+this.height,t.y+t.height)-h;return new Rect(i,h,e,s)},Rect.prototype.addPoint=function(t,i){var h,e,s=this.x,n=this.y,o=this.width,r=this.height;return t<this.x?(h=this.x-t,s=t,o+=h):t>this.x+this.width&&(h=t-(this.x+this.width),o+=h),i<this.y?(e=this.y-i,n=i,r+=e):i>this.y+this.height&&(e=i-(this.y+this.height),r+=e),new Rect(s,n,o,r)},Rect.prototype.centerPoint=function(){return new Point(this.x+this.width/2,this.y+this.height/2)},module.exports=Rect;


},{"../objects/point":13}],15:[function(require,module,exports){
"use strict";var Color=require("../objects/color"),Rect=require("../objects/rect"),Transform=require("../objects/transform"),_dummyContext=null,gText=function(t){var e,i=Array.prototype.slice.call(arguments,1),n=arguments[1],o=arguments[2],s=arguments[arguments.length-1];this.text=String(t),"number"==typeof n?(this.x=n,this.y=o,i=i.slice(2)):Array.isArray(n)?(this.x=n[0],this.y=n[1],i=i.slice(1)):"object"==typeof n?(this.x=void 0!==n.x?n.x:0,this.y=void 0!==n.y?n.y:0,i=i.slice(1)):(this.x=0,this.y=0),"object"==typeof s?(e=s,n!==s&&(i=i.slice(0,i.length-1))):e={},i.length?this.fontFamily=i.shift():this.fontFamily=e.fontFamily||e.fontName||e.font||"sans-serif",i.length?this.fontSize=i.shift():this.fontSize=e.fontSize||24,i.length?this.textAlign=i.shift():this.textAlign=e.align||e.textAlign||"left",i.length?this.fill=i.shift():this.fill=e.fill||"black",this.transform=new Transform};gText.prototype.clone=function(){var t=new gText;return t.text=this.text,t.x=this.x,t.y=this.y,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.textAlign=this.textAlign,t.fill=Color.clone(this.fill),t.transform=this.transform,t},gText._getDummyContext=function(){return _dummyContext||(_dummyContext="undefined"!=typeof document?document.createElement("canvas").getContext("2d"):{font:"10px sans-serif",measureText:function(t){var e=parseFloat(this.font);return{width:t.length*e*.6}}}),_dummyContext},gText.prototype._getFont=function(){return this.fontSize+"px "+this.fontFamily},gText.prototype.colorize=function(t){var e=this.clone();return e.fill=Color.clone(t),e},gText.prototype.draw=function(t){t.save(),t.font=this._getFont(),t.textAlign=this.textAlign;var e=this.transform.m;t.transform(e[0],e[1],e[3],e[4],e[6],e[7]),t.fillStyle=Color.toCSS(this.fill),t.fillText(this.text,this.x,this.y),t.restore()},gText.prototype.bounds=function(){var t,e=gText._getDummyContext(),i=this.x;return e.font=this._getFont(),t=e.measureText(this.text),"center"===this.textAlign?i=this.x-t.width/2:"right"===this.textAlign&&(i=this.x-t.width),new Rect(i,this.y-this.fontSize,t.width,1.2*this.fontSize)},gText.prototype.toSVG=function(){var t="<text";t+=' x="'+this.x+'"',t+=' y="'+this.y+'"',t+=' font-family="'+this.fontFamily+'"',t+=' font-size="'+this.fontSize+'"';var e;return"left"===this.textAlign?e="start":"center"===this.textAlign?e="middle":"right"===this.textAlign&&(e="end"),t+=' text-anchor="'+e+'"',"black"!==this.fill&&(t+=' fill="'+Color.toCSS(this.fill)+'"'),t+=">",t+=this.text,t+="</text>"},module.exports=gText;


},{"../objects/color":9,"../objects/rect":14,"../objects/transform":16}],16:[function(require,module,exports){
"use strict";var _=require("lodash"),bezier=require("../util/bezier"),math=require("../util/math"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),MOVETO=bezier.MOVETO,LINETO=bezier.LINETO,QUADTO=bezier.QUADTO,CURVETO=bezier.CURVETO,CLOSE=bezier.CLOSE,Transform=function(r){void 0!==r?this.m=r:this.m=[1,0,0,0,1,0,0,0,1]};Transform.IDENTITY=new Transform,Transform.identity=function(){return new Transform},Transform._mmult=function(r,t){return void 0!==r.m&&(r=r.m),void 0!==t.m&&(t=t.m),new Transform([r[0]*t[0]+r[1]*t[3],r[0]*t[1]+r[1]*t[4],0,r[3]*t[0]+r[4]*t[3],r[3]*t[1]+r[4]*t[4],0,r[6]*t[0]+r[7]*t[3]+t[6],r[6]*t[1]+r[7]*t[4]+t[7],1])},Transform.prototype.prepend=function(r){return Transform._mmult(this.m,r.m)},Transform.prototype.append=function(r){return Transform._mmult(r.m,this.m)},Transform.prototype.inverse=function(){var r=this.m,t=r[0]*r[4]-r[1]*r[3];return new Transform([r[4]/t,-r[1]/t,0,-r[3]/t,r[0]/t,0,(r[3]*r[7]-r[4]*r[6])/t,-(r[0]*r[7]-r[1]*r[6])/t,1])},Transform.prototype.scale=function(r,t){return void 0===t&&(t=r),Transform._mmult([r,0,0,0,t,0,0,0,1],this.m)},Transform.prototype.translate=function(r,t){return Transform._mmult([1,0,0,0,1,0,r,t,1],this.m)},Transform.prototype.rotate=function(r){var t=Math.cos(math.radians(r)),n=Math.sin(math.radians(r));return Transform._mmult([t,n,0,-n,t,0,0,0,1],this.m)},Transform.prototype.skew=function(r,t){var n=Math.PI*r/180,o=Math.PI*t/180;return Transform._mmult([1,Math.tan(o),0,-Math.tan(n),1,0,0,0,1],this.m)},Transform.prototype.transformPoint=function(r){var t=r.x,n=r.y,o=this.m;return new Point(t*o[0]+n*o[3]+o[6],t*o[1]+n*o[4]+o[7])},Transform.prototype.transformPoints=function(r){var t=this;return _.map(r,function(r){return t.transformPoint(r)})},Transform.prototype.transformPath=function(r){var t,n,o,e=this,a=_.map(r.commands,function(r){if(r.type===MOVETO)return t=e.transformPoint({x:r.x,y:r.y}),{type:MOVETO,x:t.x,y:t.y};if(r.type===LINETO)return t=e.transformPoint({x:r.x,y:r.y}),{type:LINETO,x:t.x,y:t.y};if(r.type===QUADTO)return t=e.transformPoint({x:r.x,y:r.y}),n=e.transformPoint({x:r.x1,y:r.y1}),{type:QUADTO,x1:n.x,y1:n.y,x:t.x,y:t.y};if(r.type===CURVETO)return t=e.transformPoint({x:r.x,y:r.y}),n=e.transformPoint({x:r.x1,y:r.y1}),o=e.transformPoint({x:r.x2,y:r.y2}),{type:CURVETO,x1:n.x,y1:n.y,x2:o.x,y2:o.y,x:t.x,y:t.y};if(r.type===CLOSE)return r;throw new Error("Unknown command type "+r)});return new Path(a,r.fill,r.stroke,r.strokeWidth)},Transform.prototype.transformText=function(r){var t=r.clone();return t.transform=this.append(t.transform),t},Transform.prototype.transformGroup=function(r){var t=this,n=_.map(r.shapes,function(r){return t.transformShape(r)});return new Group(n)},Transform.prototype.transformShape=function(r){var t;return t=r.shapes?this.transformGroup:r.text?this.transformText:void 0!==r.x&&void 0!==r.y?this.transformPoint:Array.isArray(r)&&r.length>0&&void 0!==r[0].x&&void 0!==r[0].y?this.transformPoints:this.transformPath,t.call(this,r)},module.exports=Transform;


},{"../objects/group":10,"../objects/path":12,"../objects/point":13,"../util/bezier":19,"../util/math":23,"lodash":2}],17:[function(require,module,exports){
"use strict";var Point=require("../objects/point"),Transform=require("../objects/transform"),Transformable={translate:function(r){r||(r=Point.ZERO);var t=(new Transform).translate(r.x,r.y);return t.transformShape(this)},scale:function(r,t){t||(t=Point.ZERO);var a,n;"number"==typeof r?(a=r,n=r):(a=r.x,n=r.y);var e=new Transform;return e=e.translate(t.x,t.y),e=e.scale(a,n),e=e.translate(-t.x,-t.y),e.transformShape(this)},rotate:function(r,t){t||(t=Point.ZERO);var a=new Transform;return a=a.translate(t.x,t.y),a=a.rotate(r),a=a.translate(-t.x,-t.y),a.transformShape(this)},skew:function(r,t){t||(t=Point.ZERO);var a=new Transform;return a=a.translate(t.x,t.y),a=a.skew(r.x,r.y),a=a.translate(-t.x,-t.y),a.transformShape(this)}};module.exports=Transformable;


},{"../objects/point":13,"../objects/transform":16}],18:[function(require,module,exports){
"use strict";var Vec3=function(t,i,e){this.x=void 0===t?0:t,this.y=void 0===i?0:i,this.z=void 0===e?0:e};Vec3.ZERO=new Vec3(0,0,0),Vec3.up=function(){return new Vec3(0,1,0)},Vec3.dot=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},Vec3.cross=function(t,i){return new Vec3(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x)},Vec3.prototype.toString=function(){return"["+this.x+", "+this.y+", "+this.z+"]"},Vec3.prototype.toArray=function(){var t=[];return t.push(this.x),t.push(this.y),t.push(this.z),t},Vec3.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vec3.prototype.normalize=function(){var t,i;return t=this.getLength(),0===t?this:(i=1/t,new Vec3(this.x*i,this.y*i,this.z*i))},Vec3.prototype.add=function(t){return new Vec3(this.x+t.x,this.y+t.y,this.z+t.z)},Vec3.prototype.subtract=function(t){return new Vec3(this.x-t.x,this.y-t.y,this.z-t.z)},Vec3.prototype.transform=function(t){var i,e,s,h,n;return n=t,i=this.x*n.m[0]+this.y*n.m[4]+this.z*n.m[8]+n.m[12],e=this.x*n.m[1]+this.y*n.m[5]+this.z*n.m[9]+n.m[13],s=this.x*n.m[2]+this.y*n.m[6]+this.z*n.m[10]+n.m[14],h=this.x*n.m[3]+this.y*n.m[7]+this.z*n.m[11]+n.m[15],new Vec3(i/h,e/h,s/h)},module.exports=Vec3;


},{}],19:[function(require,module,exports){
"use strict";var _=require("lodash"),math=require("../util/math"),Point=require("../objects/point"),Rect=require("../objects/rect"),bezier={},MOVETO=bezier.MOVETO="M",LINETO=bezier.LINETO="L";bezier.QUADTO="Q";var CURVETO=bezier.CURVETO="C",CLOSE=bezier.CLOSE="Z";bezier.linePoint=function(e,t,r,n,i){var a=t+e*(n-t),o=r+e*(i-r);return{type:LINETO,x:a,y:o}},bezier.lineLength=function(e,t,r,n){var i=Math.pow(Math.abs(e-r),2),a=Math.pow(Math.abs(t-n),2);return Math.sqrt(i+a)},bezier.curvePoint=function(e,t,r,n,i,a,o,u,h){var s=1-e,b=t*s+n*e,c=r*s+i*e,y=n*s+a*e,m=i*s+o*e,x=a*s+u*e,z=o*s+h*e,O=b*s+y*e,v=c*s+m*e,p=y*s+x*e,M=m*s+z*e,E=O*s+p*e,L=v*s+M*e;return{type:CURVETO,x1:O,y1:v,x2:p,y2:M,x:E,y:L}},bezier.curveLength=function(e,t,r,n,i,a,o,u,h){void 0===h&&(h=20);var s,b,c,y=0,m=e,x=t;for(s=0;h>s;s+=1)b=(s+1)/h,c=bezier.curvePoint(b,e,t,r,n,i,a,o,u),y+=Math.sqrt(Math.pow(Math.abs(m-c.x),2)+Math.pow(Math.abs(x-c.y),2)),m=c.x,x=c.y;return y},bezier.segmentLengths=function(e,t,r){t=void 0!==t?t:!1,void 0===r&&(r=20);var n,i,a,o,u,h,s,b,c;for(c=[],n=0;n<e.length;n+=1)i=e[n],a=i.type,0===n?(o=i.x,u=i.y):a===MOVETO?(o=i.x,u=i.y,c.push(0)):a===CLOSE?c.push(bezier.lineLength(h,s,o,u)):a===LINETO?c.push(bezier.lineLength(h,s,i.x,i.y)):a===CURVETO&&c.push(bezier.curveLength(h,s,i.x1,i.y1,i.x2,i.y2,i.x,i.y,r)),a!==CLOSE&&(h=i.x,s=i.y);return t===!0?(b=math.sum(c),b>0?_.map(c,function(e){return e/b}):_.map(c,function(){return 0})):c},bezier.length=function(e,t){return t=t||20,math.sum(bezier.segmentLengths(e.commands,!1,t))},bezier._locate=function(e,t,r){var n,i,a;for(void 0===r&&(r=bezier.segmentLengths(e.commands,!0)),n=0;n<e.commands.length&&(i=e.commands[n],(0===n||i.type===MOVETO)&&(a=new Point(i.x,i.y)),!(t<=r[n]||n===r.length-1));n+=1)t-=r[n];return 0!==r[n]&&(t/=r[n]),n===r.length-1&&0===r[n]&&(n-=1),[n,t,a]},bezier.point=function(e,t,r){var n,i,a,o,u,h;return n=bezier._locate(e,t,r),i=n[0],t=n[1],a=n[2],o=e.commands[i].x,u=e.commands[i].y,h=e.commands[i+1],h.type===LINETO||h.type===CLOSE?h=h.type===CLOSE?bezier.linePoint(t,o,u,a.x,a.y):bezier.linePoint(t,o,u,h.x,h.y):h.type===CURVETO&&(h=bezier.curvePoint(t,o,u,h.x1,h.y1,h.x2,h.y2,h.x,h.y)),h},bezier.extrema=function(e,t,r,n,i,a,o,u){function h(e,t){return Math.abs(e-t)<=1e-12*Math.min(Math.abs(e),Math.abs(t))}function s(e){var t,r,n,i,a;return t=1-e,n=t*t,i=e*e,a=i*e,r=n*t,n*=3*e,i*=3*t,[r,n,i,a]}function b(h){var b,c,y,m,x;return x=s(h),b=x[0],c=x[1],y=x[2],m=x[3],{x:b*e+c*r+y*i+m*o,y:b*t+c*n+y*a+m*u}}function c(e){if(e>=0&&1>=e){var t=b(e);t.x<y?y=t.x:t.x>m&&(m=t.x),t.y<x?x=t.y:t.y>z&&(z=t.y)}}var y,m,x,z,O,v,p,M,E,L,f,g,l,T;return o>e?(y=e,m=o):(y=o,m=e),u>t?(x=t,z=u):(x=u,z=t),O=3*(-e+3*r-3*i+o),v=6*(e-2*r+i),p=3*(-e+r),h(O+1,1)?h(v+1,1)||c(-p/v):(l=v*v-4*O*p,l>=0&&(f=Math.sqrt(l),g=1/(2*O),c((-v+f)*g),c((-v-f)*g))),M=3*(-t+3*n-3*a+u),E=6*(t-2*n+a),L=3*(-t+n),h(M+1,1)?h(E+1,1)||c(-L/E):(T=E*E-4*M*L,T>0&&(f=Math.sqrt(T),g=1/(2*M),c((-E+f)*g),c((-E-f)*g))),new Rect(y,x,m-y,z-x)},module.exports=bezier;


},{"../objects/point":13,"../objects/rect":14,"../util/math":23,"lodash":2}],20:[function(require,module,exports){
"use strict";function toHex(e){var r;return 0===e?"00":(r=e.toString(16).toUpperCase(),r.length<2&&(r="0"+r),r)}var color={};color.namedColors={lightpink:[1,.71,.76],pink:[1,.75,.8],crimson:[.86,.08,.24],lavenderblush:[1,.94,.96],palevioletred:[.86,.44,.58],hotpink:[1,.41,.71],deeppink:[1,.08,.58],mediumvioletred:[.78,.08,.52],orchid:[.85,.44,.84],thistle:[.85,.75,.85],plum:[.87,.63,.87],violet:[.93,.51,.93],fuchsia:[1,0,1],darkmagenta:[.55,0,.55],purple:[.5,0,.5],mediumorchid:[.73,.33,.83],darkviolet:[.58,0,.83],darkorchid:[.6,.2,.8],indigo:[.29,0,.51],blueviolet:[.54,.17,.89],mediumpurple:[.58,.44,.86],mediumslateblue:[.48,.41,.93],slateblue:[.42,.35,.8],darkslateblue:[.28,.24,.55],ghostwhite:[.97,.97,1],lavender:[.9,.9,.98],blue:[0,0,1],mediumblue:[0,0,.8],darkblue:[0,0,.55],navy:[0,0,.5],midnightblue:[.1,.1,.44],royalblue:[.25,.41,.88],cornflowerblue:[.39,.58,.93],lightsteelblue:[.69,.77,.87],lightslategray:[.47,.53,.6],slategray:[.44,.5,.56],dodgerblue:[.12,.56,1],aliceblue:[.94,.97,1],steelblue:[.27,.51,.71],lightskyblue:[.53,.81,.98],skyblue:[.53,.81,.92],deepskyblue:[0,.75,1],lightblue:[.68,.85,.9],powderblue:[.69,.88,.9],cadetblue:[.37,.62,.63],darkturquoise:[0,.81,.82],azure:[.94,1,1],lightcyan:[.88,1,1],paleturquoise:[.69,.93,.93],aqua:[0,1,1],darkcyan:[0,.55,.55],teal:[0,.5,.5],darkslategray:[.18,.31,.31],mediumturquoise:[.28,.82,.8],lightseagreen:[.13,.7,.67],turquoise:[.25,.88,.82],aquamarine:[.5,1,.83],mediumaquamarine:[.4,.8,.67],mediumspringgreen:[0,.98,.6],mintcream:[.96,1,.98],springgreen:[0,1,.5],mediumseagreen:[.24,.7,.44],seagreen:[.18,.55,.34],honeydew:[.94,1,.94],darkseagreen:[.56,.74,.56],palegreen:[.6,.98,.6],lightgreen:[.56,.93,.56],limegreen:[.2,.8,.2],lime:[0,1,0],forestgreen:[.13,.55,.13],green:[0,.5,0],darkgreen:[0,.39,0],lawngreen:[.49,.99,0],chartreuse:[.5,1,0],greenyellow:[.68,1,.18],darkolivegreen:[.33,.42,.18],yellowgreen:[.6,.8,.2],olivedrab:[.42,.56,.14],ivory:[1,1,.94],beige:[.96,.96,.86],lightyellow:[1,1,.88],lightgoldenrodyellow:[.98,.98,.82],yellow:[1,1,0],olive:[.5,.5,0],darkkhaki:[.74,.72,.42],palegoldenrod:[.93,.91,.67],lemonchiffon:[1,.98,.8],khaki:[.94,.9,.55],gold:[1,.84,0],cornsilk:[1,.97,.86],goldenrod:[.85,.65,.13],darkgoldenrod:[.72,.53,.04],floralwhite:[1,.98,.94],oldlace:[.99,.96,.9],wheat:[.96,.87,.07],orange:[1,.65,0],moccasin:[1,.89,.71],papayawhip:[1,.94,.84],blanchedalmond:[1,.92,.8],navajowhite:[1,.87,.68],antiquewhite:[.98,.92,.84],tan:[.82,.71,.55],burlywood:[.87,.72,.53],darkorange:[1,.55,0],bisque:[1,.89,.77],linen:[.98,.94,.9],peru:[.8,.52,.25],peachpuff:[1,.85,.73],sandybrown:[.96,.64,.38],chocolate:[.82,.41,.12],saddlebrown:[.55,.27,.07],seashell:[1,.96,.93],sienna:[.63,.32,.18],lightsalmon:[1,.63,.48],coral:[1,.5,.31],orangered:[1,.27,0],darksalmon:[.91,.59,.48],tomato:[1,.39,.28],salmon:[.98,.5,.45],mistyrose:[1,.89,.88],lightcoral:[.94,.5,.5],snow:[1,.98,.98],rosybrown:[.74,.56,.56],indianred:[.8,.36,.36],red:[1,0,0],brown:[.65,.16,.16],firebrick:[.7,.13,.13],darkred:[.55,0,0],maroon:[.5,0,0],white:[1,1,1],whitesmoke:[.96,.96,.96],gainsboro:[.86,.86,.86],lightgrey:[.83,.83,.83],silver:[.75,.75,.75],darkgray:[.66,.66,.66],gray:[.5,.5,.5],grey:[.5,.5,.5],dimgray:[.41,.41,.41],dimgrey:[.41,.41,.41],black:[0,0,0],cyan:[0,.68,.94],transparent:[0,0,0,0],bark:[.25,.19,.13]},color.rgb2hex=function(e,r,a){return"#"+toHex(Math.round(255*e))+toHex(Math.round(255*r))+toHex(Math.round(255*a))},color.rgba2hex=function(e,r,a,o){return"#"+toHex(Math.round(255*e))+toHex(Math.round(255*r))+toHex(Math.round(255*a))+toHex(Math.round(255*o))},color.hex2rgb=function(e){var r,a,o,l;return e=e.replace(/^#/,""),e.length<6&&(r=[],r.length=6-e.length,e+=r.join(e.substr(e.length-1))),a=parseInt(e.substr(0,2),16)/255,o=parseInt(e.substr(2,2),16)/255,l=parseInt(e.substr(4,2),16)/255,[a,o,l]},color.rgb2hsb=function(e,r,a){var o=0,l=0,n=Math.max(e,r,a),t=n-Math.min(e,r,a);return 0!==n&&(l=t/n),0!==l&&(o=e===n?0+(r-a)/t:r===n?2+(a-e)/t:4+(e-r)/t),o*=60/360,0>o&&(o+=1),[o,l,n]},color.hsb2rgb=function(e,r,a){if(0===r)return[a,a,a];e=e%1*6;var o=Math.floor(e),l=e-o,n=a*(1-r),t=a*(1-r*l),i=a*(1-r*(1-l));return o>4?[a,n,t]:[[a,i,n],[t,a,n],[n,a,i],[n,t,a],[i,n,a]][parseInt(o,10)]},module.exports=color;


},{}],21:[function(require,module,exports){
"use strict";var math=require("../util/math"),Point=require("../objects/point"),geo={};geo.angle=function(t,n,e,o){return math.degrees(Math.atan2(o-n,e-t))},geo.distance=function(t,n,e,o){return Math.sqrt(Math.pow(e-t,2)+Math.pow(o-n,2))},geo.coordinates=function(t,n,e,o){var a=t+Math.cos(math.radians(e))*o,r=n+Math.sin(math.radians(e))*o;return new Point(a,r)},geo.pointInPolygon=function(t,n,e){var o,a,r,i,u,h,s=!1,g=t.length;for(o=0;g>o;o+=1)a=g-1>o?o+1:0,r=t[o].x,i=t[o].y,u=t[a].x,h=t[a].y,(e>i&&h>=e||e>h&&i>=e)&&n>r+(e-i)/(h-i)*(u-r)&&(s=!s);return s},module.exports=geo;


},{"../objects/point":13,"../util/math":23}],22:[function(require,module,exports){
"use strict";exports.defineAlias=function(t,e,n){Object.defineProperty(t.prototype,n,{get:function(){return this[e]},set:function(t){this[e]=t}})},exports.defineGetter=function(t,e,n){Object.defineProperty(t.prototype,e,{get:n})};


},{}],23:[function(require,module,exports){
"use strict";function _fade(r){return r*r*r*(r*(6*r-15)+10)}function _grad(r,t,n,a){var e,o,u;return e=15&r,o=8>e?t:n,u=4>e?n:12===e||14===e?t:a,(0===(1&e)?o:-o)+(0===(2&e)?u:-u)}function _scale(r){return(1+r)/2}var math={};math.sum=function(r){var t,n=r.length,a=0;for(t=0;n>t;t+=1)a+=r[t];return a},math.round=function(r,t){return t?Math.round(r*Math.pow(10,t))/Math.pow(10,t):Math.round(r)},math.sign=function(r){return 0>r?-1:r>0?1:0},math.degrees=function(r){return 180*r/Math.PI},math.radians=function(r){return r/180*Math.PI},math.clamp=function(r,t,n){return n>t?t>r?t:r>n?n:r:n>r?n:r>t?t:r},math.snap=function(r,t,n){return n=void 0!==n?n:1,r*(1-n)+n*Math.round(r/t)*t},math.dot=function(r,t){var n,a=Math.min(r.length,t.length),e=0;for(n=0;a>n;n+=1)e+=r[n]*t[n];return e};var _lerp=math.mix=math.lerp=function(r,t,n,a){if(a){if(0>n)return r;if(n>1)return t}return r+(t-r)*n},_permutation=function(){var r,t,n;for(r=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=new Uint8Array(512),n=0;256>n;n+=1)t[256+n]=t[n]=r[n];return t}();math.noise=function(r,t,n){var a=_permutation,e=255&Math.floor(r),o=255&Math.floor(t),u=255&Math.floor(n);r-=Math.floor(r),t-=Math.floor(t),n-=Math.floor(n);var f=_fade(r),h=_fade(t),i=_fade(n),_=a[e]+o,d=a[_]+u,l=a[_+1]+u,m=a[e+1]+o,c=a[m]+u,p=a[m+1]+u;return _scale(_lerp(_lerp(_lerp(_grad(a[d],r,t,n),_grad(a[c],r-1,t,n),f),_lerp(_grad(a[l],r,t-1,n),_grad(a[p],r-1,t-1,n),f),h),_lerp(_lerp(_grad(a[d+1],r,t,n-1),_grad(a[c+1],r-1,t,n-1),f),_lerp(_grad(a[l+1],r,t-1,n-1),_grad(a[p+1],r-1,t-1,n-1),f),h),i))},module.exports=math;


},{}],24:[function(require,module,exports){
"use strict";function generator(r){if(0>r){for(var e=generator(Math.abs(r)),t=0;23>t;t+=1)e();return generator(e(0,1e4))}return function(e,t){e=e||0,t=t||1,r=(9301*r+49297)%233280;var n=r/233280;return e+n*(t-e)}}exports.generator=generator;


},{}],25:[function(require,module,exports){
"use strict";var _=require("lodash"),xmldom=require("xmldom"),Color=require("../objects/color"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),Transform=require("../objects/transform"),trim=function(t){return t.replace(/^\s+|\s+$/g,"")},compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},toNumberArray=function(t){var e,r=trim(compressSpaces((t||"").replace(/,/g," "))).split(" ");for(e=0;e<r.length;e+=1)r[e]=parseFloat(r[e]);return r},applySvgAttributes=function(t,e){function r(t){if(t.commands){var e=c.transformShape(t).commands,o=void 0===a?t.fill:a,i=void 0===n?t.stroke:n,u=void 0===s?t.strokeWidth:s;return void 0!==u&&(u*=c[0]),new Path(e,o,i,u)}return t.shapes?new Group(_.map(t.shapes,r)):void 0}var a,n,s,o,i,c,u;for(e.commands&&(a="black"),o=[],i={},i.translate=function(t){var e=toNumberArray(t),r=e[0],a=e[1]||0;return(new Transform).translate(r,a)},i.scale=function(t){var e=toNumberArray(t),r=e[0],a=e[1]||r;return(new Transform).scale(r,a)},i.rotate=function(t){var e,r=toNumberArray(t),a=r[0],n=r[1]||0,s=r[2]||0;return e=new Transform,e=e.translate(n,s),e=e.rotate(a),e=e.translate(-n,-s)},i.matrix=function(t){var e=toNumberArray(t);return[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]},_.each(t.attributes,function(t){var e,r,l,h,m;switch(e=t.nodeName){case"transform":for(r=trim(compressSpaces(t.nodeValue)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),u=0;u<r.length;u+=1)l=trim(r[u].split("(")[0]),h=r[u].split("(")[1].replace(")",""),c=i[l](h),o.push(c);break;case"visibility":break;case"stroke-linecap":break;case"stroke-linejoin":break;case"stroke-miterlimit":break;case"stroke-width":s=parseFloat(t.nodeValue);break;case"stroke-opacity":case"fill-opacity":break;case"fill":a=t.nodeValue;break;case"stroke":n=t.nodeValue;break;case"style":m={},_.each(t.nodeValue.split(";"),function(t){var e=t.split(":");m[e[0].trim()]=e[1]}),m.fill&&(a=m.fill),m.stroke&&(n=m.stroke),m["stroke-width"]&&(s=parseFloat(m["stroke-width"]))}}),a=void 0===a?a:Color.parse(a),n=void 0===n?n:Color.parse(n),c=new Transform,u=0;u<o.length;u+=1)c=c.append(o[u]);return r(e)},arcToSegments=function(t,e,r,a,n,s,o,i,c){var u,l,h,m,p,d,g,v,f,b,y,A,C,x,P,k,w,S,M,T,F,q,$,E,L,z,V;for(u=o*(Math.PI/180),l=Math.sin(u),h=Math.cos(u),r=Math.abs(r),a=Math.abs(a),m=h*(i-t)*.5+l*(c-e)*.5,p=h*(c-e)*.5-l*(i-t)*.5,d=m*m/(r*r)+p*p/(a*a),d>1&&(d=Math.sqrt(d),r*=d,a*=d),g=h/r,v=l/r,f=-l/a,b=h/a,y=g*i+v*c,A=f*i+b*c,C=g*t+v*e,x=f*t+b*e,P=(C-y)*(C-y)+(x-A)*(x-A),k=1/P-.25,0>k&&(k=0),w=Math.sqrt(k),s===n&&(w=-w),S=.5*(y+C)-w*(x-A),M=.5*(A+x)+w*(C-y),T=Math.atan2(A-M,y-S),F=Math.atan2(x-M,C-S),q=F-T,0>q&&1===s?q+=2*Math.PI:q>0&&0===s&&(q-=2*Math.PI),$=Math.ceil(Math.abs(q/(.5*Math.PI+.001))),E=[],V=0;$>V;V+=1)L=T+V*q/$,z=T+(V+1)*q/$,E[V]=[S,M,L,z,r,a,l,h];return E},segmentToBezier=function(t,e,r,a,n,s,o,i){var c=i*n,u=-o*s,l=o*n,h=i*s,m=.5*(a-r),p=8/3*Math.sin(.5*m)*Math.sin(.5*m)/Math.sin(m),d=t+Math.cos(r)-p*Math.sin(r),g=e+Math.sin(r)+p*Math.cos(r),v=t+Math.cos(a),f=e+Math.sin(a),b=v+p*Math.sin(a),y=f-p*Math.cos(a);return[c*d+u*g,l*d+h*g,c*b+u*y,l*b+h*y,c*v+u*f,l*v+h*f]},read={svg:function(){return read.g.apply(this,arguments)},g:function(t){var e=[];return _.each(t.childNodes,function(t){var r,a,n;r=t.nodeName,r&&(a=r.replace(/svg\:/gi,"").toLowerCase(),void 0!==read[a]&&(n=read[a].call(this,t),e.push(n)))}),applySvgAttributes(t,new Group(e))},polygon:function(t,e){var r=t.getAttribute("points"),a=new Path;return r.replace(/([\d\.?]+),([\d\.?]+)/g,function(t,e,r){var n=parseFloat(e),s=parseFloat(r);0===a.commands.length?a.moveTo(n,s):a.lineTo(n,s)}),e||a.close(),applySvgAttributes(t,a)},polyline:function(t){return read.polygon(t,!0)},rect:function(t){var e=parseFloat(t.getAttribute("x")),r=parseFloat(t.getAttribute("y")),a=parseFloat(t.getAttribute("width")),n=parseFloat(t.getAttribute("height")),s=new Path;return s.addRect(e,r,a,n),applySvgAttributes(t,s)},ellipse:function(t){var e=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),a=parseFloat(t.getAttribute("rx")),n=parseFloat(t.getAttribute("ry")),s=new Path;return s.addEllipse(e-a,r-n,2*a,2*n),applySvgAttributes(t,s)},circle:function(t){var e=parseFloat(t.getAttribute("cx")),r=parseFloat(t.getAttribute("cy")),a=parseFloat(t.getAttribute("r")),n=new Path;return n.addEllipse(e-a,r-a,2*a,2*a),applySvgAttributes(t,n)},line:function(t){var e=parseFloat(t.getAttribute("x1")),r=parseFloat(t.getAttribute("y1")),a=parseFloat(t.getAttribute("x2")),n=parseFloat(t.getAttribute("y2")),s=new Path;return s.addLine(e,r,a,n),applySvgAttributes(t,s)},path:function(t){var e,r,a,n,s,o,i,c,u,l,h,m,p,d,g,v,f,b,y,A,C,x,P;e=t.getAttribute("d"),e=e.replace(/,/gm," "),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),e=e.replace(/([0-9])([+\-])/gm,"$1 $2"),e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=compressSpaces(e),e=trim(e),r=function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!==this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i+=1,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!==this.previousCommand.toLowerCase()&&"s"!==this.previousCommand.toLowerCase()&&"q"!==this.previousCommand.toLowerCase()&&"t"!==this.previousCommand.toLowerCase())return this.current;var t=new Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()?new Point(t.x+this.current.x,t.y+this.current.y):t}};var k=new Path;for(a=new r(e),a.reset();!a.isEnd();)switch(a.nextCommand(),a.command){case"M":case"m":for(n=a.getAsCurrentPoint(),k.moveTo(n.x,n.y),a.start=a.current;!a.isCommandOrEnd();)n=a.getAsCurrentPoint(),k.lineTo(n.x,n.y);break;case"L":case"l":for(;!a.isCommandOrEnd();)n=a.getAsCurrentPoint(),k.lineTo(n.x,n.y);break;case"H":case"h":for(;!a.isCommandOrEnd();)s=new Point((a.isRelativeCommand()?a.current.x:0)+a.getScalar(),a.current.y),a.current=s,k.lineTo(a.current.x,a.current.y);break;case"V":case"v":for(;!a.isCommandOrEnd();)s=new Point(a.current.x,(a.isRelativeCommand()?a.current.y:0)+a.getScalar()),a.current=s,k.lineTo(a.current.x,a.current.y);break;case"C":case"c":for(;!a.isCommandOrEnd();)o=a.current,i=a.getPoint(),c=a.getAsControlPoint(),u=a.getAsCurrentPoint(),k.curveTo(i.x,i.y,c.x,c.y,u.x,u.y);break;case"S":case"s":for(;!a.isCommandOrEnd();)o=a.current,i=a.getReflectedControlPoint(),c=a.getAsControlPoint(),u=a.getAsCurrentPoint(),k.curveTo(i.x,i.y,c.x,c.y,u.x,u.y);break;case"Q":case"q":for(;!a.isCommandOrEnd();)o=a.current,c=a.getAsControlPoint(),u=a.getAsCurrentPoint(),l=o.x+2/3*(c.x-o.x),h=o.y+2/3*(c.y-o.y),m=l+1/3*(u.x-o.x),p=h+1/3*(u.y-o.y),k.curveTo(l,h,m,p,u.x,u.y);break;case"T":case"t":for(;!a.isCommandOrEnd();)o=a.current,c=a.getReflectedControlPoint(),a.control=c,u=a.getAsCurrentPoint(),l=o.x+2/3*(c.x-o.x),h=o.y+2/3*(c.y-o.y),m=l+1/3*(u.x-o.x),p=h+1/3*(u.y-o.y),k.curveTo(l,h,m,p,u.x,u.y);break;case"A":case"a":for(;!a.isCommandOrEnd();)for(o=a.current,d=a.getScalar(),g=a.getScalar(),v=a.getScalar(),f=a.getScalar(),b=a.getScalar(),u=a.getAsCurrentPoint(),y=u.x,A=u.y,C=arcToSegments(y,A,d,g,f,b,v,o.x,o.y),x=0;x<C.length;x+=1)P=segmentToBezier.apply(this,C[x]),k.curveTo.apply(this,P);break;case"Z":case"z":k.close(),a.current=a.start}return applySvgAttributes(t,k)}};exports.interpret=function(t){var e,r=t.tagName.toLowerCase();return void 0===read[r]?null:e=read[r].call(this,t)},exports.parseString=function(t){var e=(new xmldom.DOMParser).parseFromString(t);return e?exports.interpret(e.documentElement):void 0};


},{"../objects/color":9,"../objects/group":10,"../objects/path":12,"../objects/point":13,"../objects/transform":16,"lodash":2,"xmldom":3}],26:[function(require,module,exports){
"use strict";function importCommands(e){for(var r in e)vg[r]=e[r]}var _=require("lodash"),vg={};vg.bezier=require("./util/bezier"),vg.color=require("./util/color"),vg.geo=require("./util/geo"),vg.math=require("./util/math"),vg.random=require("./util/random"),vg.svg=require("./util/svg"),vg.Color=require("./objects/color"),vg.Group=require("./objects/group"),vg.Matrix4=require("./objects/matrix4"),vg.Path=require("./objects/path"),vg.Point=vg.Vec2=require("./objects/point"),vg.Rect=require("./objects/rect"),vg.Text=require("./objects/text"),vg.Transform=vg.Matrix3=require("./objects/transform"),vg.Vec3=require("./objects/vec3");var Transformable=require("./objects/transformable");_.extend(vg.Point.prototype,Transformable),_.extend(vg.Path.prototype,Transformable),_.extend(vg.Group.prototype,Transformable),_.extend(vg.Text.prototype,Transformable),importCommands(require("./commands/draw")),importCommands(require("./commands/filters")),importCommands(require("./commands/shapes")),module.exports=vg;
},{"./commands/draw":6,"./commands/filters":7,"./commands/shapes":8,"./objects/color":9,"./objects/group":10,"./objects/matrix4":11,"./objects/path":12,"./objects/point":13,"./objects/rect":14,"./objects/text":15,"./objects/transform":16,"./objects/transformable":17,"./objects/vec3":18,"./util/bezier":19,"./util/color":20,"./util/geo":21,"./util/math":23,"./util/random":24,"./util/svg":25,"lodash":2}]},{},[26])(26)
});